<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[데브코스] 4주차 - Understanding and Using Filters" /><meta name="author" content="JaeHo YooN" /><meta property="og:locale" content="en" /><meta name="description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><meta property="og:description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><link rel="canonical" href="https://dkssud8150.github.io/posts/filter/" /><meta property="og:url" content="https://dkssud8150.github.io/posts/filter/" /><meta property="og:site_name" content="JaeHo Yoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-10T20:14:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[데브코스] 4주차 - Understanding and Using Filters" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@JaeHo YooN" /><meta name="google-site-verification" content="znvuGsQGYxMZPBslC4XG6doCYao6Y-fWibfGlcaMHH8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JaeHo YooN"},"dateModified":"2022-05-02T16:15:21+09:00","datePublished":"2022-03-10T20:14:00+09:00","description":"Do focus on developing ‘your ability’ rather than waste time on making you famous.","headline":"[데브코스] 4주차 - Understanding and Using Filters","mainEntityOfPage":{"@type":"WebPage","@id":"https://dkssud8150.github.io/posts/filter/"},"url":"https://dkssud8150.github.io/posts/filter/"}</script><title>[데브코스] 4주차 - Understanding and Using Filters | JaeHo Yoon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHo Yoon"><meta name="application-name" content="JaeHo Yoon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/shin_chan.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaeHo Yoon</a></div><div class="site-subtitle font-italic">Mamba Mentality</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fab fa-angellist ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dkssud8150" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hoya58150','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.notion.so/18490713817d403696812c57d0abe730" aria-label="notion" target="_blank" rel="noopener"> <i class="fab fa-battle-net"></i> </a> <a href="https://www.linkedin.com/in/jaeho-yoon-90b62b230" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/jai_ho8150/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[데브코스] 4주차 - Understanding and Using Filters </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[데브코스] 4주차 - Understanding and Using Filters</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/dkssud8150">JaeHo YooN</a> </em></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-03-10 20:14:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Thu, Mar 10, 2022, 8:14 PM +0900" >Mar 10, 2022</em> </span> <span> Updated <em class="timeago" date="2022-05-02 16:15:21 +0900 " data-toggle="tooltip" data-placement="bottom" title="Mon, May 2, 2022, 4:15 PM +0900" >May 2, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2303 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p><br /></p><h1 id="필터의-개념">필터의 개념</h1><p>필터 : 불순물을 걸러낸다는 뜻으로 측정 데이터의 이상한 데이터를 걸러내는 것이다.</p><h2 id="재귀-필터">재귀 필터 <a href="#재귀-필터" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>재귀 필터 (Recursive Filter)</p><ul><li>기존에 계산해놓은 결과값(과거의 평균값)을 새로운 데이터 계산에 사용한다.<li>매번 전체 데이터에 대해서 다시 계산할 필요가 없다.</ul><p><br /></p><h2 id="평균-필터">평균 필터 <a href="#평균-필터" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>데이터를 모두 합산한 다음 개수로 나누면 평균값이 나온다. 원래 계산한 K개의 데이터의 평균값</p><p><code class="language-plaintext highlighter-rouge">x"_k = (x1+x2+x3+x4+x5+x6+x7...+x_k) / k</code></p><p>여기서 x_k+1 인 새로운 데이터가 들어오면 다시 다 더해서 k+1로 나눈다면 계산이 너무 오래 걸릴 것이다. 그러므로 <code class="language-plaintext highlighter-rouge">평균의 재귀식</code>을 활용한다.</p><ul><li>평균의 재귀식(recursive expression)</ul><p>재귀식을 사용하면 이전 결과를 사용하는 것이기 때문에 효율적이고 메모리적으로도 좋다.</p><p><img data-src="/assets/img/dev/week4/day4/recursive.png" data-proofer-ignore></p><ol><li>k개의 데이터에 대한 평균의 식은 첫번째 식과 같다.<li>k를 좌항으로 옮긴다.<li>k-1을 각 항에 나누고, k-1에 대한 평균으로 바꾸기 위해 나눈다.<li>우항의 첫번째는 k-1에 대한 평균이다.<li>k/k-1 를 우항으로 옮기게 되면 다음과 같다.</ol><p>따라서 과거의 평균값을 통해 다시 계산하지 않고도 평균을 계산할 수 있게 된다.</p><blockquote><p><a href="https://gaussian37.github.io/autodrive-ose-average-filter/">참고 블로그</a></p></blockquote><p>이 때, a = (k-1)/k 로 두어</p><p>k개의 평균값 = a * (k-1)의 평균값 + (1-a) * x</p><p>으로 바꿀 수 있고, 이를 <strong>평균 필터</strong>라 한다.</p><p><br /></p><p>평균 필터는 센서 초기화에 사용된다. 처음 센서를 켜고 일정시간동안 센서의 출력값을 모아 평균 필터로 평균값을 구하고 이 값을 0으로 셋팅하면 된다.</p><p><br /></p><ul><li>예제</ul><p>전압 측정값에 대해 평균 필터를 적용한다.</p><ul><li>10초 동안 0.2초 간격으로 배터리 전압을 측정<li>배터리 전압 14.4v ± α<li>평균 필터를 사용해서 배터리의 전압을 추정하고자 한다.</ul><h3 id="pyplot을-통해-알아보기">pyplot을 통해 알아보기 <a href="#pyplot을-통해-알아보기" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>filter 패키기<li>averagefilter.py</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">seed</span><span class="p">(</span><span class="mi">34</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_volt</span><span class="p">():</span>
    <span class="s">"Measure voltage"</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">volt_mean</span> <span class="o">=</span> <span class="mf">14.4</span>            
    <span class="n">volt_meas</span> <span class="o">=</span> <span class="n">volt_mean</span> <span class="o">+</span> <span class="n">v</span> <span class="c1"># measured voltage
</span>
<span class="k">def</span> <span class="nf">avg_filter</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">x_meas</span><span class="p">,</span> <span class="n">x_avg</span><span class="p">):</span>
    <span class="s">"calculate average voltage using a average filter"</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">k</span>
    <span class="n">x_avg</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">x_avg</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">x_meas</span>
    <span class="k">return</span> <span class="n">x_avg</span>

<span class="c1"># input parameters
</span><span class="n">time_end</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># measure during 10s every 0.2s
</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_end</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
<span class="n">n_samples</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
<span class="n">x_meas_save</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>
<span class="n">x_avg_save</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>

<span class="n">x_avg</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
    <span class="n">k</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">x_meas</span> <span class="o">=</span> <span class="nf">get_volt</span><span class="p">()</span>
    <span class="n">x_avg</span> <span class="o">=</span> <span class="nf">avg_filter</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">x_meas</span><span class="p">,</span> <span class="n">x_avg</span><span class="p">)</span>

    <span class="n">x_meas_save</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_meas</span>
    <span class="n">x_avg_save</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_avg</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">x_meas_save</span><span class="p">,</span> <span class="s">"r*"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Measured'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">x_avg_save</span><span class="p">,</span> <span class="s">"b"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Average'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="s">'measured voltages vs Average filter values'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="s">'time [sec]'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="s">'volt [v]'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
<span class="c1"># plt.savefig('average_filter.png')
</span></pre></table></code></div></div><p><br /></p><h2 id="이동-필터">이동 필터 <a href="#이동-필터" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="평균-필터의-한계">평균 필터의 한계 <a href="#평균-필터의-한계" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>평균 필터는 시간에 따라 변하는 물리량에는 적합하지 않는다. 첫번째 데이터부터 계속 누적해서 너무 이전의 데이터까지 고려할 이유가 없기 때문이다.</p><p>옛날 데이터가 중요하지 않은 경우는 평균 수명 계산이나 주가 예측이 있을 것이다.</p><h3 id="이동-평균-필터">이동 평균 필터 <a href="#이동-평균-필터" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>증권가의 주가 추이 계산이나 이런 경우 60/120일 평균선이 있다. 즉 기간을 정해서 평균을 잡는 것이다.</p><p>그래서 최근 데이터를 기준으로 평균이 계속 움직인다 하여 <strong>이동 평균 필터</strong>라 한다. 데이터를 n개로 제한하여 그에 대한 데이터만 평균 계산한다.</p><p>이 이동평균을 재귀식으로 변환한다.</p><p><img data-src="/assets/img/dev/week4/day4/movefilter.png" data-proofer-ignore></p><p><img data-src="/assets/img/dev/week4/day4/movefilter2.png" data-proofer-ignore></p><p>따라서</p><p>moving average filter(이동 평균 필터) = 바로 이전의 평균값 + (k번째 값 + k-n번째 값)/n</p><p>새로운 이동 평균을 구하려면 이전의 이동 평균 값과 옛날 데이터 x_k-n을 알아야 한다. 평균 필터에서는 과거 데이터를 가지고 있을 필요는 없었으나 여기에는 옛날 데이터들을 가지고 있어야 한다.</p><ul><li>이동평균 필터 예제</ul><p>초음파센서 거리정보 측정값에 대해 이동 평균 필터를 적용할 것이다.</p><ul><li>10초동안 0.02초 간격으로 초음파센서 거리정보를 측정<li>측정 거리 + α<li>N=10 이동 평균 필터를 사용하여 초음파센서의 거리 정보를 추정</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="n">scipy</span> <span class="kn">import</span> <span class="n">io</span>

<span class="n">input_mat</span> <span class="o">=</span> <span class="n">io</span><span class="p">.</span><span class="nf">loadmat</span><span class="p">(</span><span class="s">'./SonarAlt.mat'</span><span class="p">)</span> <span class="c1"># 데이터 파일
</span>
<span class="k">def</span> <span class="nf">get_sonar</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="s">"measure sonar"</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">input_mat</span><span class="p">[</span><span class="s">'sonarAlt'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="k">def</span> <span class="nf">move_avg_filter</span><span class="p">(</span><span class="n">x_n</span><span class="p">,</span> <span class="n">x_meas</span><span class="p">):</span>
    <span class="s">"calculate average sonar using a moving average filter "</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">x_n</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">x_n</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_n</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">x_n</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_meas</span>
    <span class="n">x_avg</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">mean</span><span class="p">(</span><span class="n">x_n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x_avg</span><span class="p">,</span> <span class="n">x_n</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">n_samples</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">time_end</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">dt</span> <span class="o">=</span> <span class="n">time_end</span> <span class="o">/</span> <span class="n">n_samples</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_end</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
<span class="n">x_meas_save</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>
<span class="n">x_avg_save</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
    <span class="n">x_meas</span> <span class="o">=</span> <span class="nf">get_sonar</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x_avg</span><span class="p">,</span> <span class="n">x_n</span> <span class="o">=</span> <span class="n">x_meas</span><span class="p">,</span> <span class="n">x_meas</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x_avg</span><span class="p">,</span> <span class="n">x_n</span> <span class="o">=</span> <span class="nf">mov_avg_filter</span><span class="p">(</span><span class="n">x_n</span><span class="p">,</span> <span class="n">x_meas</span><span class="p">)</span>

    <span class="n">x_meas_save</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_meas</span>
    <span class="n">x_avg_save</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_avg</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">x_meas_save</span><span class="p">,</span> <span class="s">"r*"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Measured'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">x_avg_save</span><span class="p">,</span> <span class="s">"b-"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'moving Average'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="s">'measured voltages vs moving Average filter values'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="s">'time [sec]'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="s">' altitude [m]'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
<span class="c1"># plt.savefig('moving_average_filter.png')
</span></pre></table></code></div></div><p><br /></p><h2 id="저주파-통과-필터low-pass-filter">저주파 통과 필터(Low pass filter) <a href="#저주파-통과-필터low-pass-filter" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>이름 그대로 저주파 신호는 통과시키고, 고주파 신호는 걸러내는 필터다. 이는 노이즈 제거용으로 많이 사용된다. 이동 평균 필터는 오래된 데이터와 최신데이터가 동일한 가중치를 가진다. 그래서 최근 측정값은 높은 가중치를 오랜된 값일수록 가중치를 낮추고자 한 것이다.</p><p>이동 평균 계산식에서 모든 데이터에 가중치 1/n을 부여한다. 변화가 심한 데이터에 대해서는 잡음제거와 변환 민감성을 동시에 달성하기 어렵다.</p><p>자율주행의 경우에도 1초 전 데이터와 방금 측정한 데이터의 가중치는 달라야 한다.</p><p><img data-src="/assets/img/dev/week4/day4/lowpass.png" data-proofer-ignore></p><p>이 때, a는 0~1의 값이고, 이와 같이 계속 하다보면 이전의 값들은 a^n의 가중치가 가해질 것이고, 최근의 값은 a의 가중치가 가해진다.</p><p>이처럼 <strong>1차 저주파 통과 필터를 지수 가중 이동평균 필터</strong>라고도 부른다.</p><h3 id="저주파-통과-필터-예제">저주파 통과 필터 예제 <a href="#저주파-통과-필터-예제" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>초음파센서 거리정보 측정값에 대해 저주파 통과 필터를 적용한다.</p><ul><li>10초동안 0.02간격의 거리정보<li>저주파 통과 필터의 a=0.7로 설정한다.</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="n">scipy</span> <span class="kn">import</span> <span class="n">io</span>

<span class="n">input_mat</span> <span class="o">=</span> <span class="n">io</span><span class="p">.</span><span class="nf">loadmat</span><span class="p">(</span><span class="s">'./SonarAlt.mat'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_sonar</span><span class="p">(</span><span class="n">i</span><span class="p">):</span> <span class="c1"># 파일에 들어있는 데이터 파일을 꺼내라
</span>    <span class="s">"measure sonar"</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">input_mat</span><span class="p">[</span><span class="s">'sonarAlt'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">z</span>

<span class="k">def</span> <span class="nf">low_pass_filter</span><span class="p">(</span><span class="n">x_meas</span><span class="p">,</span> <span class="n">x_esti</span><span class="p">):</span>
    <span class="s">"calculate average sonar using a low pass filter "</span>
    <span class="n">x_esti</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">x_esti</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">x_meas</span>
    <span class="k">return</span> <span class="n">x_esti</span>

<span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.7</span>
<span class="n">n_samples</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">time_end</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">dt</span> <span class="o">=</span> <span class="n">time_end</span> <span class="o">/</span> <span class="n">n_samples</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_end</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
<span class="n">x_meas_save</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>
<span class="n">x_esti_save</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>

<span class="n">x_esti</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
    <span class="n">x_meas</span> <span class="o">=</span> <span class="nf">get_sonar</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x_esti</span> <span class="o">=</span> <span class="n">x_meas</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x_esti</span> <span class="o">=</span> <span class="nf">low_pass_filter</span><span class="p">(</span><span class="n">x_meas</span><span class="p">,</span> <span class="n">x_esti</span><span class="p">)</span>

    <span class="n">x_meas_save</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_meas</span>
    <span class="n">x_esti_save</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_esti</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">x_meas_save</span><span class="p">,</span> <span class="s">"r*"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Measured'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">x_esti_save</span><span class="p">,</span> <span class="s">"b-"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'low pass filter'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'upper left'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="s">'measured voltages vs LPF Values'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="s">'time [sec]'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="s">' altitude [m]'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
<span class="c1"># plt.savefig('low_pass_filter.png')
</span></pre></table></code></div></div><p><br /></p><p>a가 작은 값일 경우 (1-a)가 상대적으로 커지므로 추정값 계산에 측정값이 더 많이 반영된다. 잡음 제거보다는 측정값 변화에 더 민감할 것이다.</p><p>a가 큰 값일 경우 (1-a)가 상대적으로 작아지므로 측정값보다는 직전 추정값의 비중이 더 커진다. 추정값이 직전 추정값과 별로 달라지지 않는다는 것이므로 잡음이 줄어들고 추정값 그래프의 변화가 무뎌진다.</p><p>1차 저주파 통과필터는 구현이 쉽고 수식이 단순하다. 최신 측정값일수록 가중치가 더 높게 된다.</p><p><br /></p><h2 id="가중-이동-평균-필터">가중 이동 평균 필터 <a href="#가중-이동-평균-필터" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>원래의 지수 평균 필터는 지수적으로 변화하는 필터였다. 그러나 선형적으로 증가하는 가중치를 부여하는 필터를 적용하고자 한다. 이를 가중 이동 평균 필터라 한다.</p><p><img data-src="/assets/img/dev/week4/day4/expomovefilter.svg" data-proofer-ignore></p><p>예를 들어 최신 6개의 샘플 데이터(A,B,C,D,E,F)가 있다고 하면 가중치 이동 평균을 구해야 하는데, 최신 데이터를 4개까지라고 한다면 맨 앞의 2개는 오래된 것이다.</p><p>그러므로 <code class="language-plaintext highlighter-rouge">가중 이동 평균 값 = (C+2D+3E+4F)/(1+2+3+4)</code> 이다. 지수가 아닌 선형적이라는 것이 특징이다.</p><h3 id="예제">예제 <a href="#예제" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>weightmoving_average_filter.py<li>sonaralt.mat 데이터 파일을 사용<li>weight_moving_average_filter.png로 저장</ul><p><img data-src="/assets/img/dev/week4/day4/2022-03-17-22-52-08.png" alt="" data-proofer-ignore></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div style="text-align: left;"> <a href="http://hits.dwyl.com/dkssud8150.github.io/posts/filter/" target="_blank"> <img data-src="http://hits.dwyl.com/dkssud8150.github.io/posts/filter.svg" data-proofer-ignore> </a></div><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/classlog/'>Classlog</a>, <a href='/categories/devcourse/'>devcourse</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ros/" class="post-tag no-text-decoration" >ros</a> <a href="/tags/filter/" class="post-tag no-text-decoration" >filter</a> <a href="/tags/devcourse/" class="post-tag no-text-decoration" >devcourse</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[데브코스] 4주차 - Understanding and Using Filters - JaeHo Yoon&amp;url=https://dkssud8150.github.io/posts/filter/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[데브코스] 4주차 - Understanding and Using Filters - JaeHo Yoon&amp;u=https://dkssud8150.github.io/posts/filter/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://dkssud8150.github.io/posts/filter/&amp;text=[데브코스] 4주차 - Understanding and Using Filters - JaeHo Yoon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://dkssud8150.github.io/posts/filter/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script></div><script src="https://utteranc.es/client.js" repo="dkssud8150/dkssud8150.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gitpage/">[깃허브 프로필 꾸미기] github 프로필 만들기</a><li><a href="/posts/product/">[깃허브 프로필 꾸미기] productive box 만들기</a><li><a href="/posts/regex/">[데브코스] 2주차 - linux 기초(REGEX)</a><li><a href="/posts/Kfold/">KFold Cross Validation 과 StratifiedKFold</a><li><a href="/posts/cmake/">[데브코스] 17주차 - CMake OpenCV, Eigen, Pangolin install </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/rostutorial/"><div class="card-body"> <em class="timeago small" date="2022-02-28 13:00:00 +0900" >Feb 28, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 3주차 - ROS Abstract and Turtlesim</h3><div class="text-muted small"><p> ROS 기초 ROS 기능 소개 https://www.ros.org ros : robot operating system 오픈소스 로봇 운영체제 소스 무료 공개 개방형 구조 로봇 소프트웨어를 개발하는 데 필요한 소프트웨어의 집합체 소프트웨어 프레임워크 ...</p></div></div></a></div><div class="card"> <a href="/posts/rosturtlesim8/"><div class="card-body"> <em class="timeago small" date="2022-03-01 13:00:00 +0900" >Mar 1, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 3주차 - ROS Turtlesim 8 RACE and MSG Package</h3><div class="text-muted small"><p> ROS turtlesim 8자 주행 # pub8.py #!/usr/bin/env python import rospy from geometry_msgs.msg import Twist turn = 0 rospy.init_node(&#39;my_node&#39;, anonymous=True) pub = rospy.Publisher(&#39;/turtle1/cmd_...</p></div></div></a></div><div class="card"> <a href="/posts/ros_node/"><div class="card-body"> <em class="timeago small" date="2022-03-02 13:00:00 +0900" >Mar 2, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 3주차 - ROS Node Communication programming</h3><div class="text-muted small"><p> 다양한 상황에서의 노드 통신 누락 없이 모두 잘 도착하는지 데이터 크기에 따른 전송속도 도착하는 데이터를 미처 처리하지 못하면? 주기적 발송에서 타임슬롯을 오버하면 어떻게 되나 협업해야 하는 노드를 순서대로 가동시킬 수 있나? 과제 1. 노드간 동기화문제 설명 퍼블리셔와 서브스크라이버간의 데이터를 빠짐없이 잘 보내고 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/lidar1/" class="btn btn-outline-primary" prompt="Older"><p>[데브코스] 4주차 - ROS nodes and topics for lidar sensors</p></a> <a href="/posts/rvizsensorfusion/" class="btn btn-outline-primary" prompt="Newer"><p>[데브코스] 4주차 - ROS Motor and sensor integration in RVIZ</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">JaeHo YooN</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NC7MWHVXJE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NC7MWHVXJE'); }); </script>