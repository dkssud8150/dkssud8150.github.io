<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸°" /><meta name="author" content="JaeHo YooN" /><meta property="og:locale" content="en" /><meta name="description" content="ROS íŒ¨í‚¤ì§€ ì œì‘" /><meta property="og:description" content="ROS íŒ¨í‚¤ì§€ ì œì‘" /><link rel="canonical" href="https://dkssud8150.github.io/posts/package/" /><meta property="og:url" content="https://dkssud8150.github.io/posts/package/" /><meta property="og:site_name" content="JaeHo Yoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-27T01:23:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸°" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@JaeHo YooN" /><meta name="google-site-verification" content="znvuGsQGYxMZPBslC4XG6doCYao6Y-fWibfGlcaMHH8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JaeHo YooN"},"dateModified":"2022-08-02T18:35:01+09:00","datePublished":"2022-07-27T01:23:00+09:00","description":"ROS íŒ¨í‚¤ì§€ ì œì‘","headline":"[ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸°","mainEntityOfPage":{"@type":"WebPage","@id":"https://dkssud8150.github.io/posts/package/"},"url":"https://dkssud8150.github.io/posts/package/"}</script><title> [ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸° | JaeHo Yoon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHo Yoon"><meta name="application-name" content="JaeHo Yoon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/shin_chan.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaeHo Yoon</a></div><div class="site-subtitle font-italic">Mamba Mentality</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fab fa-angellist ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dkssud8150" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hoya58150','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.notion.so/18490713817d403696812c57d0abe730" aria-label="notion" target="_blank" rel="noopener"> <i class="fab fa-battle-net"></i> </a> <a href="https://www.linkedin.com/in/jaeho-yoon-90b62b230" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/jai_ho8150/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span> [ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸° </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip> [ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸°</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/dkssud8150">JaeHo YooN</a> </em></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-07-27 01:23:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Wed, Jul 27, 2022, 1:23 AM +0900" >Jul 27, 2022</em> </span> <span> Updated <em class="timeago" date="2022-08-02 18:35:01 +0900 " data-toggle="tooltip" data-placement="bottom" title="Tue, Aug 2, 2022, 6:35 PM +0900" >Aug 2, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="7775 words"> <em>43 min</em> read</span></div></div></div><div class="post-content"><h1 id="ros-íŒ¨í‚¤ì§€-ì œì‘">ROS íŒ¨í‚¤ì§€ ì œì‘</h1><h2 id="ros-íŒ¨í‚¤ì§€-ì„¤ê³„">ROS íŒ¨í‚¤ì§€ ì„¤ê³„ <a href="#ros-íŒ¨í‚¤ì§€-ì„¤ê³„" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/img/ros2/package/package_configure.png" data-proofer-ignore></p><p>ëª©ì ë³„ë¡œ ë‚˜ëˆ„ì–´ ë…¸ë“œ ë‹¨ìœ„ì˜ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ê³ , ë…¸ë“œì™€ ë…¸ë“œê°„ì˜ ë°ì´í„° í†µì‹ ì„ ì„¤ê³„í•´ì•¼ í•œë‹¤. ì´ë²ˆ ì˜ˆì œ íŒ¨í‚¤ì§€ëŠ” í† í”½, ì„œë¹„ìŠ¤, ì•¡ì…˜ìœ¼ë¡œ êµ¬ì„±í•˜ê³ ì í•œë‹¤.</p><p>ì´ 4ê°œì˜ ë…¸ë“œë¡œ êµ¬ì„±ë˜ë©°, ê° ë…¸ë“œì—ì„œëŠ” 1ê°œ ì´ìƒì˜ í† í”½ í¼ë¸”ë¦¬ì…”, í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ, ì„œë¹„ìŠ¤ ì„œë²„, ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸, ì•¡ì…˜ ì„œë²„, ì•¡ì…˜ í´ë¼ì´ì–¸íŠ¸ê°€ ì¡´ì¬í•œë‹¤. ì¤‘ì•™ì— ìˆëŠ” ë…¸ë“œëŠ” ë‹¤ë¥¸ ë…¸ë“œë“¤ê³¼ì˜ ì—°ë™ì„ í•´ì•¼ í•˜ë¯€ë¡œ ê°€ì¥ í•µì‹¬ì ì¸ ì—­í• ì´ë‹¤.</p><p>ê°ê°ì˜ ë…¸ë“œ, í† í”½, ì„œë¹„ìŠ¤, ì•¡ì…˜ì€ ê³ ìœ ì˜ ì´ë¦„ì„ ê°€ì§€ê³  ìˆë‹¤.</p><ul><li><code class="language-plaintext highlighter-rouge">argument</code> : <em>arithmetic_argument</em> <strong>í† í”½</strong> ì´ë¦„ìœ¼ë¡œ í˜„ì¬ ì‹œê°„ê³¼ ë³€ìˆ˜ a,bë¥¼ <strong>í¼ë¸”ë¦¬ì‹œ</strong>í•œë‹¤.<li><code class="language-plaintext highlighter-rouge">operator</code> : <em>arithmetic_operator</em> <strong>ì„œë¹„ìŠ¤</strong> ì´ë¦„ìœ¼ë¡œ calculator ë…¸ë“œì—ê²Œ ì—°ì‚°ì(+-*/)ë¥¼ <strong>ì„œë¹„ìŠ¤</strong> ìš”ì²­ê°’ìœ¼ë¡œ ë³´ë‚¸ë‹¤.<li><code class="language-plaintext highlighter-rouge">calculator</code><ul><li><strong>í† í”½</strong>ì´ ìƒì„±ëœ ì‹œê°„ê³¼ ë³€ìˆ˜ a,bë¥¼ <em>arithmetic_argument</em> ì´ë¦„ì˜ í† í”½ì„ <strong>ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ</strong>í•œë‹¤.<li>ë°›ì€ ë³€ìˆ˜ a,bì™€ operator ë…¸ë“œë¡œë¶€í„° ìš”ì²­ê°’ìœ¼ë¡œ ë°›ì€ ì—°ì‚°ìë¥¼ í†µí•´ <strong>ê³„ì‚°</strong>í•˜ê³ (a ì—°ì‚°ì b), operator ë…¸ë“œì—ê²Œ ê²°ê´ê°’ì„ <em>arithmetic_operator</em> ì´ë¦„ìœ¼ë¡œ <strong>ì„œë¹„ìŠ¤ ì‘ë‹µê°’</strong>ì„ ë³´ë‚¸ë‹¤.<li>checker ë…¸ë“œë¡œë¶€í„° <strong>ì•¡ì…˜ ëª©í‘œê°’</strong>(â‘  action goal)ì„ ë°›ì€ í›„ë¶€í„° ì €ì¥ëœ ë³€ìˆ˜(a,b,ì—°ì‚°ì)ë¥¼ ê°€ì§€ê³  ì—°ì‚°í•œ ê°’ì„ í•©í•œë‹¤. ê·¸ë¦¬ê³  ì—°ì‚°ì´ ëë‚œ ê³„ì‚°ì‹ì„ <em>arithmetic_checker</em> ì´ë¦„ìœ¼ë¡œ <strong>ì•¡ì…˜ í”¼ë“œë°±</strong>(â‘¡ action feedback)ì„ checker ë…¸ë“œë¡œ ë³´ë‚¸ë‹¤. ì—°ì‚°ê°’ì˜ í•©ì´ ì•¡ì…˜ ëª©í‘œê°’ì„ ë„˜ê¸°ë©´ ìµœì¢… ì—°ì‚° í•©ê³„ë¥¼ <em>arithmetic_checker</em> ì´ë¦„ìœ¼ë¡œ <strong>ì•¡ì…˜ ê²°ê´ê°’</strong>(â‘¢ action result)ì„ checker ë…¸ë“œë¡œ ë³´ë‚¸ë‹¤.</ul><li><code class="language-plaintext highlighter-rouge">checker</code> : ì—°ì‚°ê°’ì˜ í•©ê³„ì˜ <strong>í•œê³„ì¹˜</strong>ë¥¼ <em>arithmetic_checker</em> <strong>ì•¡ì…˜</strong> ì´ë¦„ìœ¼ë¡œ <strong>ì•¡ì…˜</strong> ëª©í‘œê°’ìœ¼ë¡œ <strong>ì „ë‹¬</strong>í•œë‹¤.</ul><p>Â </p><p>Â </p><h2 id="ros2-cpp-íŒ¨í‚¤ì§€-ì œì‘">ROS2 CPP íŒ¨í‚¤ì§€ ì œì‘ <a href="#ros2-cpp-íŒ¨í‚¤ì§€-ì œì‘" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><a href="https://cafe.naver.com/openrt/24798">034 ROS2 íŒ¨í‚¤ì§€ ì„¤ê³„ (C++)</a><li><a href="https://cafe.naver.com/openrt/24802">035 í† í”½ í”„ë¡œê·¸ë˜ë° (C++)</a></ul><h3 id="ros2-íŒ¨í‚¤ì§€-ì„¤ì •">ROS2 íŒ¨í‚¤ì§€ ì„¤ì • <a href="#ros2-íŒ¨í‚¤ì§€-ì„¤ì •" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>ğŸ”¥ ì£¼ì˜ : ì•„ë˜ íŒŒì¼ë“¤ì€ ì½”ë“œë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ì„œë§Œ ë³´ê³ , ì¶”í›„ git cloneì„ ìˆ˜í–‰í•  ì˜ˆì •ì´ë¯€ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê¸°ë¥¼ ë°”ë€ë‹¤. ë§Œì•½ íŒ¨í‚¤ì§€ë¥¼ ë™ì¼í•œ ì´ë¦„ìœ¼ë¡œ ìƒì„±í•  ê²½ìš° ë¹Œë“œì— ë¬¸ì œê°€ ìƒê¸°ë¯€ë¡œ, ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê±°ë‚˜, cloneí•œ ê²ƒì„ ì‚¬ìš©í•˜ê¸¸ ë°”ë€ë‹¤.</p><p>Â </p><ul><li>package.xml</ul><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?&gt;</span>

<span class="c">&lt;!-- ROS2 íŒ¨í‚¤ì§€ ì„¤ì •íŒŒì¼ì˜ package formatì´ ì„¸ë²ˆì§¸ ë²„ì „ì´ë¯€ë¡œ 3 --&gt;</span>
<span class="nt">&lt;package</span> <span class="na">format=</span><span class="s">"3"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- íŒ¨í‚¤ì§€ ì´ë¦„ --&gt;</span>
  <span class="nt">&lt;name&gt;</span>topic_service_action_rclcpp_example<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.2.0<span class="nt">&lt;/version&gt;</span>

  <span class="c">&lt;!-- ì„¤ëª… --&gt;</span>
  <span class="nt">&lt;description&gt;</span>ROS 2 rclcpp example package for the topic, service, action<span class="nt">&lt;/description&gt;</span> 
  <span class="nt">&lt;maintainer</span> <span class="na">email=</span><span class="s">"jhyoon@todo.todo"</span><span class="nt">&gt;</span>jhyoon<span class="nt">&lt;/maintainer&gt;</span>
  <span class="c">&lt;!-- ë¼ì´ì„ ìŠ¤ --&gt;</span>
  <span class="nt">&lt;license&gt;</span>Apache License 2.0<span class="nt">&lt;/license&gt;</span>
  <span class="nt">&lt;author</span> <span class="na">email=</span><span class="s">"passionvirus@gmail.com"</span><span class="nt">&gt;</span>Pyo<span class="nt">&lt;/author&gt;</span>
  <span class="nt">&lt;author</span> <span class="na">email=</span><span class="s">"routiful@gmail.com"</span><span class="nt">&gt;</span>Darby Lim<span class="nt">&lt;/author&gt;</span>

  <span class="c">&lt;!-- ë¹Œë“œíˆ´ : ament_cmake --&gt;</span>
  <span class="nt">&lt;buildtool_depend&gt;</span>ament_cmake<span class="nt">&lt;/buildtool_depend&gt;</span>

  <span class="c">&lt;!-- dependency --&gt;</span>
  <span class="c">&lt;!-- ros2ì—ì„œ ì‚¬ìš©í•˜ëŠ” cppíˆ´ --&gt;</span>
  <span class="nt">&lt;depend&gt;</span>rclcpp<span class="nt">&lt;/depend&gt;</span>
  <span class="c">&lt;!-- cppíˆ´ì—ì„œ action ì‚¬ìš©í•˜ê¸° ìœ„í•¨ --&gt;</span>
  <span class="nt">&lt;depend&gt;</span>rclcpp_action<span class="nt">&lt;/depend&gt;</span>
  <span class="c">&lt;!-- std íŒ¨í‚¤ì§€ ì‚¬ìš© --&gt;</span>
  <span class="nt">&lt;depend&gt;</span>std_msgs<span class="nt">&lt;/depend&gt;</span>
  <span class="c">&lt;!-- í† í”½,ì„œë¹„ìŠ¤,ì•¡ì…˜ ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ --&gt;</span>
  <span class="nt">&lt;depend&gt;</span>msg_srv_action_interface_example<span class="nt">&lt;/depend&gt;</span>

  <span class="c">&lt;!-- ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” Lint íŒ¨í‚¤ì§€, í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìœ„í•œ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ --&gt;</span>
  <span class="nt">&lt;test_depend&gt;</span>ament_lint_auto<span class="nt">&lt;/test_depend&gt;</span>
  <span class="nt">&lt;test_depend&gt;</span>ament_lint_common<span class="nt">&lt;/test_depend&gt;</span>

  <span class="nt">&lt;export&gt;</span>
    <span class="c">&lt;!-- build type : ament_cmake --&gt;</span>
    <span class="nt">&lt;build_type&gt;</span>ament_cmake<span class="nt">&lt;/build_type&gt;</span>
  <span class="nt">&lt;/export&gt;</span>
<span class="nt">&lt;/package&gt;</span>
</pre></table></code></div></div><p>Â </p><ul><li>CMakeLists.txt</ul><p>CMakelistì—ëŠ” í¬ê²Œ cmake ì„¤ì •, ì˜ì¡´ì„± ëª…ì‹œ, ë¹Œë“œ, ì„¤ì¹˜, í…ŒìŠ¤íŠ¸, ament package ë§¤í¬ë¡œ ì„¤ì •ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
</pre><td class="rouge-code"><pre><span class="cp"># Set minimum required version of cmake, project name and compile options
</span><span class="n">cmake_minimum_required</span><span class="p">(</span><span class="n">VERSION</span> <span class="mf">3.5</span><span class="p">)</span>

<span class="cp"># project name
</span><span class="n">project</span><span class="p">(</span><span class="n">topic_service_action_rclcpp_example</span><span class="p">)</span>

<span class="cp"># Cì–¸ì–´ì˜ ë²„ì „ì„ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ C99ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©
</span><span class="k">if</span><span class="p">(</span><span class="n">NOT</span> <span class="n">CMAKE_C_STANDARD</span><span class="p">)</span>
  <span class="n">set</span><span class="p">(</span><span class="n">CMAKE_C_STANDARD</span> <span class="mi">99</span><span class="p">)</span>
<span class="n">endif</span><span class="p">()</span>

<span class="cp"># C++ì˜ ë²„ì „ì„ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ C++ 14ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©
</span><span class="k">if</span><span class="p">(</span><span class="n">NOT</span> <span class="n">CMAKE_CXX_STANDARD</span><span class="p">)</span>
  <span class="n">set</span><span class="p">(</span><span class="n">CMAKE_CXX_STANDARD</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">endif</span><span class="p">()</span>

<span class="cp"># GNUë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, Clang ì»´íŒŒì¼ëŸ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
</span><span class="k">if</span><span class="p">(</span><span class="n">CMAKE_COMPILER_IS_GNUCXX</span> <span class="n">OR</span> <span class="n">CMAKE_CXX_COMPILER_ID</span> <span class="n">MATCHES</span> <span class="s">"Clang"</span><span class="p">)</span>
  <span class="n">add_compile_options</span><span class="p">(</span><span class="o">-</span><span class="n">Wall</span> <span class="o">-</span><span class="n">Wextra</span> <span class="o">-</span><span class="n">Wpedantic</span><span class="p">)</span>
<span class="n">endif</span><span class="p">()</span>

<span class="cp"># Find dependencies
# REQUIRED : íŒ¨í‚¤ì§€ë¥¼ ì°¾ê³ , ì—†ìœ¼ë©´ ì—ëŸ¬ê°€ ë‚˜ë„ë¡ í•˜ëŠ” ì˜µì…˜
</span><span class="n">find_package</span><span class="p">(</span><span class="n">ament_cmake</span> <span class="n">REQUIRED</span><span class="p">)</span>
<span class="n">find_package</span><span class="p">(</span><span class="n">rclcpp</span> <span class="n">REQUIRED</span><span class="p">)</span>
<span class="n">find_package</span><span class="p">(</span><span class="n">msg_srv_action_interface_example</span> <span class="n">REQUIRED</span><span class="p">)</span>
<span class="n">find_package</span><span class="p">(</span><span class="n">rclcpp_action</span> <span class="n">REQUIRED</span><span class="p">)</span>

<span class="cp"># header íŒŒì¼ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë””ë ‰í† ë¦¬
</span><span class="n">include_directories</span><span class="p">(</span><span class="n">include</span><span class="p">)</span>

<span class="cp"># Build
# ì‹¤ì œë¡œ ì‹¤í–‰í•˜ëŠ” íŒŒì¼ (node_name file_directory)
</span><span class="n">add_executable</span><span class="p">(</span><span class="n">argument</span> <span class="n">src</span><span class="o">/</span><span class="n">arithmetic</span><span class="o">/</span><span class="n">argument</span><span class="p">.</span><span class="n">cpp</span><span class="p">)</span>
<span class="cp"># í”„ë¡œê·¸ë¨ ì‹¤í–‰ì„ ìœ„í•´ í•„ìš”í•œ ì˜ì¡´ì„± íŒ¨í‚¤ì§€
</span><span class="n">ament_target_dependencies</span><span class="p">(</span><span class="n">argument</span>
  <span class="n">msg_srv_action_interface_example</span>
  <span class="n">rclcpp</span>
<span class="p">)</span>

<span class="n">add_executable</span><span class="p">(</span><span class="n">calculator</span> <span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">cpp</span> <span class="n">src</span><span class="o">/</span><span class="n">calculator</span><span class="o">/</span><span class="n">calculator</span><span class="p">.</span><span class="n">cpp</span><span class="p">)</span>
<span class="cp"># calculatorì—ì„œëŠ” actionë„ ì§„í–‰ë˜ê¸°ì— ì˜ì¡´ì„± íŒ¨í‚¤ì§€ì— ì¶”ê°€
</span><span class="n">ament_target_dependencies</span><span class="p">(</span><span class="n">calculator</span>
  <span class="n">msg_srv_action_interface_example</span>
  <span class="n">rclcpp</span>
  <span class="n">rclcpp_action</span>
<span class="p">)</span>

<span class="n">add_executable</span><span class="p">(</span><span class="n">checker</span> <span class="n">src</span><span class="o">/</span><span class="n">checker</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">cpp</span> <span class="n">src</span><span class="o">/</span><span class="n">checker</span><span class="o">/</span><span class="n">checker</span><span class="p">.</span><span class="n">cpp</span><span class="p">)</span>
<span class="n">ament_target_dependencies</span><span class="p">(</span><span class="n">checker</span>
  <span class="n">msg_srv_action_interface_example</span>
  <span class="n">rclcpp</span>
  <span class="n">rclcpp_action</span>
<span class="p">)</span>

<span class="n">add_executable</span><span class="p">(</span><span class="k">operator</span> <span class="n">src</span><span class="o">/</span><span class="n">arithmetic</span><span class="o">/</span><span class="k">operator</span><span class="p">.</span><span class="n">cpp</span><span class="p">)</span>
<span class="n">ament_target_dependencies</span><span class="p">(</span><span class="k">operator</span>
  <span class="n">msg_srv_action_interface_example</span>
  <span class="n">rclcpp</span>
<span class="p">)</span>

<span class="cp"># Install
</span><span class="n">install</span><span class="p">(</span><span class="n">TARGETS</span>
  <span class="n">argument</span>
  <span class="n">calculator</span>
  <span class="n">checker</span>
  <span class="k">operator</span>
  <span class="n">DESTINATION</span> <span class="n">lib</span><span class="o">/</span><span class="err">$</span><span class="p">{</span><span class="n">PROJECT_NAME</span><span class="p">}</span>
<span class="p">)</span>

<span class="cp"># ì—¬ê¸°ì„œ ë³¼ ìˆ˜ ìˆë“¯ launch ì™€ paramì€ share í´ë” ì•„ë˜ì— ì €ì¥í•´ì•¼ í•œë‹¤.
</span><span class="n">install</span><span class="p">(</span><span class="n">DIRECTORY</span> <span class="n">launch</span> <span class="n">param</span>
  <span class="n">DESTINATION</span> <span class="n">share</span><span class="o">/</span><span class="err">$</span><span class="p">{</span><span class="n">PROJECT_NAME</span><span class="p">}</span>
<span class="p">)</span>

<span class="cp"># Test
# testì‹œ í•„ìš”í•œ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë“¤, ì¶”í›„ testì‹œ colcon test ë¥¼ í†µí•´ ì‚¬ìš© ê°€ëŠ¥
# ament_lint_auto_find_test_dependenicesë¥¼ í†µí•´ cpplintë¼ëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ì ê²€í•´ì£¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©
</span><span class="k">if</span><span class="p">(</span><span class="n">BUILD_TESTING</span><span class="p">)</span>
  <span class="n">find_package</span><span class="p">(</span><span class="n">ament_lint_auto</span> <span class="n">REQUIRED</span><span class="p">)</span>
  <span class="n">ament_lint_auto_find_test_dependencies</span><span class="p">()</span>
<span class="n">endif</span><span class="p">()</span>

<span class="cp"># Macro for ament package
# ament íŒ¨í‚¤ì§€ë¥¼ ìœ„í•œ ë§¤í¬ë¡œ í•¨ìˆ˜ë¥¼ ì ì–´ì£¼ì–´ì•¼ í•¨
</span><span class="n">ament_package</span><span class="p">()</span>
</pre></table></code></div></div><p>Â </p><p>Â </p><h3 id="ì½”ë“œ-ë‹¤ìš´ë¡œë“œ-ë°-ë¹Œë“œ">ì½”ë“œ ë‹¤ìš´ë¡œë“œ ë° ë¹Œë“œ <a href="#ì½”ë“œ-ë‹¤ìš´ë¡œë“œ-ë°-ë¹Œë“œ" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">source ~/robot_ws/install/local_setup.bash</code>ëŠ” ~/.bashrcì— ì—†ìœ¼ë©´ ì¶”ê°€í•˜ê³ , ìˆìœ¼ë©´ ì¶”ê°€í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/robot_ws/src
<span class="nv">$ </span>git clone https://github.com/robotpilot/ros2-seminar-examples.git
<span class="nv">$ </span><span class="nb">cd</span> ~/robot_ws <span class="o">&amp;&amp;</span> colcon build <span class="nt">--symlink-install</span>
Starting <span class="o">&gt;&gt;&gt;</span> msg_srv_action_interface_example
Starting <span class="o">&gt;&gt;&gt;</span> logging_rclpy_example
Finished <span class="o">&lt;&lt;&lt;</span> logging_rclpy_example <span class="o">[</span>1.26s]
Starting <span class="o">&gt;&gt;&gt;</span> my_first_ros_rclcpp_pkg
Finished <span class="o">&lt;&lt;&lt;</span> my_first_ros_rclcpp_pkg <span class="o">[</span>13.8s]
Starting <span class="o">&gt;&gt;&gt;</span> my_first_ros_rclpy_pkg
...

<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'source ~/robot_ws/install/local_setup.bash'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nv">$ </span><span class="nb">source</span> ~/.bashrc

<span class="nv">$ </span><span class="nb">.</span> ~/robot_ws/install/local_setup.bash
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">. ~/robot_ws/install/local_setup.bash</code> ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ íŒ¨í‚¤ì§€ë¥¼ ì°¾ì§€ ëª»í•œë‹¤ëŠ” ì—ëŸ¬ê°€ ëœ¨ë‹ˆ ì£¼ì˜í•˜ì.</p><p>Â </p><p>ë¹Œë“œê°€ ëë‚˜ê³ , ë¬¸ì œê°€ ì—†ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">~/robot_ws/install/topic_service_action_rclcpp_example</code> í´ë” ì•ˆì— ìš°ë¦¬ê°€ ì‘ì„±í•œ ROS ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ íŒŒì¼ë“¤ì´ ì €ì¥ë  ê²ƒì´ë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">ls</span> ~/robot_ws/install
COLCON_IGNORE             logging_rclpy_example             rqt_example          tf2_rclpy_example
local_setup.bash          msg_srv_action_interface_example  setup.bash           time_rclcpp_example
local_setup.ps1           my_first_ros_rclcpp_pkg           setup.ps1            time_rclpy_example
local_setup.sh            my_first_ros_rclpy_pkg            setup.sh             topic_service_action_rclcpp_example
_local_setup_util_ps1.py  rclcpp_tutorial                   setup.zsh            topic_service_action_rclpy_example
_local_setup_util_sh.py   rclpy_tutorial                    testbot_description
local_setup.zsh           ros2env                           tf2_rclcpp_example


<span class="nv">$ </span><span class="nb">ls</span> ~/robot_ws/install/topic_service_action_rclcpp_example/lib/topic_service_action_rclcpp_example/
argument    calculator  checker     operator

<span class="nv">$ </span><span class="nb">ls</span> ~/robot_ws/install/topic_service_action_rclcpp_example/share/topic_service_action_rclcpp_example/
cmake/            launch/           local_setup.sh    package.dsv       package.xml
environment/      local_setup.bash  local_setup.zsh   package.ps1       package.zsh
hook/             local_setup.dsv   package.bash      package.sh        param/
</pre></table></code></div></div><p>ì´ì™€ ê°™ì´ argument, operator, calculator, checkerì™€ ê°™ì€ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ê°€ ìƒì„±ë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  share í´ë” ì•ˆì—ëŠ” launchí´ë”ì™€ param í´ë”ê°€ ìƒì„±ë˜ì—ˆê³ , ê° í´ë” ì•ˆì—ëŠ” arithmetic.launch.pyì™€ arithmetic_config.yamlê°€ ìœ„ì¹˜í•œë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">ls</span> ~/robot_ws/install/topic_service_action_rclcpp_example/share/topic_service_action_rclcpp_example/launch/
arithmetic.launch.py

<span class="nv">$ </span><span class="nb">ls</span> ~/robot_ws/install/topic_service_action_rclcpp_example/share/topic_service_action_rclcpp_example/param/
arithmetic_config.yaml
</pre></table></code></div></div><p>Â </p><p>Â </p><h3 id="ê°„ë‹¨í•œ-ë…¸ë“œ-ì‹¤í–‰">ê°„ë‹¨í•œ ë…¸ë“œ ì‹¤í–‰ <a href="#ê°„ë‹¨í•œ-ë…¸ë“œ-ì‹¤í–‰" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>calculator ë…¸ë“œ ì‹¤í–‰</ul><p>ì´ ë…¸ë“œëŠ” í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„, ì„œë¹„ìŠ¤ ì„œë²„, ì•¡ì…˜ ì„œë²„ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example calculator
<span class="o">[</span>INFO]: Run calculator
</pre></table></code></div></div><p>ì‹¤í–‰í–ˆì§€ë§Œ, ì•„ì§ ë°›ëŠ” í† í”½ì´ë‚˜ ì„œë¹„ìŠ¤, ì•¡ì…˜ì´ ì—†ìœ¼ë¯€ë¡œ ë™ì‘ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.</p><p>Â </p><ul><li>argument ë…¸ë“œ ì‹¤í–‰</ul><p>ì´ ë…¸ë“œëŠ” í† í”½ í¼ë¸”ë¦¬ì…” ì—­í• ì„ í•œë‹¤. ì´ë¥¼ ì‹¤í–‰í•˜ë©´ í¼ë¸”ë¦¬ì‹œí•˜ê³  ìˆëŠ” argument a, argument bê°€ í‘œì‹œë  ê²ƒì´ê³ , ì´ë¥¼ í†µí•´ calculator ë…¸ë“œì—ì„œëŠ” argument a, argument bì™€ í•¨ê»˜ ìˆ˜ì‹  ë°›ì€ ì‹œê°„ ì •ë³´ê°€ ì¶œë ¥ë  ê²ƒì´ë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example argument
<span class="o">[</span>INFO]: Published argument_a 4.73
<span class="o">[</span>INFO]: Published argument_b 7.43
<span class="o">[</span>INFO]: Published argument_a 1.55
<span class="o">[</span>INFO]: Published argument_b 6.38
<span class="o">[</span>INFO]: Published argument_a 7.09
<span class="o">[</span>INFO]: Published argument_b 5.89
<span class="o">[</span>INFO]: Published argument_a 5.90
<span class="o">[</span>INFO]: Published argument_b 8.21
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>ros2 run  topic_service_action_rclcpp_example calculator
<span class="o">[</span>INFO]: Run calculator
<span class="o">[</span>INFO]: Timestamp of the message: sec 1658859718 nanosec 500974826
<span class="o">[</span>INFO]: Subscribed argument a: 4.73
<span class="o">[</span>INFO]: Subscribed argument b: 7.43
<span class="o">[</span>INFO]: Timestamp of the message: sec 1658859719 nanosec 500985640
<span class="o">[</span>INFO]: Subscribed argument a: 1.55
<span class="o">[</span>INFO]: Subscribed argument b: 6.38
<span class="o">[</span>INFO]: Timestamp of the message: sec 1658859720 nanosec 501005719
<span class="o">[</span>INFO]: Subscribed argument a: 7.09
<span class="o">[</span>INFO]: Subscribed argument b: 5.89
<span class="o">[</span>INFO]: Timestamp of the message: sec 1658859721 nanosec 500910222
<span class="o">[</span>INFO]: Subscribed argument a: 5.90
<span class="o">[</span>INFO]: Subscribed argument b: 8.21
<span class="o">[</span>INFO]: Timestamp of the message: sec 1658859722 nanosec 501017918
<span class="o">[</span>INFO]: Subscribed argument a: 2.57
<span class="o">[</span>INFO]: Subscribed argument b: 8.50
<span class="o">[</span>INFO]: Timestamp of the message: sec 1658859723 nanosec 500904549
<span class="o">[</span>INFO]: Subscribed argument a: 4.43
<span class="o">[</span>INFO]: Subscribed argument b: 4.86
</pre></table></code></div></div><p>Â </p><ul><li>operator ë…¸ë“œ ì‹¤í–‰</ul><p>ì´ ë…¸ë“œëŠ” ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ ì—­í• ì„ í•œë‹¤. calculator ë…¸ë“œì—ê²Œ ëœë¤ìœ¼ë¡œ ì„ íƒí•œ ì—°ì‚°ìë¥¼ ì„œë¹„ìŠ¤ ìš”ì²­ê°’ìœ¼ë¡œ ë³´ë‚´ê³ , ì—°ì‚°ëœ ê²°ê³¼ê°’ì„ ë°›ì•„ í„°ë¯¸ë„ ì°½ì— í‘œì‹œí•œë‹¤. ì‹¤ì œ ê³„ì‚°ì‹ì€ calculator ë…¸ë“œê°€ ì‹¤í–‰ ì¤‘ì¸ ì°½ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example operator
<span class="o">[</span>INFO]: Result 13.79
Press Enter <span class="k">for </span>next service call.
<span class="o">[</span>INFO]: Result 9.57
Press Enter <span class="k">for </span>next service call.
<span class="o">[</span>INFO]: Result 0.30
Press Enter <span class="k">for </span>next service call.
<span class="o">[</span>INFO]: Result 0.71
Press Enter <span class="k">for </span>next service call.
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example calculator
<span class="o">[</span>INFO]: 2.224688 + 7.350139 <span class="o">=</span> 9.57483
<span class="o">[</span>INFO]: 2.224688 / 7.350139 <span class="o">=</span> 0.302673

<span class="o">[</span>INFO]: Timestamp of the message: sec 1658859884 nanosec 500955814
<span class="o">[</span>INFO]: Subscribed argument a: 5.25
<span class="o">[</span>INFO]: Subscribed argument b: 7.38
<span class="o">[</span>INFO]: 5.247090 / 7.383574 <span class="o">=</span> 0.710644
<span class="o">[</span>INFO]: 5.247090 / 7.383574 <span class="o">=</span> 0.710644
</pre></table></code></div></div><p>Entor í‚¤ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.</p><p>Â </p><ul><li>checker ë…¸ë“œ ì‹¤í–‰</ul><p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ ë…¸ë“œëŠ” ë¨¼ì € ì—°ì‚°ê°’ì˜ í•©ê³„ í•œê³„ì¹˜ë¥¼ ì•¡ì…˜ ëª©í‘œê°’ìœ¼ë¡œ calculator ë…¸ë“œì— ì „ë‹¬í•œë‹¤. ì´í›„ checker ë…¸ë“œëŠ” calculator ë…¸ë“œì—ê²Œ ì•¡ì…˜ í”¼ë“œë°±ì„ ë°›ëŠ”ë°, ê·¸ í”¼ë“œë°±ì€ ê° ì—°ì‚°ê³¼ ê·¸ ê²°ê³¼ì˜ stringíƒ€ì…ì´ë‹¤. ì§€ì •í•œ ì—°ì‚°ê°’ì˜ í•©ê³„ê°€ ëª©í‘œ í•©ê³„ë¥¼ ë„˜ê¸°ë©´ checker ë…¸ë“œëŠ” ì•¡ì…˜ ê²°ê³¼ê°’ìœ¼ë¡œ calculator ë…¸ë“œë¡œë¶€í„° ìµœì¢… ì—°ì‚° í•©ê³„ë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example checker
goal_total_sum : 50
<span class="o">[</span>INFO]: Action goal accepted.
<span class="o">[</span>INFO]: Action feedback:
<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]: Action feedback:
<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]: Action feedback:
<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]: Action feedback:
<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example calculator
<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644

<span class="o">[</span>INFO]:         5.247090 / 7.383574 <span class="o">=</span> 0.710644
</pre></table></code></div></div><p>ë™ì¼í•œ loggingì´ ì¶œë ¥ë˜ëŠ”ë°, ì´ëŠ” ëª©í‘œ í•©ê³„ë¥¼ ë„˜ê²¼ì„ ë•Œ, calculator ë…¸ë“œê°€ checker ë…¸ë“œì—ê²Œ ìµœì¢… ì—°ì‚° í•©ê³„ë¥¼ ì „ë‹¬í•˜ê¸° ë•Œë¬¸ì´ë‹¤. í•©ê³„ì˜ í•œê³„ì¹˜ëŠ” ê¸°ë³¸ìœ¼ë¡œ 50ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤. ì´ë¥¼ ìˆ˜ì •í•˜ê³ ì í•œë‹¤ë©´ checker ë…¸ë“œë¥¼ ì‹¤í–‰ì‹œí‚¬ ë•Œ ì‹¤í–‰ ì¸ìë¡œ <code class="language-plaintext highlighter-rouge">-g 100</code> ì´ë¼ ì…ë ¥í•˜ë©´ GOAL_TOTAL_SUM ì´ë¼ëŠ” í•©ê³„ í•œê³„ì¹˜ ì¸ìê°€ 100ìœ¼ë¡œ í• ë‹¹ëœë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ros2 run topic_service_action_rclcpp_example checker <span class="nt">-g</span> 100
</pre></table></code></div></div><p>Â </p><ul><li>launch íŒŒì¼ ì‹¤í–‰</ul><p>launch íŒŒì¼ì„ í†µí•´ argument ë…¸ë“œì™€ calculator ë…¸ë“œë¥¼ í•œë²ˆì— ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. launchíŒŒì¼ì€ <code class="language-plaintext highlighter-rouge">arithmetic.launch.py</code> íŒŒì¼ì´ë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ros2 launch topic_service_action_rclcpp_example arithmetic.launch.py
</pre></table></code></div></div><p>Â </p><p>Â </p><h3 id="ros-í† í”½-ëœ¯ì–´ë³´ê¸°">ROS í† í”½ ëœ¯ì–´ë³´ê¸° <a href="#ros-í† í”½-ëœ¯ì–´ë³´ê¸°" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>ì´ì œëŠ” ìœ„ì˜ íŒ¨í‚¤ì§€ì—ì„œ í† í”½ì— ëŒ€í•´ ë” ìì„¸íˆ ëœ¯ì–´ë³´ê³ ì í•œë‹¤.</p><p>Â </p><p>í† í”½ì€ ë¹„ë™ê¸°ì‹ ë‹¨ë°©í–¥ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  ë°©ì‹ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë°œí–‰í•˜ëŠ” í¼ë¸”ë¦¬ì…”ì™€ ë©”ì‹œì§€ë¥¼ êµ¬ë…í•˜ëŠ” ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ ê°„ì˜ í†µì‹ ì´ë‹¤. ì´ëŠ” 1:1 í†µì‹ ì„ ê¸°ë³¸ìœ¼ë¡œ í•˜ì§€ë§Œ, 1:N, N:1, N:Në„ ê°€ëŠ¥í•˜ë‹¤.</p><p>ìœ„ì—ì„œ í† í”½ì€ argument ë…¸ë“œì—ì„œ calculator ë…¸ë“œë¡œì˜ argument a, argument b, í† í”½ì„ ìƒì„±í•œ ì‹œê°„ì— ëŒ€í•œ ë©”ì‹œì§€ ì „ë‹¬ì´ë‹¤.</p><p><img data-src="/assets/img/ros2/package/topic.png" data-proofer-ignore></p><p>Â </p><p>ë”°ë¼ì„œ í¼ë¸”ë¦¬ì…”ì™€ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ë¥¼ ì§ì ‘ ì‘ì„±í•´ë³´ê³ ì í•œë‹¤.</p><p>ì½”ë“œëŠ” ì†ŒìŠ¤ íŒŒì¼ê³¼ í—¤ë” íŒŒì¼ì´ ì¡´ì¬í•˜ê³ , ê°ê° src í´ë”ì™€ include í´ë”ì— ìœ„ì¹˜í•œë‹¤.</p><p>í¼ë¸”ë¦¬ì…”</p><ul><li>topic_service_action_rclcpp_example/src/arithmetic/argument.cpp<li>topic_service_action_rclcpp_example/include/arithmetic/argument.hpp</ul><p>Â </p><p>ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„</p><ul><li>topic_service_action_rclcpp_example/src/arithmetic/argument.cpp<li>topic_service_action_rclcpp_example/include/arithmetic/argument.hpp</ul><p>Â </p><h4 id="í¼ë¸”ë¦¬ì…”">í¼ë¸”ë¦¬ì…” <a href="#í¼ë¸”ë¦¬ì…”" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>í† í”½ í¼ë¸”ë¦¬ì…” ë…¸ë“œëŠ” argument ë…¸ë“œì´ë‹¤.</p><ol><li>Node ì„¤ì •<li>QoS ì„¤ì •<li>create_publisher ì„¤ì • (timer ì„¤ì •)<li>í¼ë¸”ë¦¬ì‹œ í•¨ìˆ˜ ì‘ì„±</ol><p>Â </p><ul><li>í—¤ë” íŒŒì¼</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="cp">#ifndef ARITHMETIC__ARGUMENT_HPP_
#define ARITHMETIC__ARGUMENT_HPP_
</span>
<span class="c1">// ì‹œê°„ì„ ë‹¤ë£¨ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
<span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span>
<span class="c1">// ë™ì  ë©”ëª¨ë¦¬ë¥¼ ë‹¤ë£¨ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
<span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span>
<span class="c1">// ë¬¸ìì—´ì„ ë‹¤ë£¨ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="c1">// ì„œë¡œë‹¤ë¥¸ ë„ë©”ì¸ì„ ë‹¤ë£¨ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
<span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span>
<span class="c1">// rclcpp APIë¥¼ ë‹´ê³  ìˆëŠ” rclcpp í—¤ë”íŒŒì¼</span>
<span class="cp">#include</span> <span class="cpf">"rclcpp/rclcpp.hpp"</span><span class="cp">
</span>
<span class="c1">// ë§Œë“  ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‹´ê³  ìˆëŠ” í—¤ë”íŒŒì¼</span>
<span class="cp">#include</span> <span class="cpf">"msg_srv_action_interface_example/msg/arithmetic_argument.hpp"</span><span class="cp">
</span>
<span class="c1">// rclcppì˜ Node í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” Argument í´ë˜ìŠ¤</span>
<span class="k">class</span> <span class="nc">Argument</span> <span class="o">:</span> <span class="k">public</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span>
<span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">using</span> <span class="n">ArithmeticArgument</span> <span class="o">=</span> <span class="n">msg_srv_action_interface_example</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ArithmeticArgument</span><span class="p">;</span>

  <span class="c1">// Argument í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ” rclcppì˜ NodeOptionsë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤. NodeOptionsì—ëŠ” context, arguments, intra process communication, parameter, allocatorì™€ ê°™ì€ Node ìƒì„±ì„ ìœ„í•œ ë‹¤ì–‘í•œ ì˜µì…˜ì´ ì¡´ì¬</span>
  <span class="k">explicit</span> <span class="n">Argument</span><span class="p">(</span><span class="k">const</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">NodeOptions</span> <span class="o">&amp;</span> <span class="n">node_options</span> <span class="o">=</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">NodeOptions</span><span class="p">());</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">Argument</span><span class="p">();</span>

<span class="nl">private:</span>
  <span class="kt">void</span> <span class="n">publish_random_arithmetic_arguments</span><span class="p">();</span>
  <span class="kt">void</span> <span class="n">update_parameter</span><span class="p">();</span>

  <span class="c1">// í† í”½ ë©”ì‹œì§€ì— ë‹´ì„ ëœë¤ ë³€ìˆ˜ì˜ ë²”ìœ„</span>
  <span class="kt">float</span> <span class="n">min_random_num_</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">max_random_num_</span><span class="p">;</span>

  <span class="c1">// publisherì™€ timerbase ë©¤ë²„ë³€ìˆ˜ê°€ ì„ ì–¸ë˜ì–´ ìˆë‹¤.</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">Publisher</span><span class="o">&lt;</span><span class="n">ArithmeticArgument</span><span class="o">&gt;::</span><span class="n">SharedPtr</span> <span class="n">arithmetic_argument_publisher_</span><span class="p">;</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">TimerBase</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">timer_</span><span class="p">;</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">Subscription</span><span class="o">&lt;</span><span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterEvent</span><span class="o">&gt;::</span><span class="n">SharedPtr</span> <span class="n">parameter_event_sub_</span><span class="p">;</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">AsyncParametersClient</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">parameters_client_</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#endif  // ARITHMETIC__ARGUMENT_HPP_
</span></pre></table></code></div></div><p>Â </p><ul><li>ì†ŒìŠ¤ íŒŒì¼</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
</pre><td class="rouge-code"><pre><span class="c1">// Cì–¸ì–´ í‘œì¤€ ì¸í’‹ ì•„ì›ƒí’‹ ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
<span class="cp">#include</span> <span class="cpf">&lt;cstdio&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span>
<span class="c1">// ëœë¤ ìˆ«ì ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
<span class="cp">#include</span> <span class="cpf">&lt;random&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">"rclcpp/rclcpp.hpp"</span><span class="cp">
</span>
<span class="c1">/// í”„ë¡œê·¸ë¨ ì‹¤í–‰ì‹œ ë„˜ê²¨ë°›ì€ ì¸ìë¥¼ ë‹¤ë£¨ëŠ” ROS2 ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
<span class="cp">#include</span> <span class="cpf">"rcutils/cmdline_parser.h"</span><span class="cp">
</span>
<span class="c1">// ìœ„ì—ì„œ ìƒì„±í•œ argument í—¤ë” íŒŒì¼</span>
<span class="cp">#include</span> <span class="cpf">"arithmetic/argument.hpp"</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono_literals</span><span class="p">;</span>

<span class="c1">// Argument í´ë˜ìŠ¤, ë¶€ëª¨ í´ë˜ìŠ¤ì¸ rclcpp:Nodeë¥¼ ì„ ì–¸í•´ì£¼ì—ˆëŠ”ë°, ì²«ë²ˆì§¸ ì¸ìì—ëŠ” ë…¸ë“œ ì´ë¦„ì„, ë‘ë²ˆì§¸ ì¸ìì—ëŠ” ë…¸ë“œ ì˜µì…˜ ë³€ìˆ˜ë¥¼ ëª…ì‹œí•œë‹¤.</span>
<span class="n">Argument</span><span class="o">::</span><span class="n">Argument</span><span class="p">(</span><span class="k">const</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">NodeOptions</span> <span class="o">&amp;</span> <span class="n">node_options</span><span class="p">)</span>
<span class="o">:</span> <span class="n">Node</span><span class="p">(</span><span class="s">"argument"</span><span class="p">,</span> <span class="n">node_options</span><span class="p">),</span>
  <span class="n">min_random_num_</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span>
  <span class="n">max_random_num_</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// QoSëŠ” QoS ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ depthë¥¼ 10ìœ¼ë¡œ í•œë‹¤. </span>
  <span class="k">this</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="s">"qos_depth"</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
  <span class="kt">int8_t</span> <span class="n">qos_depth</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">get_parameter</span><span class="p">(</span><span class="s">"qos_depth"</span><span class="p">).</span><span class="n">get_value</span><span class="o">&lt;</span><span class="kt">int8_t</span><span class="o">&gt;</span><span class="p">();</span>

  <span class="c1">// ëœë¤ê°’ ì¤‘ ìµœì†Œê°’ë¡œ 0ì„¤ì •</span>
  <span class="k">this</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="s">"min_random_num"</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
  <span class="n">min_random_num_</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">get_parameter</span><span class="p">(</span><span class="s">"min_random_num"</span><span class="p">).</span><span class="n">get_value</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">();</span>

  <span class="c1">// ëœë¤ê°’ ì¤‘ ìµœëŒ€ê°’ë¡œ 9ì„¤ì •</span>
  <span class="k">this</span><span class="o">-&gt;</span><span class="n">declare_parameter</span><span class="p">(</span><span class="s">"max_random_num"</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">);</span>
  <span class="n">max_random_num_</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">get_parameter</span><span class="p">(</span><span class="s">"max_random_num"</span><span class="p">).</span><span class="n">get_value</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">();</span>

  <span class="k">this</span><span class="o">-&gt;</span><span class="n">update_parameter</span><span class="p">();</span>

  <span class="cm">/*
  - History ì˜µì…˜: KeepLast(depth : 10)
  - Reliability ì˜µì…˜: reliable
  - Durability ì˜µì…˜: volatile
  */</span>
  <span class="k">const</span> <span class="k">auto</span> <span class="n">QOS_RKL10V</span> <span class="o">=</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">QoS</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">KeepLast</span><span class="p">(</span><span class="n">qos_depth</span><span class="p">)).</span><span class="n">reliable</span><span class="p">().</span><span class="n">durability_volatile</span><span class="p">();</span>

  <span class="c1">// QoSëŠ” publisherë¥¼ ì´ˆê¸°í™”í•  ë•Œ ë‘ë²ˆì§¸ ì¸ìë¡œ ë“¤ì–´ê°€ê³ , ì²«ë²ˆì§¸ ì¸ìëŠ” ë©”ì‹œì§€ í†µì‹ ì— ì‚¬ìš©ë  í† í”½ëª…</span>
  <span class="n">arithmetic_argument_publisher_</span> <span class="o">=</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">create_publisher</span><span class="o">&lt;</span><span class="n">ArithmeticArgument</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"arithmetic_argument"</span><span class="p">,</span> <span class="n">QOS_RKL10V</span><span class="p">);</span>

  <span class="c1">// 1ì´ˆë‹¹ 1ë²ˆì”© publisher_random_arithmetic_arguments ë©¤ë²„í•¨ìˆ˜ê°€ í˜¸ì¶œí•˜ë„ë¡ ì„¤ì •</span>
  <span class="n">timer_</span> <span class="o">=</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">create_wall_timer</span><span class="p">(</span><span class="mx">1s</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Argument</span><span class="o">::</span><span class="n">publish_random_arithmetic_arguments</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">Argument</span><span class="o">::~</span><span class="n">Argument</span><span class="p">()</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="c1">// timerì— ì˜í•´ 1ì´ˆë‹¹ 1ë²ˆì”© í˜¸ì¶œ</span>
<span class="kt">void</span> <span class="n">Argument</span><span class="o">::</span><span class="n">publish_random_arithmetic_arguments</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">random_device</span> <span class="n">rd</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">mt19937</span> <span class="n">gen</span><span class="p">(</span><span class="n">rd</span><span class="p">());</span>

  <span class="c1">// ROS2 íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ì–»ì€ ìˆ«ìê°€ min(0) ê³¼ max(9) ì‚¬ì´ì˜ ëœë¤í•œ ê°’ìœ¼ë¡œ ìˆ«ìë¥¼ ìƒì„±</span>
  <span class="n">std</span><span class="o">::</span><span class="n">uniform_real_distribution</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">distribution</span><span class="p">(</span><span class="n">min_random_num_</span><span class="p">,</span> <span class="n">max_random_num_</span><span class="p">);</span>

  <span class="c1">// msg_srv_action_interface_example íŒ¨í‚¤ì§€ì— ìˆëŠ” msg ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì–¸</span>
  <span class="n">msg_srv_action_interface_example</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ArithmeticArgument</span> <span class="n">msg</span><span class="p">;</span>

  <span class="c1">// time-stamp</span>
  <span class="n">msg</span><span class="p">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">now</span><span class="p">();</span>

  <span class="c1">// argument a</span>
  <span class="n">msg</span><span class="p">.</span><span class="n">argument_a</span> <span class="o">=</span> <span class="n">distribution</span><span class="p">(</span><span class="n">gen</span><span class="p">);</span>

  <span class="c1">// argument b</span>
  <span class="n">msg</span><span class="p">.</span><span class="n">argument_b</span> <span class="o">=</span> <span class="n">distribution</span><span class="p">(</span><span class="n">gen</span><span class="p">);</span>

  <span class="c1">// í† í”½ ë°œí–‰</span>
  <span class="n">arithmetic_argument_publisher_</span><span class="o">-&gt;</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>

  <span class="c1">// logging</span>
  <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span> <span class="s">"Published argument_a %.2f"</span><span class="p">,</span> <span class="n">msg</span><span class="p">.</span><span class="n">argument_a</span><span class="p">);</span>
  <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span> <span class="s">"Published argument_b %.2f"</span><span class="p">,</span> <span class="n">msg</span><span class="p">.</span><span class="n">argument_b</span><span class="p">);</span>
<span class="p">}</span>


<span class="kt">void</span> <span class="n">Argument</span><span class="o">::</span><span class="n">update_parameter</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">parameters_client_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">AsyncParametersClient</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">parameters_client_</span><span class="o">-&gt;</span><span class="n">wait_for_service</span><span class="p">(</span><span class="mx">1s</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ok</span><span class="p">())</span> <span class="p">{</span>
      <span class="n">RCLCPP_ERROR</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span> <span class="s">"Interrupted while waiting for the service. Exiting."</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span> <span class="s">"service not available, waiting again..."</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">auto</span> <span class="n">param_event_callback</span> <span class="o">=</span>
    <span class="p">[</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterEvent</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">void</span>
    <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="n">changed_parameter</span> <span class="o">:</span> <span class="n">event</span><span class="o">-&gt;</span><span class="n">changed_parameters</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">changed_parameter</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">"min_random_num"</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">auto</span> <span class="n">value</span> <span class="o">=</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">::</span><span class="n">from_parameter_msg</span><span class="p">(</span><span class="n">changed_parameter</span><span class="p">).</span><span class="n">as_double</span><span class="p">();</span>
          <span class="n">min_random_num_</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">changed_parameter</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">"max_random_num"</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">auto</span> <span class="n">value</span> <span class="o">=</span> <span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">::</span><span class="n">from_parameter_msg</span><span class="p">(</span><span class="n">changed_parameter</span><span class="p">).</span><span class="n">as_double</span><span class="p">();</span>
          <span class="n">max_random_num_</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>

  <span class="n">parameter_event_sub_</span> <span class="o">=</span> <span class="n">parameters_client_</span><span class="o">-&gt;</span><span class="n">on_parameter_event</span><span class="p">(</span><span class="n">param_event_callback</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// help</span>
<span class="kt">void</span> <span class="nf">print_help</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"For argument node:</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"node_name [-h]</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"Options:</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">-h Help           : Print this help function.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
  <span class="c1">// cmdline_parser ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬, ë§Œì•½ ëª…ë ¹ ì¸ìì— -h ê°€ ìˆì„ ê²½ìš° print_help í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì¢…ë£Œ</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">rcutils_cli_option_exist</span><span class="p">(</span><span class="n">argv</span><span class="p">,</span> <span class="n">argv</span> <span class="o">+</span> <span class="n">argc</span><span class="p">,</span> <span class="s">"-h"</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">print_help</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// ì´ˆê¸°í™”</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  
  <span class="c1">// Argument í´ë˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”</span>
  <span class="k">auto</span> <span class="n">argument</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">Argument</span><span class="o">&gt;</span><span class="p">();</span>
  
  <span class="c1">// publish_random_arithmetic_arguments ì‹¤í–‰</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">spin</span><span class="p">(</span><span class="n">argument</span><span class="p">);</span>
  
  <span class="c1">// ctrl+cì™€ ê°™ì€ ì‹œê·¸ë„ì„ í†µí•´ ë…¸ë“œ ì¢…ë£Œë¥¼ ì¢…ë£Œ</span>
  <span class="n">rclcpp</span><span class="o">::</span><span class="n">shutdown</span><span class="p">();</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>íŒŒë¼ë¯¸í„°ì™€ ê´€ë ¨ëœ ë¶€ë¶„ì€ ì¶”í›„ ë‹¤ë£¨ë„ë¡ í•œë‹¤.</p><p>Â </p><h4 id="ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„">ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ <a href="#ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ ë…¸ë“œëŠ” calculator ë…¸ë“œì´ë‹¤. calculatorì˜ ì†ŒìŠ¤ ì½”ë“œëŠ” í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„, ì„œë¹„ìŠ¤ ì„œë²„, ì•¡ì…˜ ì„œë²„ë¥¼ ëª¨ë‘ í¬í•¨í•˜ê³  ìˆì–´ì„œ ë§¤ìš° ê¸¸ì–´ì„œ í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ì™€ ê´€ë ¨ëœ ë¶€ë¶„ë§Œ ì‚´í´ë³´ë„ë¡ í•œë‹¤.</p><p>calculator í´ë˜ìŠ¤ëŠ” í† í”½ í¼ë¸”ë¦¬ì…” ë…¸ë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ rclcpp::nodeë¥¼ ìƒì†í•˜ê³ , ìƒì„±ìì—ì„œ calculatorë¼ëŠ” ë…¸ë“œ ì´ë¦„ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤. ê·¸ë¦¬ê³  ìœ„ì—ì„œì™€ ë™ì¼í•˜ê²Œ QoSë¥¼ ìƒì„±í•œë‹¤.</p><p>ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ëŠ” <code class="language-plaintext highlighter-rouge">create_subscription</code>ì„ í†µí•´ ì´ˆê¸°í™”ë˜ê³ , í•´ë‹¹ í•¨ìˆ˜ëŠ” í† í”½ëª…ê³¼ QoS, ì½œë°±í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤. ì²«ë²ˆì§¸, ë‘ë²ˆì§¸ ì¸ìëŠ” Argument í´ë˜ìŠ¤ì™€ ë™ì¼í•˜ê²Œ ë„£ê³ , ì½œë°±í•¨ìˆ˜ëŠ” std::bindê°€ ì•„ë‹Œ <strong>ëŒë‹¤ í‘œí˜„ì‹</strong>ì„ ì‚¬ìš©í–ˆë‹¤. ì½œë°±í•¨ìˆ˜ë¥¼ ë³´ë©´ ì¸ìë¥¼ í†µí•´ ìˆ˜ì‹ ë°›ì€ ë©”ì‹œì§€ì— ì ‘ê·¼í•˜ì—¬ ë©¤ë²„ ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.</p><p>Â </p><ol><li>Node ì„¤ì •<li>QoS ì„¤ì •<li>create_subscription ì„¤ì •<li>ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ í•¨ìˆ˜ ì‘ì„±</ol><p>Â </p><ul><li>ì†ŒìŠ¤íŒŒì¼</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>  <span class="c1">// QoS ì„¤ì • - history : KeepLast, Reliability : reliable, Durability : volatile</span>
  <span class="k">const</span> <span class="k">auto</span> <span class="n">QOS_RKL10V</span> <span class="o">=</span>
    <span class="n">rclcpp</span><span class="o">::</span><span class="n">QoS</span><span class="p">(</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">KeepLast</span><span class="p">(</span><span class="n">qos_depth</span><span class="p">)).</span><span class="n">reliable</span><span class="p">().</span><span class="n">durability_volatile</span><span class="p">();</span>
  
  <span class="c1">// ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ ì´ˆê¸°í™”, [í† í”½ëª…, QoS]</span>
  <span class="n">arithmetic_argument_subscriber_</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">create_subscription</span><span class="o">&lt;</span><span class="n">ArithmeticArgument</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="s">"arithmetic_argument"</span><span class="p">,</span>
    <span class="n">QOS_RKL10V</span><span class="p">,</span>
    <span class="p">[</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">ArithmeticArgument</span><span class="o">::</span><span class="n">SharedPtr</span> <span class="n">msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">void</span>
    <span class="p">{</span>
      <span class="n">argument_a_</span> <span class="o">=</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">argument_a</span><span class="p">;</span>
      <span class="n">argument_b_</span> <span class="o">=</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">argument_b</span><span class="p">;</span>
      
      <span class="c1">// logging - timestamp</span>
      <span class="n">RCLCPP_INFO</span><span class="p">(</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span>
        <span class="s">"Subscribed at: sec %ld nanosec %ld"</span><span class="p">,</span>
        <span class="n">msg</span><span class="o">-&gt;</span><span class="n">stamp</span><span class="p">.</span><span class="n">sec</span><span class="p">,</span>
        <span class="n">msg</span><span class="o">-&gt;</span><span class="n">stamp</span><span class="p">.</span><span class="n">nanosec</span><span class="p">);</span>
      
      <span class="c1">// logging - argument a, argument b</span>
      <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span> <span class="s">"Subscribed argument a : %.2f"</span><span class="p">,</span> <span class="n">argument_a_</span><span class="p">);</span>
      <span class="n">RCLCPP_INFO</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_logger</span><span class="p">(),</span> <span class="s">"Subscribed argument b : %.2f"</span><span class="p">,</span> <span class="n">argument_b_</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">);</span>
</pre></table></code></div></div><p>Â </p><p>Â </p><h4 id="ì‹¤í–‰">ì‹¤í–‰ <a href="#ì‹¤í–‰" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>ì‹¤í–‰í•˜ê¸° ì „ì— CMakeLists.txtë¥¼ í™•ì¸í•´ì„œ add_executable íƒœê·¸ì— ì•Œë§ê²Œ ë“¤ì–´ê°€ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p><pre><code class="language-txt">add_executable(argument src/arithmetic/argument.cpp)
add_executable(calculator src/calculator/main.cpp src/calculator/calculator.cpp)
</code></pre><p>ì²«ë²ˆì§¸ ì¸ìëŠ” ì‹¤í–‰ëª…, ê·¸ ë‹¤ìŒ ì¸ìë¶€í„°ëŠ” ì‹¤í–‰í•  ì†ŒìŠ¤íŒŒì¼ì´ë‹¤.</p><p>Â </p><p>ì‹¤í–‰ì€ <code class="language-plaintext highlighter-rouge">run</code>ê³¼ <code class="language-plaintext highlighter-rouge">launch</code> ë‘ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example calculator
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclcpp_example argument
</pre></table></code></div></div><p>Â </p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 launch topic_service_action_rclcpp_example arithmetic.launch.py
</pre></table></code></div></div><p>Â </p><p>ë‘ ë°©ë²• ëª¨ë‘ ë™ì‘í•˜ëŠ” ê²ƒì€ ë™ì¼í•˜ë‹¤.</p><p>Â </p><p>Â </p><p>Â </p><h2 id="ros2-python-íŒ¨í‚¤ì§€-ì œì‘">ROS2 python íŒ¨í‚¤ì§€ ì œì‘ <a href="#ros2-python-íŒ¨í‚¤ì§€-ì œì‘" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><a href="https://cafe.naver.com/openrt/24637">028 ROS2 íŒ¨í‚¤ì§€ ì„¤ê³„ (python)</a><li><a href="https://cafe.naver.com/openrt/24644">029 í† í”½ í”„ë¡œê·¸ë˜ë° (python)</a></ul><h3 id="ros2-íŒ¨í‚¤ì§€-ì„¤ì •-1">ROS2 íŒ¨í‚¤ì§€ ì„¤ì • <a href="#ros2-íŒ¨í‚¤ì§€-ì„¤ì •-1" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>package.xml (íŒ¨í‚¤ì§€ ì„¤ì • íŒŒì¼)</ul><p>topic_service_action_rclpy_example íŒ¨í‚¤ì§€ì˜ ì„¤ì • íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?&gt;</span>
<span class="nt">&lt;package</span> <span class="na">format=</span><span class="s">"3"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;name&gt;</span>topic_service_action_rclpy_example<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.2.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;description&gt;</span>ROS 2 rclpy example package for the topic, service, action<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;maintainer</span> <span class="na">email=</span><span class="s">"jhyoon@gmail.com"</span><span class="nt">&gt;</span>Pyo<span class="nt">&lt;/maintainer&gt;</span>
  <span class="nt">&lt;license&gt;</span>Apache License 2.0<span class="nt">&lt;/license&gt;</span>
  <span class="nt">&lt;author</span> <span class="na">email=</span><span class="s">"passionvirus@gmail.com"</span><span class="nt">&gt;</span>Pyo<span class="nt">&lt;/author&gt;</span>
  <span class="nt">&lt;author</span> <span class="na">email=</span><span class="s">"routiful@gmail.com"</span><span class="nt">&gt;</span>Darby Lim<span class="nt">&lt;/author&gt;</span>

  <span class="c">&lt;!-- ros2ì—ì„œ ì‚¬ìš©ë˜ëŠ” pythoníˆ´ --&gt;</span>
  <span class="nt">&lt;depend&gt;</span>rclpy<span class="nt">&lt;/depend&gt;</span>
  <span class="nt">&lt;depend&gt;</span>std_msgs<span class="nt">&lt;/depend&gt;</span>
  <span class="c">&lt;!-- í† í”½, ì„œë¹„ìŠ¤, ì•¡ì…˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ --&gt;</span>
  <span class="nt">&lt;depend&gt;</span>msg_srv_action_interface_example<span class="nt">&lt;/depend&gt;</span>

  <span class="nt">&lt;test_depend&gt;</span>ament_copyright<span class="nt">&lt;/test_depend&gt;</span>

  <span class="c">&lt;!-- pythonê³¼ ì—°ë™ì‹œí‚¤ê¸° ê°„í¸í•œ flakeë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ test íˆ´ --&gt;</span>
  <span class="nt">&lt;test_depend&gt;</span>ament_flake8<span class="nt">&lt;/test_depend&gt;</span>
  <span class="nt">&lt;test_depend&gt;</span>ament_pep257<span class="nt">&lt;/test_depend&gt;</span>

  <span class="c">&lt;!-- pythonì— ì‚¬ìš©ë  testíˆ´ --&gt;</span>
  <span class="nt">&lt;test_depend&gt;</span>python3-pytest<span class="nt">&lt;/test_depend&gt;</span>
  <span class="nt">&lt;export&gt;</span>
    <span class="nt">&lt;build_type&gt;</span>ament_python<span class="nt">&lt;/build_type&gt;</span>
  <span class="nt">&lt;/export&gt;</span>
<span class="nt">&lt;/package&gt;</span>
</pre></table></code></div></div><p>Â </p><ul><li>setup.py (íŒŒì´ì¬ íŒ¨í‚¤ì§€ ì„¤ì • íŒŒì¼)</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="c1">#!/usr/bin/env python3
</span>
<span class="kn">import</span> <span class="n">glob</span>
<span class="kn">import</span> <span class="n">os</span>

<span class="kn">from</span> <span class="n">setuptools</span> <span class="kn">import</span> <span class="n">find_packages</span>
<span class="kn">from</span> <span class="n">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">package_name</span> <span class="o">=</span> <span class="s">'topic_service_action_rclpy_example'</span>
<span class="n">share_dir</span> <span class="o">=</span> <span class="s">'share/'</span> <span class="o">+</span> <span class="n">package_name</span>

<span class="nf">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s">'0.2.0'</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="nf">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s">'test'</span><span class="p">]),</span>
    <span class="n">data_files</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s">'share/ament_index/resource_index/packages'</span><span class="p">,</span> <span class="p">[</span><span class="s">'resource/'</span> <span class="o">+</span> <span class="n">package_name</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">share_dir</span><span class="p">,</span> <span class="p">[</span><span class="s">'package.xml'</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">share_dir</span> <span class="o">+</span> <span class="s">'/launch'</span><span class="p">,</span> <span class="n">glob</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s">'launch'</span><span class="p">,</span> <span class="s">'*.launch.py'</span><span class="p">))),</span>
        <span class="p">(</span><span class="n">share_dir</span> <span class="o">+</span> <span class="s">'/param'</span><span class="p">,</span> <span class="n">glob</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s">'param'</span><span class="p">,</span> <span class="s">'*.yaml'</span><span class="p">))),</span>
    <span class="p">],</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s">'setuptools'</span><span class="p">],</span>
    <span class="n">zip_safe</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s">'Pyo, Darby Lim'</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s">'passionvirus@gmail.com, routiful@gmail.com'</span><span class="p">,</span>
    <span class="n">maintainer</span><span class="o">=</span><span class="s">'Pyo'</span><span class="p">,</span>
    <span class="n">maintainer_email</span><span class="o">=</span><span class="s">'passionvirus@gmail.com'</span><span class="p">,</span>
    <span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="s">'ROS'</span><span class="p">],</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s">'Intended Audience :: Developers'</span><span class="p">,</span>
        <span class="s">'License :: OSI Approved :: Apache Software License'</span><span class="p">,</span>
        <span class="s">'Programming Language :: Python'</span><span class="p">,</span>
        <span class="s">'Topic :: Software Development'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">description</span><span class="o">=</span><span class="s">'ROS 2 rclpy example package for the topic, service, action'</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="s">'Apache License, Version 2.0'</span><span class="p">,</span>
    <span class="n">tests_require</span><span class="o">=</span><span class="p">[</span><span class="s">'pytest'</span><span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s">'console_scripts'</span><span class="p">:</span> <span class="p">[</span>
            <span class="s">'argument = topic_service_action_rclpy_example.arithmetic.argument:main'</span><span class="p">,</span>
            <span class="s">'operator = topic_service_action_rclpy_example.arithmetic.operator:main'</span><span class="p">,</span>
            <span class="s">'calculator = topic_service_action_rclpy_example.calculator.main:main'</span><span class="p">,</span>
            <span class="s">'checker = topic_service_action_rclpy_example.checker.main:main'</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></table></code></div></div><p>ì‚´í´ë³¼ ë¶€ë¶„ì€ <strong>data_files</strong>ì™€ <strong>entry_points</strong> ì´ë‹¤.</p><p>data_files</p><ul><li>ì´ íŒ¨í‚¤ì§€ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŒŒì¼ë“¤ì„ ê¸°ì…í•˜ì—¬ í•¨ê»˜ ë°°í¬í•œë‹¤. ì£¼ë¡œ resource í´ë” ë‚´ì— ìˆëŠ” ament_indexë¥¼ ìœ„í•œ íŒ¨í‚¤ì§€ì˜ ì´ë¦„ì˜ ë¹ˆ íŒŒì¼ì´ë‚˜, package.xml, .launch.py, .yaml ë“±ì„ ê¸°ì…í•œë‹¤. ì´ë¥¼ í†µí•´ ë¹Œë“œ í›„ í•´ë‹¹ íŒŒì¼ë“¤ì´ ì„¤ì¹˜ í´ë”ì— ì¶”ê°€ëœë‹¤.<li>ì´ íŒ¨í‚¤ì§€ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">arithmetic.launch.py</code> ëŸ°ì¹˜ íŒŒì¼ê³¼ <code class="language-plaintext highlighter-rouge">arithmetic_config.yaml</code> íŒŒë¼ë¯¸í„° íŒŒì¼ì´ ì‚¬ìš©ë˜ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ í•´ë‹¹ íŒŒì¼ë“¤ì˜ ì„¤ì •ì„ ì¶”ê°€í•œë‹¤.</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">data_files</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s">'share/ament_index/resource_index/packages'</span><span class="p">,</span> <span class="p">[</span><span class="s">'resource/'</span> <span class="o">+</span> <span class="n">package_name</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">share_dir</span><span class="p">,</span> <span class="p">[</span><span class="s">'package.xml'</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">share_dir</span> <span class="o">+</span> <span class="s">'/launch'</span><span class="p">,</span> <span class="n">glob</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s">'launch'</span><span class="p">,</span> <span class="s">'*.launch.py'</span><span class="p">))),</span>
        <span class="p">(</span><span class="n">share_dir</span> <span class="o">+</span> <span class="s">'/param'</span><span class="p">,</span> <span class="n">glob</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s">'param'</span><span class="p">,</span> <span class="s">'*.yaml'</span><span class="p">))),</span>
    <span class="p">],</span>
</pre></table></code></div></div><p>Â </p><p>entry_points</p><ul><li>entry_pointsëŠ” ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•  ì‹¤í–‰ ê°€ëŠ¥í•œ ì½˜ì†” ìŠ¤í¬ë¦½íŠ¸ ì´ë¦„ê³¼ í˜¸ì¶œ í•¨ìˆ˜ë¥¼ ê¸°ì…í•œë‹¤.<li><code class="language-plaintext highlighter-rouge">ros2 run</code>ê³¼ ê°™ì€ ë…¸ë“œ ì‹¤í–‰ ëª…ë ¹ì–´ë¥¼ í†µí•´ ê° ë…¸ë“œë¥¼ ì‹¤í–‰í•  ê²ƒì´ë¯€ë¡œ <strong>entry_points</strong>ì— ì¶”ê°€í•œë‹¤.</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s">'console_scripts'</span><span class="p">:</span> <span class="p">[</span>
            <span class="s">'argument = topic_service_action_rclpy_example.arithmetic.argument:main'</span><span class="p">,</span>
            <span class="s">'operator = topic_service_action_rclpy_example.arithmetic.operator:main'</span><span class="p">,</span>
            <span class="s">'calculator = topic_service_action_rclpy_example.calculator.main:main'</span><span class="p">,</span>
            <span class="s">'checker = topic_service_action_rclpy_example.checker.main:main'</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
</pre></table></code></div></div><p>Â </p><p>Â </p><h3 id="ì½”ë“œ-ë‹¤ìš´ë¡œë“œ-ë°-ë¹Œë“œ-1">ì½”ë“œ ë‹¤ìš´ë¡œë“œ ë° ë¹Œë“œ <a href="#ì½”ë“œ-ë‹¤ìš´ë¡œë“œ-ë°-ë¹Œë“œ-1" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>ìœ„ì˜ git í´ë¡ ì„ í•˜ê²Œ ë˜ë©´, rclcpp ë¿ë§Œ ì•„ë‹ˆë¼ rclpy íŒ¨í‚¤ì§€ë„ í•¨ê»˜ ë“¤ì–´ìˆë‹¤.</p><p><code class="language-plaintext highlighter-rouge">~/robot_ws/install/topic_service_action_rclpy_example</code> í´ë”ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>~/robot_ws/install<span class="nv">$ </span><span class="nb">ls
</span>COLCON_IGNORE             logging_rclpy_example             rqt_example          tf2_rclpy_example
local_setup.bash          msg_srv_action_interface_example  setup.bash           time_rclcpp_example
local_setup.ps1           my_first_ros_rclcpp_pkg           setup.ps1            time_rclpy_example
local_setup.sh            my_first_ros_rclpy_pkg            setup.sh             topic_service_action_rclcpp_example
_local_setup_util_ps1.py  rclcpp_tutorial                   setup.zsh            topic_service_action_rclpy_example
_local_setup_util_sh.py   rclpy_tutorial                    testbot_description
local_setup.zsh           ros2env                           tf2_rclcpp_example
</pre></table></code></div></div><p>Â </p><h3 id="ê°„ë‹¨í•œ-ë…¸ë“œ-ì‹¤í–‰-1">ê°„ë‹¨í•œ ë…¸ë“œ ì‹¤í–‰ <a href="#ê°„ë‹¨í•œ-ë…¸ë“œ-ì‹¤í–‰-1" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>calculator ë…¸ë“œ ì‹¤í–‰</ul><p>ì•„ì§ ì£¼ê³  ë°›ëŠ” í† í”½, ì„œë¹„ìŠ¤, ì•¡ì…˜ì´ ì—†ìœ¼ë‹ˆ ëŒ€ê¸° ìƒíƒœì´ë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclpy_example calculator
</pre></table></code></div></div><p>Â </p><ul><li>argument ë…¸ë“œ ì‹¤í–‰</ul><p>í† í”½ í¼ë¸”ë¦¬ì…” ì—­í• ì„ í•˜ëŠ” ë…¸ë“œì´ë‹¤. ì‹¤í–‰í•˜ê³  ë‚˜ë©´ í¼ë¸”ë¦¬ì‹œí•˜ê³  ìˆëŠ” argument a, argument bê°€ í‘œì‹œëœë‹¤. ê·¸ë¦¬ê³ , calculator ë…¸ë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ í„°ë¯¸ë„ì—ì„œë„ í† í”½ì„ ìˆ˜ì‹ ë°›ì€ ì‹œê°„ì— ëŒ€í•œ ì •ë³´ì™€ argument a, argument bê°€ í‘œì‹œëœë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclpy_example argument
<span class="o">[</span>INFO]: Published argument a: 4.0
<span class="o">[</span>INFO]: Published argument b: 5.0
<span class="o">[</span>INFO]: Published argument a: 1.0
<span class="o">[</span>INFO]: Published argument b: 9.0
<span class="o">[</span>INFO]: Published argument a: 0.0
...
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclpy_example calculator
<span class="o">[</span>INFO]: Timestamp of the message: builtin_interfaces.msg.Time<span class="o">(</span><span class="nv">sec</span><span class="o">=</span>1659430104, <span class="nv">nanosec</span><span class="o">=</span>525228141<span class="o">)</span>
<span class="o">[</span>INFO]: Subscribed argument a: 4.0
<span class="o">[</span>INFO]: Subscribed argument b: 5.0
<span class="o">[</span>INFO]: Timestamp of the message: builtin_interfaces.msg.Time<span class="o">(</span><span class="nv">sec</span><span class="o">=</span>1659430105, <span class="nv">nanosec</span><span class="o">=</span>525153321<span class="o">)</span>
<span class="o">[</span>INFO]: Subscribed argument a: 1.0
<span class="o">[</span>INFO]: Subscribed argument b: 9.0
<span class="o">[</span>INFO]: Timestamp of the message: builtin_interfaces.msg.Time<span class="o">(</span><span class="nv">sec</span><span class="o">=</span>1659430106, <span class="nv">nanosec</span><span class="o">=</span>525057834<span class="o">)</span>
<span class="o">[</span>INFO]: Subscribed argument a: 0.0
<span class="o">[</span>INFO]: Subscribed argument b: 1.0
...
</pre></table></code></div></div><p>Â </p><ul><li>operator ë…¸ë“œ ì‹¤í–‰</ul><p>ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ ì—­í• ì„ í•˜ëŠ” ë…¸ë“œë¥¼ ì‹¤í–‰í•´ë³´ì. ê·¸ëŸ¬ë©´ calculator ë…¸ë“œì—ê²Œ ëœë¤ìœ¼ë¡œ ì„ íƒí•œ ì—°ì‚°ìë¥¼ ì„œë¹„ìŠ¤ ìš”ì²­ê°’ìœ¼ë¡œ ë³´ë‚´ê³ , ì—°ì‚°ëœ ê²°ê³¼ê°’ì„ ë°˜í™˜ë°›ì•„ í„°ë¯¸ë„ì— í‘œì‹œí•œë‹¤. ì‹¤ì œ ê³„ì‚°ì‹ì€ calculator ë…¸ë“œê°€ ì‹¤í–‰ ì¤‘ì¸ ì°½ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclpy_example operator
<span class="o">[</span>INFO]: Result: 3.0
Press Enter <span class="k">for </span>next service call.
<span class="o">[</span>INFO]: Result: 14.0
Press Enter <span class="k">for </span>next service call.
<span class="o">[</span>INFO]: Result: 0.6666666865348816
Press Enter <span class="k">for </span>next service call.
...
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclpy_example calculator
<span class="o">[</span>INFO]: Timestamp of the message: builtin_interfaces.msg.Time<span class="o">(</span><span class="nv">sec</span><span class="o">=</span>1659430234, <span class="nv">nanosec</span><span class="o">=</span>525041106<span class="o">)</span>
<span class="o">[</span>INFO]: Subscribed argument a: 6.0
<span class="o">[</span>INFO]: Subscribed argument b: 2.0
<span class="o">[</span>INFO]: 6.0 / 2.0 <span class="o">=</span> 3.0
<span class="o">[</span>INFO]: Timestamp of the message: builtin_interfaces.msg.Time<span class="o">(</span><span class="nv">sec</span><span class="o">=</span>1659430238, <span class="nv">nanosec</span><span class="o">=</span>525190661<span class="o">)</span>
<span class="o">[</span>INFO]: Subscribed argument a: 2.0
<span class="o">[</span>INFO]: Subscribed argument b: 7.0
<span class="o">[</span>INFO]: 2.0 <span class="k">*</span> 7.0 <span class="o">=</span> 14.0
<span class="o">[</span>INFO]: Timestamp of the message: builtin_interfaces.msg.Time<span class="o">(</span><span class="nv">sec</span><span class="o">=</span>1659430240, <span class="nv">nanosec</span><span class="o">=</span>525128381<span class="o">)</span>
<span class="o">[</span>INFO]: Subscribed argument a: 2.0
<span class="o">[</span>INFO]: Subscribed argument b: 3.0
<span class="o">[</span>INFO]: 2.0 / 3.0 <span class="o">=</span> 0.6666666666666666
</pre></table></code></div></div><p>Â </p><ul><li>checker ë…¸ë“œ ì‹¤í–‰</ul><p>ë§ˆì§€ë§‰ìœ¼ë¡œ checker ë…¸ë“œëŠ” ì—°ì‚°ê°’ì˜ í•©ê³„ì˜ í•œê³„ì¹˜ë¥¼ ì•¡ì…˜ ëª©í‘œê°’ìœ¼ë¡œ ì „ë‹¬í•˜ê³ , calculator ë…¸ë“œëŠ” ì´ë¥¼ ë°›ì€ í›„ë¶€í„°ì˜ ì—°ì‚°ê°’ì„ í•©í•˜ì—¬ ì•¡ì…˜ í”¼ë“œë°±ìœ¼ë¡œ ê° ì—°ì‚° ê³„ì‚°ì‹ì„ ë³´ë‚¸ë‹¤. ì§€ì •í•œ ëª©í‘œ í•©ê³„ë¥¼ ë„˜ê¸°ë©´ ì•¡ì…˜ ê²°ê³¼ê°’ìœ¼ë¡œ ìµœì¢… ì—°ì‚° í•©ê³„ë¥¼ ë³´ë‚¸ë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 run topic_service_action_rclpy_example checker
<span class="o">[</span>INFO]: Action goal accepted.
<span class="o">[</span>INFO]: Action feedback: <span class="o">[</span><span class="s1">'9.0 + 8.0 = 17.0'</span><span class="o">]</span>
<span class="o">[</span>INFO]: Action feedback: <span class="o">[</span><span class="s1">'9.0 + 8.0 = 17.0'</span>, <span class="s1">'9.0 + 8.0 = 17.0'</span><span class="o">]</span>
<span class="o">[</span>INFO]: Action feedback: <span class="o">[</span><span class="s1">'9.0 + 8.0 = 17.0'</span>, <span class="s1">'9.0 + 8.0 = 17.0'</span>, <span class="s1">'9.0 + 8.0 = 17.0'</span><span class="o">]</span>
<span class="o">[</span>INFO]: Action succeeded!
<span class="o">[</span>INFO]: Action result<span class="o">(</span>all formula<span class="o">)</span>: <span class="o">[</span><span class="s1">'9.0 + 8.0 = 17.0'</span>, <span class="s1">'9.0 + 8.0 = 17.0'</span>, <span class="s1">'9.0 + 8.0 = 17.0'</span><span class="o">]</span>
<span class="o">[</span>INFO]: Action result<span class="o">(</span>total <span class="nb">sum</span><span class="o">)</span>: 51.0
</pre></table></code></div></div><p>í•©ê³„ í•œê³„ì¹˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 50ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆê³ , ì´ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ checker ë…¸ë“œ ì‹¤í–‰í•  ë•Œ <code class="language-plaintext highlighter-rouge">-g</code> ì¸ìë¥¼ í†µí•´ ì§ì ‘ í• ë‹¹í•  ìˆ˜ ìˆë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ros2 run topic_service_action_rclpy_example checker <span class="nt">-g</span> 100
</pre></table></code></div></div><p>Â </p><ul><li>launch íŒŒì¼ ì‹¤í–‰</ul><p>argument ë…¸ë“œì™€ calculator ë…¸ë“œë¥¼ í•œë²ˆì— ì‹¤í–‰ì‹œí‚¤ê³ ì í•œë‹¤ë©´ launchíŒŒì¼ì„ ì‹¤í–‰í•˜ë©´ ëœë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ros2 launch topic_service_action_rclpy_example arithmetic.launch.py
</pre></table></code></div></div><p>Â </p><p>Â </p><h3 id="ros2-í† í”½-ëœ¯ì–´ë³´ê¸°">ROS2 í† í”½ ëœ¯ì–´ë³´ê¸° <a href="#ros2-í† í”½-ëœ¯ì–´ë³´ê¸°" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>ë™ì¼í•˜ê²Œ í† í”½ì— ëŒ€í•´ ìì„¸í•˜ê²Œ ëœ¯ì–´ë³¼ ê²ƒì´ë‹¤.</p><p>í¼ë¸”ë¦¬ì…”</p><ul><li>topic_service_action_rclpy_example/topic_service/action_rclpy_example/arithmetic/argument.py</ul><p>Â </p><p>ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„</p><ul><li>topic_service_action_rclpy_example/topic_service/action_rclpy_example/calculator/calculator.py</ul><p>Â </p><h4 id="í¼ë¸”ë¦¬ì…”-1">í¼ë¸”ë¦¬ì…” <a href="#í¼ë¸”ë¦¬ì…”-1" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>í† í”½ í¼ë¸”ë¦¬ì…” ì—­í• ì„ í•˜ëŠ” <strong>argument</strong> ë…¸ë“œì´ë‹¤.</p><ol><li>Node ì„¤ì •<li>QoS ì„¤ì •<li>create_publisher ì„¤ì •<li>í¼ë¸”ë¦¬ì‹œ í•¨ìˆ˜ ì‘ì„±</ol><p>Â </p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">random</span>

<span class="kn">from</span> <span class="n">msg_srv_action_interface_example.msg</span> <span class="kn">import</span> <span class="n">ArithmeticArgument</span>
<span class="kn">from</span> <span class="n">rcl_interfaces.msg</span> <span class="kn">import</span> <span class="n">SetParametersResult</span>

<span class="c1"># ros2ì—ì„œ ì‚¬ìš©í•˜ëŠ” python ëª¨ë“ˆ
</span><span class="kn">import</span> <span class="n">rclpy</span>

<span class="c1"># ë…¸ë“œ
</span><span class="kn">from</span> <span class="n">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>

<span class="c1"># íŒŒë¼ë¯¸í„°
</span><span class="kn">from</span> <span class="n">rclpy.parameter</span> <span class="kn">import</span> <span class="n">Parameter</span>

<span class="c1"># QoS íŒ¨í‚¤ì§€
</span><span class="kn">from</span> <span class="n">rclpy.qos</span> <span class="kn">import</span> <span class="n">QoSDurabilityPolicy</span>
<span class="kn">from</span> <span class="n">rclpy.qos</span> <span class="kn">import</span> <span class="n">QoSHistoryPolicy</span>
<span class="kn">from</span> <span class="n">rclpy.qos</span> <span class="kn">import</span> <span class="n">QoSProfile</span>
<span class="kn">from</span> <span class="n">rclpy.qos</span> <span class="kn">import</span> <span class="n">QoSReliabilityPolicy</span>

<span class="c1"># rclpy.node ëª¨ë“ˆì˜ Node í´ë˜ìŠ¤ë¥¼ ìƒì†í•œë‹¤.
</span><span class="k">class</span> <span class="nc">Argument</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="c1"># ìƒì„±ì - argument ë…¸ë“œ ì´ë¦„ìœ¼ë¡œ ì´ˆê¸°í™”
</span>        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="s">'argument'</span><span class="p">)</span>

        <span class="c1"># íŒŒë¼ë¯¸í„° ì„¤ì •
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">declare_parameter</span><span class="p">(</span><span class="s">'qos_depth'</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">qos_depth</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_parameter</span><span class="p">(</span><span class="s">'qos_depth'</span><span class="p">).</span><span class="n">value</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">declare_parameter</span><span class="p">(</span><span class="s">'min_random_num'</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">min_random_num</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_parameter</span><span class="p">(</span><span class="s">'min_random_num'</span><span class="p">).</span><span class="n">value</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">declare_parameter</span><span class="p">(</span><span class="s">'max_random_num'</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">max_random_num</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_parameter</span><span class="p">(</span><span class="s">'max_random_num'</span><span class="p">).</span><span class="n">value</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">add_on_set_parameters_callback</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">update_parameter</span><span class="p">)</span>

        <span class="c1"># QoS ì„¤ì •
</span>        <span class="c1">### RELIABLE : ë°ì´í„° ìˆ˜ì‹ ì— ì§‘ì¤‘, ìœ ì‹¤ ì‹œ ì¬ì „ì†¡ &lt;-&gt; BEST_EFFORT : ë°ì´í„° ì†¡ì‹ ì— ì§‘ì¤‘, ì „ì†¡ ì†ë„ ì¤‘ì‹œ
</span>        <span class="c1">### KEEP_LAST : ì •í•´ì§„ ë©”ì‹œì§€ í ì‚¬ì´ì¦ˆ(depth)ë§Œí¼ ë°ì´í„°ë¥¼ ë³´ê´€ &lt;-&gt; KEEP_ALL : ëª¨ë“  ë°ì´í„°ë¥¼ ë³´ê´€
</span>        <span class="c1">### VOLATILE : ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ ìƒì„±ë˜ê¸° ì „ì˜ ë°ì´í„°ëŠ” ì‚­ì œ &lt;-&gt; TRANSIENT_LOCAL : ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ ìƒì„±ë˜ê¸° ì „ì˜ ë°ì´í„°ë„ ë³´ê´€
</span>        <span class="n">QOS_RKL10V</span> <span class="o">=</span> <span class="nc">QoSProfile</span><span class="p">(</span>
            <span class="n">reliability</span><span class="o">=</span><span class="n">QoSReliabilityPolicy</span><span class="p">.</span><span class="n">RELIABLE</span><span class="p">,</span>
            <span class="n">history</span><span class="o">=</span><span class="n">QoSHistoryPolicy</span><span class="p">.</span><span class="n">KEEP_LAST</span><span class="p">,</span>
            <span class="n">depth</span><span class="o">=</span><span class="n">qos_depth</span><span class="p">,</span>
            <span class="n">durability</span><span class="o">=</span><span class="n">QoSDurabilityPolicy</span><span class="p">.</span><span class="n">VOLATILE</span><span class="p">)</span>

        <span class="c1"># í¼ë¸”ë¦¬ì…” ì„ ì–¸, (í† í”½ íƒ€ì…, ì´ë¦„, QoS ì„¤ì •)
</span>        <span class="n">self</span><span class="p">.</span><span class="n">arithmetic_argument_publisher</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">create_publisher</span><span class="p">(</span>
            <span class="n">ArithmeticArgument</span><span class="p">,</span>
            <span class="s">'arithmetic_argument'</span><span class="p">,</span>
            <span class="n">QOS_RKL10V</span><span class="p">)</span>

        <span class="c1"># í•¨ìˆ˜ ì‹¤í–‰ ì£¼ê¸°, 1ì´ˆì— 1ë²ˆ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •
</span>        <span class="c1"># ì´ì „ ì„¤ì •ì€ ëª¨ë‘ í¼ë¸”ë¦¬ì‹œë¥¼ ìœ„í•œ ì„¤ì •ì´ê³ , publish_random_arithmetic_argmentsê°€ ì‹¤ì œ í† í”½ ë°œí–‰ ë¶€ë¶„
</span>        <span class="n">self</span><span class="p">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">create_timer</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">publish_random_arithmetic_arguments</span><span class="p">)</span>

    <span class="c1"># ë©”ì‹œì§€ íƒ€ì…ì€ arithmeticArgument, timestamp, ëœë¤ì˜ argument a,b ì €ì¥
</span>    <span class="k">def</span> <span class="nf">publish_random_arithmetic_arguments</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nc">ArithmeticArgument</span><span class="p">()</span>

        <span class="c1"># timestamp ì§€ì •
</span>        <span class="n">msg</span><span class="p">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_clock</span><span class="p">().</span><span class="nf">now</span><span class="p">().</span><span class="nf">to_msg</span><span class="p">()</span>

        <span class="c1"># ëœë¤ì˜ argument a ì§€ì •
</span>        <span class="n">msg</span><span class="p">.</span><span class="n">argument_a</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">min_random_num</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">max_random_num</span><span class="p">))</span>

        <span class="c1"># ëœë¤ì˜ argument b ì§€ì •
</span>        <span class="n">msg</span><span class="p">.</span><span class="n">argument_b</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">min_random_num</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">max_random_num</span><span class="p">))</span>

        <span class="c1"># í† í”½ ë°œí–‰
</span>        <span class="n">self</span><span class="p">.</span><span class="n">arithmetic_argument_publisher</span><span class="p">.</span><span class="nf">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># logging
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="s">'Published argument a: {0}'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">msg</span><span class="p">.</span><span class="n">argument_a</span><span class="p">))</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="s">'Published argument b: {0}'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">msg</span><span class="p">.</span><span class="n">argument_b</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">update_parameter</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">param</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">'min_random_num'</span> <span class="ow">and</span> <span class="n">param</span><span class="p">.</span><span class="n">type_</span> <span class="o">==</span> <span class="n">Parameter</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">INTEGER</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">min_random_num</span> <span class="o">=</span> <span class="n">param</span><span class="p">.</span><span class="n">value</span>
            <span class="k">elif</span> <span class="n">param</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">'max_random_num'</span> <span class="ow">and</span> <span class="n">param</span><span class="p">.</span><span class="n">type_</span> <span class="o">==</span> <span class="n">Parameter</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">INTEGER</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">max_random_num</span> <span class="o">=</span> <span class="n">param</span><span class="p">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="nc">SetParametersResult</span><span class="p">(</span><span class="n">successful</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="nc">Argument</span><span class="p">()</span>

        <span class="c1"># 1ì´ˆì— 1ë²ˆì”© í•¨ìˆ˜ ì‹¤í–‰
</span>        <span class="k">try</span><span class="p">:</span>
            <span class="n">rclpy</span><span class="p">.</span><span class="nf">spin</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="c1"># Ctrl+Cì™€ ê°™ì€ ì‹œê·¸ë„ì´ ë“¤ì–´ì˜¤ë©´ ì¢…ë£Œ
</span>        <span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">argument</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="s">'Keyboard Interrupt (SIGINT)'</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">argument</span><span class="p">.</span><span class="nf">destroy_node</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">rclpy</span><span class="p">.</span><span class="nf">shutdown</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">()</span>
</pre></table></code></div></div><p>Â </p><h4 id="ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„-1">ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ <a href="#ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„-1" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ ì—­í• ì„ í•˜ëŠ” <strong>calculator</strong> ë…¸ë“œì´ë‹¤. calculatorì˜ ì†ŒìŠ¤ ì½”ë“œëŠ” í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„, ì„œë¹„ìŠ¤ ì„œë²„, ì•¡ì…˜ ì„œë²„ë¥¼ ëª¨ë‘ í¬í•¨í•˜ê³  ìˆì–´ì„œ ë§¤ìš° ê¸¸ì–´ì„œ í† í”½ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ì™€ ê´€ë ¨ëœ ë¶€ë¶„ë§Œ ì‚´í´ë³´ë„ë¡ í•œë‹¤.</p><p>calculator í´ë˜ìŠ¤ëŠ” rclpy.node ëª¨ë“ˆì˜ Node í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê³  ìˆìœ¼ë©°, ìƒì„±ìì—ì„œ <code class="language-plaintext highlighter-rouge">calculator</code> ë¼ëŠ” ë…¸ë“œ ì´ë¦„ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤. ê·¸ ë’¤ì—ëŠ” QoSProfile í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ì˜ QoS ì„¤ì •ì„ í•´ì¤€ë‹¤.</p><p>Â </p><ol><li>Node ì„¤ì •<li>QoS ì„¤ì •<li>create_subscription ì„¤ì •<li>ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ í•¨ìˆ˜ ì‘ì„±</ol><p>Â </p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">rclpy</span>
<span class="kn">from</span> <span class="n">rclpy.executors</span> <span class="kn">import</span> <span class="n">MultiThreadedExecutor</span>

<span class="c1"># Node í´ë˜ìŠ¤ë¥¼ ìƒì†
</span><span class="k">class</span> <span class="nc">Calculator</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="c1"># calculator ì´ë¦„ìœ¼ë¡œ ì´ˆê¸°í™”
</span>        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="s">'calculator'</span><span class="p">)</span>

        <span class="c1"># ë³€ìˆ˜ ì´ˆê¸°í™”
</span>        <span class="n">self</span><span class="p">.</span><span class="n">argument_a</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">argument_b</span> <span class="o">=</span> <span class="mf">0.0</span>
        
        <span class="n">self</span><span class="p">.</span><span class="n">callback_group</span> <span class="o">=</span> <span class="nc">ReentrantCallbackGroup</span><span class="p">()</span>

        <span class="p">(</span><span class="n">ì¼ë¶€</span> <span class="n">ì½”ë“œ</span> <span class="n">ìƒëµ</span><span class="p">)</span>

        <span class="c1"># QoS ì„¤ì •
</span>        <span class="n">QOS_RKL10V</span> <span class="o">=</span> <span class="nc">QoSProfile</span><span class="p">(</span>
            <span class="n">reliability</span><span class="o">=</span><span class="n">QoSReliabilityPolicy</span><span class="p">.</span><span class="n">RELIABLE</span><span class="p">,</span>
            <span class="n">history</span><span class="o">=</span><span class="n">QoSHistoryPolicy</span><span class="p">.</span><span class="n">KEEP_LAST</span><span class="p">,</span>
            <span class="n">depth</span><span class="o">=</span><span class="n">qos_depth</span><span class="p">,</span>
            <span class="n">durability</span><span class="o">=</span><span class="n">QoSDurabilityPolicy</span><span class="p">.</span><span class="n">VOLATILE</span><span class="p">)</span>

        <span class="c1"># ì„œë¸ŒìŠ¤í¬ë¼ì´ë²„ ì„¤ì •
</span>        <span class="c1">### í¼ë¸”ë¦¬ì…”ì™€ ë™ì¼í•˜ê²Œ (í† í”½ íƒ€ì…(ArithmeticArgument), í† í”½ ì´ë¦„, QoS ì„¤ì •) + callbackí•¨ìˆ˜
</span>        <span class="c1">### get_arithmetic_argument : í¼ë¸”ë¦¬ì…”ë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œí•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
</span>        <span class="c1">### callback_group = ReentrantCallbackGroup : ì½œë°±í•¨ìˆ˜ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” multithread ê¸°ëŠ¥ì´ ìˆë‹¤. ì§€ì •í•´ì£¼ì§€ ì•Šì•„ë„ ë˜ëŠ”ë°, ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ MultuallyExclusiveCallbackGroupì´ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ëœë‹¤. ì´ëŠ” í•œë²ˆì— í•˜ë‚˜ì˜ ì½œë°±í•¨ìˆ˜ë§Œì„ ì‹¤í–‰í•˜ë„ë¡ í—ˆìš©í•˜ëŠ” ê²ƒì´ê³ , ReenttrantCallbackGroupì€ ì œí•œì—†ì´ ì½œë°±í•¨ìˆ˜ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰ì‹œì¼œì¤€ë‹¤. callback_group ì„¤ì •ìœ¼ë¡œëŠ” create_subscription(), create_service(), ActionServer(), create_timer() ì—ì„œ ì‚¬ìš©ëœë‹¤.
</span>        <span class="n">self</span><span class="p">.</span><span class="n">arithmetic_argument_subscriber</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">create_subscription</span><span class="p">(</span>
            <span class="n">ArithmeticArgument</span><span class="p">,</span>
            <span class="s">'arithmetic_argument'</span><span class="p">,</span>
            <span class="n">self</span><span class="p">.</span><span class="n">get_arithmetic_argument</span><span class="p">,</span>
            <span class="n">QOS_RKL10V</span><span class="p">,</span>
            <span class="n">callback_group</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">callback_group</span><span class="p">)</span>

    <span class="c1"># callback í•¨ìˆ˜ : ArithmeticArgument íƒ€ì…ì˜ ë©”ì‹œì§€ì˜ arithmetic_argumentë¼ëŠ” í† í”½ì„ ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œ í•˜ë©´ ì‹¤í–‰ëœë‹¤.
</span>    <span class="k">def</span> <span class="nf">get_arithmetic_argument</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="c1"># ì„œë¸ŒìŠ¤í¬ë¼ì´ë¸Œí•œ msgì˜ argument aì™€ bë¥¼ ë©¤ë²„ ë³€ìˆ˜ì— ì €ì¥
</span>        <span class="n">self</span><span class="p">.</span><span class="n">argument_a</span> <span class="o">=</span> <span class="n">msg</span><span class="p">.</span><span class="n">argument_a</span>
        <span class="n">self</span><span class="p">.</span><span class="n">argument_b</span> <span class="o">=</span> <span class="n">msg</span><span class="p">.</span><span class="n">argument_b</span>

        <span class="c1"># logging
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="s">'Subscribed at: {0}'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">msg</span><span class="p">.</span><span class="n">stamp</span><span class="p">))</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="s">'Subscribed argument a: {0}'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">argument_a</span><span class="p">))</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="s">'Subscribed argument b: {0}'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">argument_b</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">rclpy</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">calculator</span> <span class="o">=</span> <span class="nc">Calculator</span><span class="p">()</span>

        <span class="c1"># multithreadExecutorê°€ ìˆëŠ”ë°, ì´ëŠ” ìŠ¤ë ˆë“œ í’€(thread pool)ì„ ì‚¬ìš©í•˜ì—¬ ì½œë°±ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì¸ë°, num_threadsë¡œ ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê³ , ì§€ì •í•˜ì§€ ì•Šì„ ê²½ìš° multiprocessing.cpu_count()ë¥¼ í†µí•´ ì‹œìŠ¤í…œì—ì„œ ê°€ìš©í•  ìˆ˜ ìˆëŠ” ìŠ¤ë ˆë“œ ìˆ˜ë¥¼ ì§€ì •ë°›ëŠ”ë‹¤. ë‘˜ë‹¤ í•´ë‹¹ë˜ì§€ ì•Šìœ¼ë©´ ë‹¨ì¼ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•œë‹¤. excutorëŠ” ì½œë°±ì´ ë³‘ë ¬ë¡œ ë°œìƒí•˜ë„ë¡ í—ˆìš©í•˜ì—¬ ReentrantCallbackGroupê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì½œë°±í•¨ìˆ˜ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
</span>        <span class="n">executor</span> <span class="o">=</span> <span class="nc">MultiThreadedExecutor</span><span class="p">(</span><span class="n">num_threads</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="c1"># ìœ„ì—ì„œ ì„¤ì •í•œ executorë¥¼ calculator ë…¸ë“œì— ì¶”ê°€
</span>        <span class="n">executor</span><span class="p">.</span><span class="nf">add_node</span><span class="p">(</span><span class="n">calculator</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">executor</span><span class="p">.</span><span class="nf">spin</span><span class="p">()</span>
        <span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">calculator</span><span class="p">.</span><span class="nf">get_logger</span><span class="p">().</span><span class="nf">info</span><span class="p">(</span><span class="s">'Keyboard Interrupt (SIGINT)'</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">executor</span><span class="p">.</span><span class="nf">shutdown</span><span class="p">()</span>
            <span class="n">calculator</span><span class="p">.</span><span class="n">arithmetic_action_server</span><span class="p">.</span><span class="nf">destroy</span><span class="p">()</span>
            <span class="n">calculator</span><span class="p">.</span><span class="nf">destroy_node</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">rclpy</span><span class="p">.</span><span class="nf">shutdown</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">()</span>
</pre></table></code></div></div><p>Â </p><h4 id="ì‹¤í–‰-1">ì‹¤í–‰ <a href="#ì‹¤í–‰-1" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>ì‹¤í–‰í•˜ê¸° ì „ì— setup.pyë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì ê²€í•˜ì.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s">'console_scripts'</span><span class="p">:</span> <span class="p">[</span>
            <span class="s">'argument = topic_service_action_rclpy_example.arithmetic.argument:main'</span><span class="p">,</span>
            <span class="s">'operator = topic_service_action_rclpy_example.arithmetic.operator:main'</span><span class="p">,</span>
            <span class="s">'calculator = topic_service_action_rclpy_example.calculator.main:main'</span><span class="p">,</span>
            <span class="s">'checker = topic_service_action_rclpy_example.checker.main:main'</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
</pre></table></code></div></div><p>entry_pointsì— argument.pyì˜ mainí•¨ìˆ˜ ì‹¤í–‰ì™€ calculator.pyì˜ mainí•¨ìˆ˜ ì‹¤í–‰í•˜ëŠ” ë¶€ë¶„ì´ ë‹´ê²¨ì ¸ ìˆì–´ì•¼ í•œë‹¤.</p><p>Â </p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ros2 launch topic_service_action_rclcpp_example arithmetic.launch.py
<span class="o">[</span>INFO] <span class="o">[</span>launch]: All log files can be found below /home/jhyoon/.ros/log/2022-08-02-18-33-29-121351-LAPTOP-FCNUC3SV-442
<span class="o">[</span>INFO] <span class="o">[</span>launch]: Default logging verbosity is <span class="nb">set </span>to INFO
<span class="o">[</span>INFO] <span class="o">[</span>argument-1]: process started with pid <span class="o">[</span>444]
<span class="o">[</span>INFO] <span class="o">[</span>calculator-2]: process started with pid <span class="o">[</span>446]
<span class="o">[</span>calculator-2] <span class="o">[</span>INFO]: Run calculator
<span class="o">[</span>argument-1] <span class="o">[</span>INFO]: Published argument_a 7.62
<span class="o">[</span>argument-1] <span class="o">[</span>INFO]: Published argument_b 1.43
<span class="o">[</span>calculator-2] <span class="o">[</span>INFO]: Timestamp of the message: sec 1659432810 nanosec 256482232
<span class="o">[</span>calculator-2] <span class="o">[</span>INFO]: Subscribed argument a: 7.62
<span class="o">[</span>calculator-2] <span class="o">[</span>INFO]: Subscribed argument b: 1.43
<span class="o">[</span>argument-1] <span class="o">[</span>INFO]: Published argument_a 8.76
<span class="o">[</span>argument-1] <span class="o">[</span>INFO]: Published argument_b 0.60
<span class="o">[</span>calculator-2] <span class="o">[</span>INFO]: Timestamp of the message: sec 1659432811 nanosec 256391424
<span class="o">[</span>calculator-2] <span class="o">[</span>INFO]: Subscribed argument a: 8.76
<span class="o">[</span>calculator-2] <span class="o">[</span>INFO]: Subscribed argument b: 0.60
</pre></table></code></div></div><p>Â </p></div><div class="post-tail-wrapper text-muted"><div style="text-align: left;"> <a href="http://hits.dwyl.com/dkssud8150.github.io/posts/package/" target="_blank"> <img data-src="http://hits.dwyl.com/dkssud8150.github.io/posts/package.svg" data-proofer-ignore> </a></div><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/classlog/'>Classlog</a>, <a href='/categories/ros2/'>ROS2</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ros2/" class="post-tag no-text-decoration" >ROS2</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text= [ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸° - JaeHo Yoon&amp;url=https://dkssud8150.github.io/posts/package/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title= [ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸° - JaeHo Yoon&amp;u=https://dkssud8150.github.io/posts/package/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://dkssud8150.github.io/posts/package/&amp;text= [ROS2 í”„ë¡œê·¸ë˜ë°] ROS íŒ¨í‚¤ì§€ ì„¤ê³„ ë° í† í”½ ëœ¯ì–´ë³´ê¸° - JaeHo Yoon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://dkssud8150.github.io/posts/package/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script></div><script src="https://utteranc.es/client.js" repo="dkssud8150/dkssud8150.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gitpage/">[ê¹ƒí—ˆë¸Œ í”„ë¡œí•„ ê¾¸ë¯¸ê¸°] github í”„ë¡œí•„ ë§Œë“¤ê¸°</a><li><a href="/posts/product/">[ê¹ƒí—ˆë¸Œ í”„ë¡œí•„ ê¾¸ë¯¸ê¸°] productive box ë§Œë“¤ê¸°</a><li><a href="/posts/regex/">[ë°ë¸Œì½”ìŠ¤] 2ì£¼ì°¨ - linux ê¸°ì´ˆ(REGEX)</a><li><a href="/posts/Kfold/">KFold Cross Validation ê³¼ StratifiedKFold</a><li><a href="/posts/cmake/">[ë°ë¸Œì½”ìŠ¤] 17ì£¼ì°¨ - CMake OpenCV, Eigen, Pangolin install </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/turtlesim/"><div class="card-body"> <em class="timeago small" date="2022-07-26 04:23:00 +0900" >Jul 26, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ROS2 ì´ë¡ ] turtlesim ì‹¤í–‰</h3><div class="text-muted small"><p> ê°œë°œ í™˜ê²½ì„ ì„¤ì •í•˜ëŠ” ê²ƒì€ í•´ë‹¹ ë¸”ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ê¸¸ ë°”ë€ë‹¤. Â  007 íŒ¨í‚¤ì§€ ì„¤ì¹˜ì™€ ë…¸ë“œ ì‹¤í–‰ Turtlesim ì´ë€? ì¶”ê°€ ì˜ˆì •. Â  Â  Turtlesim íŒ¨í‚¤ì§€ ì„¤ì¹˜ turtlesimì€ ROSì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆì–´ íŠœí† ë¦¬ì–¼ë¡œ ë§ì´ ì‚¬ìš©...</p></div></div></a></div><div class="card"> <a href="/posts/introduction/"><div class="card-body"> <em class="timeago small" date="2022-07-25 18:35:00 +0900" >Jul 25, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ROS2 ì´ë¡ ] ëª©ì°¨ ë° ê°œìš”</h3><div class="text-muted small"><p> í‘œìœ¤ì„ ë°•ì‚¬ë‹˜ì˜ ë„¤ì´ë²„ ì¹´í˜ ê¸€ì„ ì°¸ê³ ë¡œ í•˜ì—¬ ROS2ë¥¼ ê³µë¶€í•˜ê³ , ê¸°ë¡í•˜ê³ ì í•©ë‹ˆë‹¤. ê¸°ë³¸ URL : https://cafe.naver.com/openrt/24070 github : https://github.com/robotpilot/ros2-seminar-examples Â  ëª©ì°¨ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì´ë¡ /í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì ¸ ìˆê³ , ì‹¬...</p></div></div></a></div><div class="card"> <a href="/posts/helloworld/"><div class="card-body"> <em class="timeago small" date="2022-07-26 01:35:00 +0900" >Jul 26, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ROS2 í”„ë¡œê·¸ë˜ë°] ROS í”„ë¡œê·¸ë˜ë° ì½”ë“œ ìŠ¤íƒ€ì¼ ë° í”„ë¡œê·¸ë˜ë° ê¸°ì´ˆ</h3><div class="text-muted small"><p> 023 ROS í”„ë¡œê·¸ë˜ë° ê·œì¹™ (ì½”ë“œ ìŠ¤íƒ€ì¼) ROS2 í”„ë¡œê·¸ë˜ë° ê·œì¹™ (ì½”ë“œ ìŠ¤íƒ€ì¼) í˜‘ì—… í”„ë¡œê·¸ë˜ë° ì‘ì—… ì‹œ ì¼ê´€ëœ ê·œì¹™ì„ ë§Œë“¤ê³ , ì´ë¥¼ ì¤€ìˆ˜í•˜ì—¬ì•¼ ì½”ë“œê°€ ê¼¬ì´ê±°ë‚˜ ë¬¸ì œê°€ ìƒê¸°ì§€ ì•ŠëŠ”ë‹¤. ROSê°€ ì§€ì›í•˜ëŠ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ëŠ” ë‹¤ì–‘í•˜ì§€ë§Œ, ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” C++ê³¼ pythonë§Œ ì‚´í´ë³´ì. Â  C++ style ROS2 Develo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/turtlesim/" class="btn btn-outline-primary" prompt="Older"><p>[ROS2 ì´ë¡ ] turtlesim ì‹¤í–‰</p></a> <a href="/posts/kooc_start/" class="btn btn-outline-primary" prompt="Newer"><p>[KOOC] ì¸ê³µì§€ëŠ¥ ë° ê¸°ê³„í•™ìŠµ ê°œë¡  - Abstract</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> Â© 2023 <a href="https://twitter.com/username">JaeHo YooN</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NC7MWHVXJE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NC7MWHVXJE'); }); </script>