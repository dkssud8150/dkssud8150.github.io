<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[데브코스] 5주차 - OpenCV primary Class" /><meta name="author" content="JaeHo YooN" /><meta property="og:locale" content="en" /><meta name="description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><meta property="og:description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><link rel="canonical" href="https://dkssud8150.github.io/posts/opencvclass/" /><meta property="og:url" content="https://dkssud8150.github.io/posts/opencvclass/" /><meta property="og:site_name" content="JaeHo Yoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-15T02:45:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[데브코스] 5주차 - OpenCV primary Class" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@JaeHo YooN" /><meta name="google-site-verification" content="znvuGsQGYxMZPBslC4XG6doCYao6Y-fWibfGlcaMHH8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JaeHo YooN"},"dateModified":"2022-03-16T02:23:43+09:00","datePublished":"2022-03-15T02:45:00+09:00","description":"Do focus on developing ‘your ability’ rather than waste time on making you famous.","headline":"[데브코스] 5주차 - OpenCV primary Class","mainEntityOfPage":{"@type":"WebPage","@id":"https://dkssud8150.github.io/posts/opencvclass/"},"url":"https://dkssud8150.github.io/posts/opencvclass/"}</script><title>[데브코스] 5주차 - OpenCV primary Class | JaeHo Yoon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHo Yoon"><meta name="application-name" content="JaeHo Yoon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/shin_chan.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaeHo Yoon</a></div><div class="site-subtitle font-italic">Mamba Mentality</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fab fa-angellist ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dkssud8150" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hoya58150','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.notion.so/18490713817d403696812c57d0abe730" aria-label="notion" target="_blank" rel="noopener"> <i class="fab fa-battle-net"></i> </a> <a href="https://www.linkedin.com/in/jaeho-yoon-90b62b230" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/jai_ho8150/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[데브코스] 5주차 - OpenCV primary Class </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[데브코스] 5주차 - OpenCV primary Class</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/dkssud8150">JaeHo YooN</a> </em></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-03-15 02:45:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Tue, Mar 15, 2022, 2:45 AM +0900" >Mar 15, 2022</em> </span> <span> Updated <em class="timeago" date="2022-03-16 02:23:43 +0900 " data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 16, 2022, 2:23 AM +0900" >Mar 16, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5152 words"> <em>28 min</em> read</span></div></div></div><div class="post-content"><p><br /></p><h1 id="opencv-주요-클래스">OpenCV 주요 클래스</h1><h2 id="point_-클래스">Point_ 클래스 <a href="#point_-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>point_ 클래스 : 2차원 점의 좌표 표현을 위한 템플릿 클래스</p><ul><li>멤버 변수 : x,y ( 점 좌표 )<li>멤버 함수 :<ul><li>dot() : 내적 계산<li>ddot() : 더블 타입으로 내적 계산<li>cross() : 외적 계산<li>inside() : 한 점이 어떤 사각형 안에 존재 여부</ul><li>다양한 사칙 연산에 대한 연산자 오버로딩과 std::cout 출력을 위한 « 연산자(shift 연산자) 오버로딩을 지원</ul><p>아래는 point_ 클래스의 정의를 코드화시킨 것이다. typedef 부분은 생성자 부분으로 어떻게 타입을 넣느냐에 따라 다르다는 것을 보여준다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="k">class</span> <span class="nc">Size_</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="p">...</span>
    <span class="n">_Tp</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span> <span class="c1">// the point coordinates</span>
<span class="p">}</span>
<span class="k">typedef</span> <span class="n">Point_</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>     <span class="n">Point2i</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Point_</span><span class="o">&lt;</span><span class="n">int64</span><span class="o">&gt;</span>   <span class="n">Point2l</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Point_</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span>   <span class="n">Point2f</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Point_</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span>  <span class="n">Point2d</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Point2i</span>         <span class="n">Point</span><span class="p">;</span>
</pre></table></code></div></div><p>가장 많이 사용되는 정수형태를 Point2i로 정의한 후 그것을 다시 Point로 정의하여 쉽게 사용할 수 있도록 해놓았다.</p><p><br /></p><ul><li>Point 연산의 예</ul><p>point 객체끼리의 덧셈과 뺄셈, 한 점과 숫자 값과의 곱셈 등의 연산을 지원한다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="n">Point</span> <span class="n">pt1</span><span class="p">,</span> <span class="n">pt2</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">pt3</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>   <span class="c1">// pt1 == [0, 0]</span>
<span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="n">pt1</span> <span class="o">=</span> <span class="n">pt2</span> <span class="o">+</span> <span class="n">pt3</span><span class="p">;</span>                <span class="c1">// pt1 == [6, 7]</span>
<span class="n">pt1</span> <span class="o">=</span> <span class="n">pt2</span> <span class="o">-</span> <span class="n">pt3</span><span class="p">;</span>                <span class="c1">// pt1 == [2, -1]</span>
<span class="n">pt1</span> <span class="o">=</span> <span class="n">pt3</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>                  <span class="c1">// pt1 == [4, 8]</span>
<span class="n">pt1</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">pt3</span><span class="p">;</span>                  <span class="c1">// pt1 == [1, 2]</span>
<span class="n">pt1</span> <span class="o">+=</span> <span class="n">pt2</span><span class="p">;</span>                     <span class="c1">// pt1 == [5, 5]</span>
<span class="n">pt</span> <span class="o">*=</span> <span class="n">a</span><span class="p">;</span>                        <span class="c1">// pt1 == [2, 4]</span>

<span class="kt">double</span> <span class="n">v</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">pt2</span><span class="p">);</span>           <span class="c1">// v = 5.0  원점에서 점까지의 거리</span>
<span class="kt">bool</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">pt1</span> <span class="o">==</span> <span class="n">pt2</span><span class="p">;</span>           <span class="c1">// b1 = false</span>
<span class="kt">bool</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">pt1</span> <span class="o">!=</span> <span class="n">pt2</span><span class="p">;</span>           <span class="c1">// b2 = true</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">pt1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>            <span class="c1">// "[1, 2]"</span>
</pre></table></code></div></div><p><br /></p><h2 id="size_-클래스">Size_ 클래스 <a href="#size_-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>size_ 클래스 : 영상 또는 사각형의 크기 표현을 위한 템플릿 클래스</p><ul><li>멤버 변수 : width, height<li>멤버 함수 : area() - 사각형의 면적 계산<li>다양한 사칙 연산에 대한 연산자 오버로딩과 std::cout 출력을 위한 « 연산자 오버로딩을 지원</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="k">class</span> <span class="nc">Size_</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="p">...</span>
    <span class="n">_Tp</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">;</span> <span class="c1">// the width and the height</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">Size_</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>    <span class="n">Size2i</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Size_</span><span class="o">&lt;</span><span class="n">int64</span><span class="o">&gt;</span>  <span class="n">Size2l</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Size_</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span>  <span class="n">Size2f</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Size_</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">Size2d</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Size2i</span>        <span class="n">Size</span><span class="p">;</span>
</pre></table></code></div></div><p><br /></p><h2 id="rect_-클래스">Rect_ 클래스 <a href="#rect_-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>rect_ 클래스 : 2차원 사각형 표현을 위한 템플릿 클래스</p><ul><li>멤버 변수 : x, y, width, height<li>멤버 함수 :<ul><li>tl() : 좌측 상단 점의 좌표를 반환<li>br() : 오른쪽 하단의 점의 좌표를 반환<li>size() : size 객체를 반환<li>area() : 사각형 크기 계산<li>contains() : 한 점이 어떤 사각형안에 포함되어 있는지 여부</ul><li>다양한 사칙 연산에 대한 연산자 오버로딩과 std::cout 출력을 위한 « 연산자 오버로딩을 지원</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="k">class</span> <span class="nc">Rect_</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="p">...</span>
    <span class="n">_Tp</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">;</span> <span class="c1">// coordinate of upper left point and width and height</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">Rect_</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>    <span class="n">Rect2i</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Rect_</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span>  <span class="n">Rect2f</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Rect_</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">Rect2d</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Rect2i</span>        <span class="n">Rect</span><span class="p">;</span>
</pre></table></code></div></div><p><br /></p><ul><li>Rect 연산의 예</ul><p>Rect 객체와 Size, Point 객체의 덧셈과 뺄셈, Rect 객체끼리의 논리 연산을 지원한다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">Rect</span> <span class="n">rc1</span><span class="p">;</span>                         <span class="c1">// rc1 = [0 x 0 from (0, 0)]</span>
<span class="n">Rect</span> <span class="nf">rc2</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">40</span><span class="p">);</span>         <span class="c1">// rc2 = [60 x 40 from (10, 10)]</span>
<span class="n">Rect</span> <span class="n">rc3</span> <span class="o">=</span> <span class="n">rc1</span> <span class="o">+</span> <span class="n">Size</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">);</span>    <span class="c1">// rc3 = [50 x 40 from (0, 0)] 가로세로가 더해짐</span>
<span class="n">Rect</span> <span class="n">rc4</span> <span class="o">=</span> <span class="n">rc2</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>   <span class="c1">// rc4 = [60 x 40 from (20, 20)] 좌표가 더해짐</span>
<span class="n">Rect</span> <span class="n">rc5</span> <span class="o">=</span> <span class="n">rc3</span> <span class="o">&amp;</span> <span class="n">rc4</span><span class="p">;</span>             <span class="c1">// rc5 = [30 x 20 from (20, 20)] 두 사각형이 겹치는 최대 크기의 사각형</span>
<span class="n">Rect</span> <span class="n">rc6</span> <span class="o">=</span> <span class="n">rc3</span> <span class="o">|</span> <span class="n">rc4</span><span class="p">;</span>             <span class="c1">// rc6 = [80 x 60 from (0, 0)] 두 사각형을 모두 포함할 수 있는 최소 크기의 사각형</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day2/intersectionandcombination.png" data-proofer-ignore></p><p><br /></p><h2 id="range-클래스">Range 클래스 <a href="#range-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Range 클래스 : 정수값의 범위를 나타내기 위한 클래스</p><ul><li>멤버 변수 : start, end<li>멤버 함수 :<ul><li>size() : 범위의 크기 계산<li>empty() : 해당 범위가 비어있는지에 대한 여부<li>all() : 범위 안의 모든 수</ul><li>start는 범위에 포함되고, end는 범위에 포함되지 않음 -&gt; [start, end)</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Range</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="n">Range</span><span class="p">();</span>
    <span class="n">Range</span><span class="p">(</span><span class="kt">int</span> <span class="n">_start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">_end</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">empty</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
    <span class="k">static</span> <span class="n">Range</span> <span class="n">all</span><span class="p">();</span>

    <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><h2 id="string-클래스">String 클래스 <a href="#string-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>string 클래스 : 원래는 OpenCV에서 자체적으로 정의해서 사요하는 문자열이 있엇으나 4.x 버전부터 std::string 클래스로 대체되었다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cv</span><span class="o">::</span><span class="n">String</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>cv::format() 함수를 이용하여 형식 있는 문자열 생성 가능 -&gt; c언어의 printf() 함수와 인자 전달 방식이 유사하다.</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="p">;</span>
<span class="n">String</span> <span class="n">str2</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">"world"</span><span class="p">);</span>
<span class="n">String</span> <span class="n">str3</span> <span class="o">=</span> <span class="n">str1</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">str2</span><span class="p">;</span>

<span class="n">Mat</span> <span class="n">imgs</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">format</span><span class="p">(</span><span class="s">"test%02d.bmp"</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// format 함수의 형태로 생성이 가능하다. 이 때, d에 i+1이 들어가는데, 2자리수 형태로 들어가고, 앞의 자리수가 비어있으면 0으로 채우는 것 -=&gt; test01.bmp</span>
  <span class="n">imgs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><h2 id="vec-클래스">Vec 클래스 <a href="#vec-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>벡터(vector) : 같은 자료형 원소 여러 개로 구성된 데이터 형식 (열 벡터)</p><ul><li>vec클래스는 벡터로 표현하는 탬플릭 클래스다.<li>std:cout 출력을 위해 « 연산자 오버로딩을 지원한다.<li>Matx라는 클래스는 작은 크기의 행렬을 표현하는 클래스로 주로 16개 원소 이하에서 많이 사용한다.</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">&gt;</span> <span class="k">class</span> <span class="nc">Matx</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="p">...</span>
    <span class="n">_Tp</span> <span class="n">val</span><span class="p">[</span><span class="n">m</span><span class="o">*</span><span class="n">n</span><span class="p">];</span> <span class="c1">//  matrix elements</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cn</span><span class="p">&gt;</span> <span class="k">class</span> <span class="nc">Vec</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Matx</span><span class="o">&lt;</span><span class="n">_Tp</span><span class="p">,</span> <span class="n">cn</span><span class="p">,</span> <span class="mi">1</span><span class="o">&gt;</span> <span class="c1">// 열의 크기를 1로 한정한 클래스</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="p">...</span>
    <span class="k">const</span> <span class="n">_Tp</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="n">_Tp</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>Vec 클래스 이름 재정의</ul><p>자주 사용되는 자료형과 개수에 대한 vec 클래스 템플릿의 이름을 재정의해놓은 것이 있다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="n">uchar</span><span class="p">,</span> <span class="mi">2</span><span class="o">&gt;</span> <span class="n">Vec2b</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="n">uchar</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">Vec3b</span><span class="p">;</span>  <span class="c1">// 컬러 영상의 픽셀값을 참조할 때 많이 사용한다.</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="n">uchar</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">Vec4b</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">2</span><span class="o">&gt;</span> <span class="n">Vec2i</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">Vec3i</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">Vec4i</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">6</span><span class="o">&gt;</span> <span class="n">Vec6i</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">8</span><span class="o">&gt;</span> <span class="n">Vec8i</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span> <span class="mi">2</span><span class="o">&gt;</span> <span class="n">Vec2f</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">Vec3f</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">Vec4f</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span> <span class="mi">6</span><span class="o">&gt;</span> <span class="n">Vec6f</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">2</span><span class="o">&gt;</span> <span class="n">Vec2d</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">Vec3d</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">Vec4d</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="mi">6</span><span class="o">&gt;</span> <span class="n">Vec6d</span><span class="p">;</span>
</pre></table></code></div></div><p><br /></p><h2 id="scalar-클래스">Scalar 클래스 <a href="#scalar-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>scalar 클래스 : 크기가 4인 double 배열(double val[4])을 멤버 변수로 가지고 있는 클래스</p><ul><li>4채널 이하의 영상에서 픽셀 값을 표현하는 용도로 자주 사용<li>[]연산자를 통해 원소에 접근 가능</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="k">class</span> <span class="nc">Scalar_</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Vec</span><span class="o">&lt;</span><span class="n">_Tp</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="c1">// scalar=원소 개수가 4개인 열벡터 (템플릿 클래스)</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="n">Scalar_</span><span class="p">();</span>
    <span class="n">Scalar_</span><span class="p">(</span><span class="n">_Tp</span> <span class="n">v0</span><span class="p">,</span> <span class="n">_Tp</span> <span class="n">v1</span><span class="p">,</span> <span class="n">_Tp</span> <span class="n">v2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">_Tp</span> <span class="n">v3</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">Scalar_</span><span class="p">(</span><span class="n">_Tp</span> <span class="n">v0</span><span class="p">);</span>

    <span class="k">static</span> <span class="n">Scalar_</span><span class="o">&lt;</span><span class="n">_Tp</span><span class="o">&gt;</span> <span class="n">all</span><span class="p">(</span><span class="n">_Tp</span> <span class="n">v0</span><span class="p">);</span>
    <span class="p">...</span>
<span class="p">};</span>
</pre></table></code></div></div><p>이렇게 정의되어 있지만 잘 사용하지 않는데 자료형을 double로 한정한 경우만 많이 사용한다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">typedef</span> <span class="n">Scalar_</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">Scalar</span><span class="p">;</span> <span class="c1">// 4개의 double형 데이터를 갖는 자료형 (val[0],va[1],val[2],val[3])</span>
</pre></table></code></div></div><p>스칼라 클래스는 double 타입이라 효율이 좋다고는 못하지만, 코드작성의 편의성과 코드의 통일성을 위해 자주 사용된다.</p><ul><li>Scalar 클래스 객체 생성과 원소 참조 방법</ul><p>원래는 Scalar 클래스는 double val[0:5]를 가지고 있는데 1개만 지정하는 경우 맨 앞, 즉 val[0] 에만 들어가게 된다. 3개를 지정해줄 경우 앞에서부터 val[0~2]가 지정되고 마지막은 0으로 들어간다. yello.val[i]로 출력하는 경우와 yellow[i]로 출력하는 경우가 같다.</p><p><img data-src="/assets/img/dev/week5/day2/scalar.png" data-proofer-ignore></p><p><br /></p><h2 id="행렬-기초">행렬 기초 <a href="#행렬-기초" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>행렬(matrix) : 수나 기호, 수식 등을 네모꼴로 배열한 것, 괄호로 묶어서 표시한다.</p><p><img data-src="/assets/img/dev/week5/day2/matrix.png" data-proofer-ignore></p><p>이는 4행 4열로 된, 4x4 행렬이다. 행을 row, 열을 column이라 한다.</p><p><img data-src="/assets/img/dev/week5/day2/rowcolvector.png" data-proofer-ignore></p><p>이와 같이 열또는 행만 있는 것을 열벡터, 행벡터라고 한다. 이 두개를 통칭해서 벡터라 한다.</p><p><br /></p><ul><li>행렬의 덧/곱셈</ul><p>행렬의 덧셈은 같은 자리의 숫자들끼리 더하지만 곱셈의 방식은 다르다.</p><p><img data-src="/assets/img/dev/week5/day2/matrixcalcul.png" data-proofer-ignore></p><p>곱셈은 이와 같이 계산되기 때문에 <code class="language-plaintext highlighter-rouge">행의 수 == 열의 수</code> 또는 <code class="language-plaintext highlighter-rouge">열의 수 == 행의 수</code> 라는 조건이 붙는다. 예를 들어 [2x1] x [2x1] 이면 계산이 되지 않고, [1x2] x [2x1] 이면 계산이 된다.</p><p><br /></p><ul><li>역행렬</ul><p><img data-src="/assets/img/dev/week5/day2/inversematrix.jpg" data-proofer-ignore></p><p>A x A^-1 = I, 이 때, I를 단위행렬이라 한다.</p><ul><li>전치 행렬</ul><p><img data-src="/assets/img/dev/week5/day2/transposematrix.png" data-proofer-ignore></p><p><br /></p><p><br /></p><h2 id="mat-클래스">Mat 클래스 <a href="#mat-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>mat 클래스 : n차원 1채널 또는 다채널 행렬 표현을 위한 클래스다</p><ul><li>실수 또는 복소수 행렬, grayscale 또는 truecolor 영상, 벡터 필드, 히스토그램, 텐서 등을 표현할 수 있다.<li>다양한 형태의 행렬 생성, 복사, 행렬 연산 기능을 제공한다.<ul><li>행렬 생성 시 행렬의 크기, 자료형의 채널 수(타입), 초기값등을 지정할 수잇다.<li>복사 생성자 &amp; 대입 연산자는 얕은 복사를 수행한다. 즉, 참조 계수로 관리한다.<li>깊은 복사는 Mat::copyTo() 또는 Mat::clone() 함수를 사용한다.<li>다양한 사칙 연산에 대한 연산자 오버로딩과 std::cout출력을 위한 « 연산자 오버로딩을 지원한다.</ul><li>행렬의 원소(픽셀 값) 접근 방법을 제공한다.<ul><li>Mat::data 멤버 변수가 실제 핅셀 데이터 위치를 가리킨다.<li>Mat::at<typename>(inty, int x) 또는 Mat::ptr<typename>(int y) 함수 사용을 권장한다.</typename></typename></ul></ul><p><br /></p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Mat</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="cm">/* 생성자 &amp; 소멸자 */</span>
    <span class="n">Mat</span><span class="p">();</span>
    <span class="n">Mat</span><span class="p">(</span><span class="kt">int</span> <span class="n">rows</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cols</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">);</span>
    <span class="p">...</span>

    <span class="cm">/* 멤버 함수 &amp; 연산자 오버로딩 */</span>
    <span class="n">vold</span> <span class="n">create</span><span class="p">(</span><span class="kt">int</span> <span class="n">rows</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cols</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">);</span>
    <span class="n">Mat</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="n">Mat</span><span class="o">&amp;</span> <span class="n">m</span><span class="p">);</span>
    <span class="n">Mat</span> <span class="n">clone</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="n">copyTo</span><span class="p">(</span><span class="n">OutputArray</span> <span class="n">m</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="n">_Tp</span><span class="o">*</span> <span class="n">ptr</span><span class="p">(</span><span class="kt">int</span> <span class="n">i0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="n">_Tp</span><span class="o">&amp;</span> <span class="n">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">);</span>

    <span class="cm">/* 멤버 변수 */</span>
    <span class="kt">int</span> <span class="n">dims</span><span class="p">;</span>       <span class="c1">// 행렬의 차원, 영상 데이터의 경우 2차원으로 된다.</span>
    <span class="kt">int</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">;</span> <span class="c1">// rows = 행 = 세로, cols = 열 = 가로</span>
    <span class="n">uchar</span><span class="o">*</span> <span class="n">data</span><span class="p">;</span>    <span class="c1">// new 연산자를 이용해서 행렬의 원소 데이터의 메모리를 동적할당해서 메모리의 시작 주소를 저장할 포인터 변수 </span>

    <span class="n">MatSize</span> <span class="n">size</span><span class="p">;</span>   <span class="c1">// 영상의 크기를 정하는 것</span>
    <span class="n">MatStep</span> <span class="n">step</span><span class="p">;</span>   <span class="c1">// 영상 데이터 공간의 가로 크기를 정하는 것</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="mat-클래스의-깊이-depth">Mat 클래스의 깊이 (depth) <a href="#mat-클래스의-깊이-depth" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Mat 클래스의 깊이 : 행렬 원소가 사용하는 자료형 정보를 가리키는 매크로 상수(정보를 나타내는 용어)</p><ul><li>Mat::depth() 함수를 이용해서 참조한다.<li>형식 : <code class="language-plaintext highlighter-rouge">CV_ &lt;bit-depth&gt; {U|S|F}</code></ul><p>미리 정의된 매크로 상수에는 다음과 같다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="cp">#define CV_8U     0   // uchar, unsigned char
#define CV_8S     1   // schar, signed char 일반적인 char 타입
#define CV_16U    2   // ushort, unsigned short
#define CV_16S    3   // short  2byte signed 부호값
#define CV_32S    4   // int    일반적인 int
#define CV_32F    5   // float
#define CV_64F    6   // double
#define CV_16F    7   // float16_t
</span></pre></table></code></div></div><p><br /></p><h3 id="mat-클래스의-채널-channel">Mat 클래스의 채널 (channel) <a href="#mat-클래스의-채널-channel" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Mat 클래스의 채널 : 원소 하나가 몇 개의 채널로 구성되어 있는가에 대한 것이다.</p><ul><li>Mat::channels() 함수를 이용하여 참조한다.<li>e.g. grayscale 영상은 픽셀 하나 당 밝기 값 1개, truecolor 영상은 픽셀 하나 당 B,G,R 색상 성분인 3개</ul><p><br /></p><h3 id="mat-클래스의-타입-type">Mat 클래스의 타입 (type) <a href="#mat-클래스의-타입-type" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Mat 클래스의 타입 : 행렬의 깊이와 채널 수를 한꺼번에 나타내는 매크로 상수다.</p><ul><li>Mat::type() 함수를 이용하여 참조한다.<li>형식 : <code class="language-plaintext highlighter-rouge">CV_8UC1</code> -&gt; 앞부분에는 깊이 뒷부분에 채널을 붙인 것<ul><li>C1: 채널 수<li>U: 정수형 부호 , 정수형 부호(S/U), 실수형(F)<li>8: 비트 수, 8/16/32/64</ul></ul><p><br /></p><ul><li>Mat 클래스 속성 참조 예제</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">Mat</span> <span class="n">img</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s">"lenna.bmp"</span><span class="p">);</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"width: "</span> <span class="o">&lt;&lt;</span> <span class="n">img</span><span class="p">.</span><span class="n">cols</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Height: "</span> <span class="o">&lt;&lt;</span> <span class="n">img</span><span class="p">.</span><span class="n">rows</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"channels: "</span> <span class="o">&lt;&lt;</span> <span class="n">img</span><span class="p">.</span><span class="n">channels</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">img</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">CV_8UC1</span><span class="p">)</span> 
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"img is a grayscale image "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">img</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">CV_8UC3</span><span class="p">)</span> 
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"img is a truecolor image "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day2/output.png" data-proofer-ignore></p><p><br /></p><h3 id="mat-클래스-사용방법">Mat 클래스 사용방법 <a href="#mat-클래스-사용방법" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>Mat 클래스 생성</ul><p>Mat 클래스를 생성하는 방법에는 여러 가지가 있다</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="n">Mat</span> <span class="n">img1</span><span class="p">;</span> <span class="c1">// empty matrix</span>

<span class="cm">/* img 만들기 */</span>
<span class="n">Mat</span> <span class="nf">img2</span><span class="p">(</span><span class="mi">480</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="n">CV_8UC1</span><span class="p">);</span> <span class="c1">// unsigned char, 1channel, (rows,cols, type)</span>
<span class="n">Mat</span> <span class="nf">img3</span><span class="p">(</span><span class="mi">480</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="n">CV_8UC3</span><span class="p">);</span> <span class="c1">// unsigned char, 3channel</span>
<span class="n">Mat</span> <span class="nf">img4</span><span class="p">(</span><span class="n">Size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">),</span> <span class="n">CV_8UC1</span><span class="p">);</span> <span class="c1">// Size(width, height), size로 할 때는 (가로, 세로)</span>

<span class="n">Mat</span> <span class="nf">img5</span><span class="p">(</span><span class="mi">480</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="n">CV_8UC1</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">128</span><span class="p">));</span> <span class="c1">// unsigned char, 1channel, grayscale인 경우는 밝기 1개의 값만 필요함, (rows, cols, type, initial values)</span>
<span class="n">Mat</span> <span class="nf">img6</span><span class="p">(</span><span class="mi">480</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="n">CV_8UC3</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">));</span> <span class="c1">// unsigned char, 1channel, truecolor인 경우는 B,G,R 총 3개의 값이 필요함</span>

<span class="cm">/* mat클래스에서 제공하는 정적(static) 멤버 함수를 이용해서 행렬 객체를 생성할 수 있다. */</span>
<span class="n">Mat</span> <span class="n">mat1</span> <span class="o">=</span> <span class="n">Mat</span><span class="o">::</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">CV_32SC1</span><span class="p">);</span> <span class="c1">// 0 matrix</span>
<span class="n">Mat</span> <span class="n">mat2</span> <span class="o">=</span> <span class="n">Mat</span><span class="o">::</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">CV_32SC1</span><span class="p">);</span> <span class="c1">// 1 matrix</span>
<span class="n">Mat</span> <span class="n">mat3</span> <span class="o">=</span> <span class="n">Mat</span><span class="o">::</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">CV_32SC1</span><span class="p">);</span> <span class="c1">// 단위 행렬 I, identity matrix</span>

<span class="kt">float</span> <span class="n">data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">};</span>
<span class="n">Mat</span> <span class="nf">mat4</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">CV_32FC1</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span> <span class="c1">// data라는 배열을 참조하여 행렬 원소를 만들어라, (rows,cols, type, data)</span>
<span class="cm">/* 1 2 3
   4 5 6 */</span>

<span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// 배열을 참조하고 있다는 것을 주의해야 한다.</span>
<span class="cm">/* 100 2 3
     4 5 6 */</span>

<span class="n">Mat</span> <span class="n">mat5</span> <span class="o">=</span> <span class="p">(</span><span class="n">Mat_</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>   <span class="c1">// opencv에서 제공하는 Mat_ 탬플릿 클래스와 shift 연산자를 사용하여 생성하는 방법</span>
<span class="n">Mat</span> <span class="n">mat6</span> <span class="o">=</span> <span class="n">Mat_</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">({</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}));</span>  <span class="c1">// 이 두가지 방법은 잘 사용하지 않는다.</span>

<span class="n">mat4</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span><span class="n">CV_8UC3</span><span class="p">);</span> <span class="c1">// uchar, 3channels , 기존에 만들어져 있는 Mat객체의 데이터를 지우고 새로 입력하는 방법</span>
<span class="n">mat5</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">CV_32FC1</span><span class="p">);</span> <span class="c1">// float, 1channel , (rows, cols, type), 초기값을 지정하는 것은 없기에 `=` 나 setTo로 입력해야 한다.</span>

<span class="n">mat4</span> <span class="o">=</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// 초기값, 즉 색상을 지정</span>
<span class="n">mat5</span><span class="p">.</span><span class="n">setTo</span><span class="p">(</span><span class="mf">1.</span><span class="n">f</span><span class="p">);</span>        <span class="c1">// 모든 요소를 1.f로 지정</span>
</pre></table></code></div></div><p><br /></p><ul><li>Mat클래스 객체의 참조와 복사</ul><p><code class="language-plaintext highlighter-rouge">=</code> 연산자는 참조, 즉 얕은 복사를 수행하고, clone이나 copyTo는 깊은 복사를 수행한다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="n">Mat</span> <span class="n">img1</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s">"dog.bmp"</span><span class="p">);</span>

<span class="n">Mat</span> <span class="n">img2</span> <span class="o">=</span> <span class="n">img1</span><span class="p">;</span>  <span class="c1">// 생성자 인자를 초기화하는 = 연산자, Mat img2(img1);, 얕은 복사</span>
<span class="n">Mat</span> <span class="n">img3</span><span class="p">;</span>
<span class="n">img3</span> <span class="o">=</span> <span class="n">img1</span><span class="p">;</span>      <span class="c1">// 대입하는 = 연산자, 얕은 복사</span>

<span class="n">Mat</span> <span class="n">img4</span> <span class="o">=</span> <span class="n">img1</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>  <span class="c1">// clone은 img1의 복사본을 img4로 복사하는 것</span>
<span class="n">Mat</span> <span class="n">img5</span><span class="p">;</span>
<span class="n">img1</span><span class="p">.</span><span class="n">copyTo</span><span class="p">(</span><span class="n">img5</span><span class="p">);</span>        <span class="c1">// img1의 데이터를 img5에 복사되는 것</span>

<span class="n">img1</span><span class="p">.</span><span class="n">setTo</span><span class="p">(</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>  <span class="c1">// yellow, img1만 바꿨을 때 1,2,3이 모두 바뀌는 것을 볼 수 있음</span>

<span class="n">imshow</span><span class="p">(</span><span class="s">"img1"</span><span class="p">,</span> <span class="n">img1</span><span class="p">);</span>
<span class="n">imshow</span><span class="p">(</span><span class="s">"img2"</span><span class="p">,</span> <span class="n">img2</span><span class="p">);</span>
<span class="n">imshow</span><span class="p">(</span><span class="s">"img3"</span><span class="p">,</span> <span class="n">img3</span><span class="p">);</span>
<span class="n">imshow</span><span class="p">(</span><span class="s">"img4"</span><span class="p">,</span> <span class="n">img4</span><span class="p">);</span>
<span class="n">imshow</span><span class="p">(</span><span class="s">"img5"</span><span class="p">,</span> <span class="n">img5</span><span class="p">);</span>

<span class="n">waitKey</span><span class="p">();</span>
<span class="n">destroyAllWindows</span><span class="p">();</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day2/matop2be.png" cation="before" data-proofer-ignore> <img data-src="/assets/img/dev/week5/day2/matop2af.png" cation="after" data-proofer-ignore></p><p>간단하게 보면 img1 == img2를 하면 같은 메모리 공간을 참조하는 것이다. 그러나 img3 = img1.clone()을 하게되면 메모리 공간을 카피해서 메모리자체를 새로 생성하게 된다. 그래서 img1의 데이터를 변경하게 되면 img2는 바뀐 메모리의 데이터를 참조하기에 함께 바뀌지만, img3은 다른 메모리를 참조하기 때문에 변경되지 않는다.</p><p><br /></p><ul><li>Mat 클래스 객체에서 부분 행렬 추출<ul><li>Mat 객체에 대해 ()연산자를 이용하여 부분 영상 추출이 가능하다.<li>()연산자 안에는 Rect 객체를 지정하여 부분 영상의 위치와 크기를 지정<li>참조를 활용하여 ROI(Region of Interest) 연산 수행 가능</ul></ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="n">Mat</span> <span class="n">img1</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s">"cat.bmp"</span><span class="p">);</span>

<span class="n">Mat</span> <span class="n">img2</span> <span class="o">=</span> <span class="n">img1</span><span class="p">(</span><span class="n">Rect</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">340</span><span class="p">,</span><span class="mi">240</span><span class="p">));</span>         <span class="c1">// (x,y,w,h), 저 사각형 크기로 잘라낸 데이터만 img2에 저장</span>
<span class="n">Mat</span> <span class="n">img3</span> <span class="o">=</span> <span class="n">img1</span><span class="p">(</span><span class="n">Rect</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">340</span><span class="p">,</span><span class="mi">240</span><span class="p">)).</span><span class="n">clone</span><span class="p">();</span> <span class="c1">// == img2.clone() 저 사각형 크기로 된 부분을 깊은 복사</span>

<span class="n">img2</span> <span class="o">=</span> <span class="o">~</span><span class="n">img2</span><span class="p">;</span> <span class="c1">// '~' 는 opencv에서 not 연산을 수행하는 연산자로, 이것을 반전시키는 방법이다.</span>

<span class="n">imshow</span><span class="p">(</span><span class="s">"img1"</span><span class="p">,</span><span class="n">img1</span><span class="p">);</span>
<span class="n">imshow</span><span class="p">(</span><span class="s">"img2"</span><span class="p">,</span><span class="n">img2</span><span class="p">);</span>
<span class="n">imshow</span><span class="p">(</span><span class="s">"img3"</span><span class="p">,</span><span class="n">img3</span><span class="p">);</span>

<span class="n">waitKey</span><span class="p">();</span>
<span class="n">destroyAllWindows</span><span class="p">();</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day2/matop3.png" data-proofer-ignore></p><p><br /></p><ul><li>영상의 픽셀 값 참조</ul><p>이는 openCV에서 제공하는 기능이 아닌 자신만의 새로운 기능을 추가할 때 많이 사용된다. 기본적으로 Mat::data 멤버 변수가 픽셀 데이터 메모리 공간을 가리키지만, Mat 클래스 멤버 함수를 사용하는 방법을 권장한다.</p><div class="table-wrapper"><table><thead><tr><th>사용 함수<th>설명<tbody><tr><td>Mat::data<td>메모리 연산이 잘못될 경우 프로그램이 비정상적으로 종료될 수 있다. 접근 식 : addr(Mi,j) = M.data + M.step[0] * i + M.step[1] * j, 이 때, i,j는 각각 행, 열번호에 해당하고 step[0]는 한 행의 byte크기, step[1]은 원소 하나의 byte크기<tr><td>Mat::at()<td>좌표 지정이 직관적이다. 임의 좌표에 접근할 수 있다.<tr><td>Mat::ptr()<td>Mat::at()보다 빠르게 동작한다. 행 단위 연산을 수행할 때 유리하다<tr><td>MatIterator_<td>좌표를 지정하지 않아서 안전하지만 성능이 느리다.</table></div><p><br /></p><ul><li><strong>Mat::at 함수 사용방법</strong></ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="n">_Tp</span><span class="o">&amp;</span> <span class="n">Mat</span><span class="o">::</span><span class="n">at</span><span class="p">(</span><span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">)</span>
</pre></table></code></div></div><p>y: 참조할 행 번호</p><p>x: 참조할 열 번호</p><p>반환값 : (_Tp&amp; 타입으로 캐스팅된) y행 x열 원소 값 참조</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">Mat</span> <span class="n">mat1</span> <span class="o">=</span> <span class="n">Mat</span><span class="o">::</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">CV_8UC1</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">mat1</span><span class="p">.</span><span class="n">rows</span><span class="p">;</span> <span class="n">y</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">mat1</span><span class="p">.</span><span class="n">cols</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">mat1</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">++</span><span class="p">;</span> <span class="c1">// at함수를 사용할 때 현재 mat클래스의 객체가 어떤 타입을 가지고 있는지 지정해야 한다. 이를 통해 참조 뿐만 아니라 설정도 가능하다.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">==</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">y</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">mat1</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">++</span><span class="p">;</span> <span class="c1">// 픽셀 값 +1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">mat1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day2/matop4.png" data-proofer-ignore></p><p><br /></p><ul><li><strong>Mat::ptr() 함수 사용 방법</strong></ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">_Tp</span><span class="p">&gt;</span> <span class="n">_Tp</span><span class="o">*</span> <span class="n">Mat</span><span class="o">::</span><span class="n">ptr</span><span class="p">(</span><span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
</pre></table></code></div></div><p>y : 참조할 행 번호</p><p>반환값 : (_Tp* 타입으로 캐스팅된) y번 행의 시작 주소</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">mat1</span><span class="p">.</span><span class="n">rows</span><span class="p">;</span> <span class="n">y</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">uchar</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">mat1</span><span class="p">.</span><span class="n">ptr</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">);</span> <span class="c1">// 1개의 인자를 받게 되고, 데이터 타입을 지정해야 하고, 지정한 포인터를 반환한다.</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">mat1</span><span class="p">.</span><span class="n">cols</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">p</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>uchar* p = mat1.ptr<uchar>(0) 을 하면 p는 mat1의 0번 행을 가리키게 된다. (1)이면 p는 mat1의 1번 행을 가리키게 될 것이다.</uchar></p><p><br /></p><ul><li><strong>MatIterator_&lt;T&gt; 반복자 사용 방법</strong></ul><p>openCV는 mat 클래스와 함께 사용할 수 있는 반복자 클래스 템플릿인 MatIterator_를 제공한다. MatIterator_는 클래스 템플릿이므로 사용할 때는 Mat 행렬 타입에 맞는 자료형을 명시해줘야 한다. Mat::begin() 함수는 행렬의 첫번째 원소 위치를 반환, Mat::end() 함수는 행렬의 <strong>마지막 원소 바로 다음 위치를 반환</strong>한다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="n">MatIterator_</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">mat1</span><span class="p">.</span><span class="n">begin</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">mat1</span><span class="p">.</span><span class="n">end</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
		<span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">)</span><span class="o">++</span><span class="p">;</span>
	<span class="p">}</span>
</pre></table></code></div></div><p>하지만 이 방법은 성능이 좋지 않아 잘 사용하지 않는다.</p><p><br /></p><ul><li>기초 행렬 연산</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kt">float</span> <span class="n">data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
<span class="n">Mat</span> <span class="nf">mat1</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">CV_32FC1</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>     <span class="c1">// 2x2 행렬의 원소는 data, type은 float32 1channel</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"mat1:</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">mat1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// 1 1;2 3</span>

<span class="n">Mat</span> <span class="n">mat2</span> <span class="o">=</span> <span class="n">mat1</span><span class="p">.</span><span class="n">inv</span><span class="p">();</span>              <span class="c1">// 역행렬 함수</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"mat2:</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">mat2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// 3 -1;-2 1</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"mat1.t():</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">mat1</span><span class="p">.</span><span class="n">t</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 전치행렬 함수</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"mat1 + 3:</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">mat1</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 전체 +3</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"mat1 + mat2:</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">mat1</span> <span class="o">+</span> <span class="n">mat2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 행렬 덧셈</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"mat1 * mat2:</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">mat1</span> <span class="o">*</span> <span class="n">mat2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 행렬 곱셈</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day2/matrixcal.png" data-proofer-ignore></p><p><br /></p><p><br /></p><h2 id="inputarray-클래스">InputArray 클래스 <a href="#inputarray-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Inputarray 클래스 : 주로 Mat 클래스를 대체하는 프록시 클래스로 OpenCV 함수에서 입력 인자로 사용된다.</p><p>사용자가 명시적으로 _InuputArray 클래스의 인스턴스 또는 변수를 생성하여 사용하는 것은 금지되어 있다.</p><p>imshow나 imwrite를 할 시 2번째 인자의 경우 InputArray 클래스로 정의가 되어 있다. Mat이 아닌 inputarray인 이유는 mat이외에 Mat_<T>,Matx&lt;T,m,n&gt; 등 다양한 것들을 입력 받기 위해서다. 그러나 대체로는 **Mat**을 사용한다.</T></p><p><br /></p><h2 id="outputarray-클래스">OutputArray 클래스 <a href="#outputarray-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>outputarray 클래스 : opencv함수에서 출력 인자로 사용되는 프록시 클래스이다.</p><p>이 또한, Mat이 아닌 OutputArray인 이유도 다양한 타입을 받기 위해서이나, 대체로 Mat을 주로 사용한다.</p><p><br /></p></div><div class="post-tail-wrapper text-muted"><div style="text-align: left;"> <a href="http://hits.dwyl.com/dkssud8150.github.io/posts/opencvclass/" target="_blank"> <img data-src="http://hits.dwyl.com/dkssud8150.github.io/posts/opencvclass.svg" data-proofer-ignore> </a></div><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/classlog/'>Classlog</a>, <a href='/categories/devcourse/'>devcourse</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/devcourse/" class="post-tag no-text-decoration" >devcourse</a> <a href="/tags/opencv/" class="post-tag no-text-decoration" >opencv</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[데브코스] 5주차 - OpenCV primary Class - JaeHo Yoon&amp;url=https://dkssud8150.github.io/posts/opencvclass/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[데브코스] 5주차 - OpenCV primary Class - JaeHo Yoon&amp;u=https://dkssud8150.github.io/posts/opencvclass/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://dkssud8150.github.io/posts/opencvclass/&amp;text=[데브코스] 5주차 - OpenCV primary Class - JaeHo Yoon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://dkssud8150.github.io/posts/opencvclass/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script></div><script src="https://utteranc.es/client.js" repo="dkssud8150/dkssud8150.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gitpage/">[깃허브 프로필 꾸미기] github 프로필 만들기</a><li><a href="/posts/product/">[깃허브 프로필 꾸미기] productive box 만들기</a><li><a href="/posts/regex/">[데브코스] 2주차 - linux 기초(REGEX)</a><li><a href="/posts/Kfold/">KFold Cross Validation 과 StratifiedKFold</a><li><a href="/posts/cmake/">[데브코스] 17주차 - CMake OpenCV, Eigen, Pangolin install </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/opencvinstall/"><div class="card-body"> <em class="timeago small" date="2022-03-14 18:27:00 +0900" >Mar 14, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 5주차 - OpenCV abstract and install</h3><div class="text-muted small"><p> OpenCV 개요 openCV란 Open Source로 개발되고 있는 컴퓨터 비전과 머신러닝에 대한 소프트웨어 라이브러리다. 공식 사이트 OpenCV를 사용하는 이유 무료 사용 : BSD/Apache 2 라이선스를 따르기 때문에 학교/회사 등으로 상업적 사용도 가능 multiple interface: c, c++, python, ja...</p></div></div></a></div><div class="card"> <a href="/posts/opencvimread/"><div class="card-body"> <em class="timeago small" date="2022-03-14 21:15:00 +0900" >Mar 14, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 5주차 - OpenCV Print image file and Setting for OpenCV</h3><div class="text-muted small"><p> 영상 파일 불러오기 가지고 있던 lenna.bmp 파일을 불러와서 화면에 출력하는 OpenCV 예제 프로그램 편의상 이전 강의에서 작성한 HelloCV 프로젝트에 필요한 소스 코드를 추가 아래는 lenna.bmp 파일이다. 현재 폴더에 있는 lenna.bmp 파일을 불러와서 화면에 출력하는 OpenCV 예제 코드다. #in...</p></div></div></a></div><div class="card"> <a href="/posts/imgproc/"><div class="card-body"> <em class="timeago small" date="2022-03-15 18:38:00 +0900" >Mar 15, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 5주차 - OpenCV video processing</h3><div class="text-muted small"><p> 카메라와 동영상 처리 VideoCapture 클래스 OpenCV에서는 카메라와 동영상으로부터 프레임(frame)을 받아오는 작업을 VideoCapture 클래스 하나로 처리한다. 일단 카메라와 동영상을 여는 작업이 수행되면, 이후에는 매 프레임을 받아오는 공통의 작업을 수행한다. 캠과 파일을 open()으로 열게 되면 read()를 통해 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/opencvimread/" class="btn btn-outline-primary" prompt="Older"><p>[데브코스] 5주차 - OpenCV Print image file and Setting for OpenCV</p></a> <a href="/posts/imgproc/" class="btn btn-outline-primary" prompt="Newer"><p>[데브코스] 5주차 - OpenCV video processing</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">JaeHo YooN</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NC7MWHVXJE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NC7MWHVXJE'); }); </script>