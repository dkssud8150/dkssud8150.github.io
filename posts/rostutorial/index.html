<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[데브코스] 3주차 - ROS Abstract and Turtlesim" /><meta name="author" content="JaeHo YooN" /><meta property="og:locale" content="en" /><meta name="description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><meta property="og:description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><link rel="canonical" href="https://dkssud8150.github.io/posts/rostutorial/" /><meta property="og:url" content="https://dkssud8150.github.io/posts/rostutorial/" /><meta property="og:site_name" content="JaeHo Yoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-28T13:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[데브코스] 3주차 - ROS Abstract and Turtlesim" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@JaeHo YooN" /><meta name="google-site-verification" content="znvuGsQGYxMZPBslC4XG6doCYao6Y-fWibfGlcaMHH8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JaeHo YooN"},"dateModified":"2022-03-21T00:26:15+09:00","datePublished":"2022-02-28T13:00:00+09:00","description":"Do focus on developing ‘your ability’ rather than waste time on making you famous.","headline":"[데브코스] 3주차 - ROS Abstract and Turtlesim","mainEntityOfPage":{"@type":"WebPage","@id":"https://dkssud8150.github.io/posts/rostutorial/"},"url":"https://dkssud8150.github.io/posts/rostutorial/"}</script><title>[데브코스] 3주차 - ROS Abstract and Turtlesim | JaeHo Yoon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHo Yoon"><meta name="application-name" content="JaeHo Yoon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/shin_chan.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaeHo Yoon</a></div><div class="site-subtitle font-italic">Mamba Mentality</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fab fa-angellist ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dkssud8150" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hoya58150','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.notion.so/18490713817d403696812c57d0abe730" aria-label="notion" target="_blank" rel="noopener"> <i class="fab fa-battle-net"></i> </a> <a href="https://www.linkedin.com/in/jaeho-yoon-90b62b230" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/jai_ho8150/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[데브코스] 3주차 - ROS Abstract and Turtlesim </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[데브코스] 3주차 - ROS Abstract and Turtlesim</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/dkssud8150">JaeHo YooN</a> </em></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-02-28 13:00:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Mon, Feb 28, 2022, 1:00 PM +0900" >Feb 28, 2022</em> </span> <span> Updated <em class="timeago" date="2022-03-21 00:26:15 +0900 " data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 21, 2022, 12:26 AM +0900" >Mar 21, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5246 words"> <em>29 min</em> read</span></div></div></div><div class="post-content"><p><br /></p><h1 id="ros-기초">ROS 기초</h1><p><br /></p><h2 id="ros-기능-소개">ROS 기능 소개 <a href="#ros-기능-소개" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://www.ros.org">https://www.ros.org</a></p><p>ros : robot operating system</p><ul><li>오픈소스 로봇 운영체제<ul><li>소스 무료 공개<li>개방형 구조</ul><li>로봇 소프트웨어를 개발하는 데 필요한 소프트웨어의 집합체<ul><li>소프트웨어 프레임워크</ul><li>메타 운영체제 (meta os), 미들웨어 (middleware)<ul><li>소프트웨어 모듈 + 라이브러리 집합 + 도구 집합</ul></ul><p>ROS는 자동차 제어를 위한 미들웨어라고 할 수 있다. -&gt; 각종 센서와 모터를 프로그래머가 편하게 사용할 수 있도록 지원</p><p><br /></p><p><img data-src="/assets/img/dev/week3/day1/ros.png" data-proofer-ignore></p><p>ros는 실제 차에는 적용하기 힘드나 자이카와 같은 차에는 적용하기 적합하다.</p><h2 id="ros-특징">ROS 특징 <a href="#ros-특징" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>로봇 sw를 만들기 위한 코드의 재사용이 용이한 환경제공이 목표<ul><li>다양한 프로그래밍 언어를 지원 : C++, python<li>표준화된 ros인터페이스를 따르는 hw 와 sw를 편하게 엮을 수 있음<li>하드웨어 부품과 소프트웨어 부품을 조립하여 여러 응용 구성 가능<li>대규모 실행 시스템 및 프로세스에도 적용 가능</ul><li>다양한 도구들을 함께 제공<ul><li>RVIZ, RQT, Gazebo</ul><li>다양한 os 환경에서 통일된 방법으로 상호작용을 구현하는 것이 가능<ul><li>linux, os x, windows, android, ios<li>표준화된 통신 프로트콜을 따르는 이기종간의 메시지 교환이 가능</ul></ol><p><br /></p><p><br /></p><h2 id="ros-도구">ROS 도구 <a href="#ros-도구" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="rviz">RVIZ <a href="#rviz" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>시각화 도구<li>센서데이터를 비롯한 주변환경 변화를 시각화</ul><p><img data-src="/assets/img/dev/week3/day1/rviz.png" data-proofer-ignore></p><h3 id="rqt">RQT <a href="#rqt" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>Qt 기반의 GUI 응용 개발 도구<li>노드 연결 정보를 그래프로 표현<li>사용자 상호작용을 UI를 갖춘 응용 개발에 이용<li>rqt_graph<ul><li>노드와 토픽의 관계 정보를 그래프로 출력</ul></ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rqt_graph
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week3/day1/rqt.png" data-proofer-ignore></p><p><br /></p><h3 id="gazebo">GAZEBO <a href="#gazebo" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>물리 엔진 기반의 3차원 시뮬레이터<li>시뮬레이터 제작 및 모델링에 이용</ul><p><br /></p><h2 id="ros버전">ros버전 <a href="#ros버전" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>ros indigo<li>ros <strong>kinetic</strong><li>ros <strong>melodic</strong></ul><blockquote><p>ros에서의 통신 - 노드(node) → 토픽(topic) → 노드(node) - 프로세스 → 메시지 → 프로세스</p></blockquote><p><br /></p><h1 id="ros-핵심-기능">ros 핵심 기능</h1><p>노드간 통신을 기반으로 전체 시스템을 구동시킬 수 있다. 노드란 하드웨어 부품 또는 소프트웨어 모듈에 하나씩 할당되는 프로세스이다.</p><p><img data-src="/assets/img/dev/week3/day1/master.png" data-proofer-ignore></p><ul><li>노드는 os의 도움을 받아 하드웨어 장치들을 제어한다.<li>노드들은 마스터의 도움을 받아 서로 메시지를 주고 받는다.<li>마스터는 노드간의 만남을 주선해주는 주선책과 같은 역할을 한다.</ul><p><img data-src="/assets/img/dev/week3/day1/master2.png" data-proofer-ignore></p><p>서로 분리된 하드웨어 장치 안에 있는 노드들이 네트워크 연결을 통해 서로 통신하면서 하나의 단일 시스템으로서 동작하는 것이 가능하다.</p><p><br /></p><h1 id="ros-구현-사례">ros 구현 사례</h1><p><img data-src="/assets/img/dev/week3/day1/fullstream.png" data-proofer-ignore></p><ul><li>라이다 + 카메라 + 모터 + sw모듈1 + sw모듈2<li>이는 하드웨어 장치 3개와 소프트웨어 모듈 2개를 함께 엮어서 원하는 기능을 구현<li>라이다와 카메라 정보를 상황인지 sw가 분석한 후 결과를 운전판단 sw로 보내고, 운전판단 sw가 제어명령을 생성해서 모터로 보내 차량을 움직이게 함<li>급제동 sw노드를 한 개 더 만들어서 라이다를 통해 거리가 너무 가까워지면 또는 급박한 상황일 때 빠르게 모터를 제어한다.</ul><p><br /></p><p><br /></p><h1 id="기본-용어">기본 용어</h1><h2 id="마스터master">마스터(master) <a href="#마스터master" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>서로 다른 노드들 사이의 통신을 총괄 관리<li>통상 ROS Core이라 부른다.</ul><h2 id="노드node">노드(node) <a href="#노드node" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>실행가능한 최소의 단위, 프로세스로 이해할 수 있다.<li>ROS에서 발생하는 통신(메시지 송/수신)의 주체<li>HW장치에 대해 하나씩의 노드, SW모듈에 대해 하나씩의 노드 할당</ul><h2 id="토픽topics">토픽(Topics) <a href="#토픽topics" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>노드와 노드가 주고받는 데이터<li>토픽 안에 들어 있는 실제 데이터를 메시지라 부른다.<li>예: 센서데이터, 카메라 이미지 ,액츄에이터 제어명령…</ul><h2 id="발행자publisher">발행자(publisher) <a href="#발행자publisher" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>특정 토픽에 메시지를 담아 외부로 송신하는 노드<li>예 : 센서, 카메라, 모터제어 알고리즘…</ul><h2 id="구독자subscribers">구독자(subscribers) <a href="#구독자subscribers" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>특정 토픽에 담겨진 메시지를 수신하는 노드<li>예 : 액츄에이터 제어기, 데이터 시각화 도구 …</ul><p><img data-src="/assets/img/dev/week3/day1/turtlerqt.png" data-proofer-ignore></p><p><br /></p><h2 id="패키지-packages">패키지 packages <a href="#패키지-packages" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>하나 이상의 노드와 노드의 실행을 위한 정보 등을 묶어 놓은 단위<li>노드, 라이브러리, 데이터, 파라미터 등을 포함</ul><hr /><h1 id="ros-응용-예">ROS 응용 예</h1><ul><li>센서</ul><p><img data-src="/assets\img\dev\week3\day1\sensor.png" caption="sensor" data-proofer-ignore></p><p>각각 어느 토픽에 어떤 형태의 메시지를 발행하는지가 정해져 있다.</p><p><br /></p><ul><li>액츄에이터</ul><p><img data-src="/assets\img\dev\week3\day1\actuator.png" caption="actuator" data-proofer-ignore></p><p>어느 토픽에 어떤 메시지를 발행하면 어떻게 동작하는지가 정해져 있다.</p><p><br /></p><p><br /></p><h1 id="ros-노드간-통신-기본-과정">ROS 노드간 통신 기본 과정</h1><p><img data-src="/assets\img\dev\week3\day1\master.png" data-proofer-ignore></p><p>통신이 이루어지기 이전에 통신을 원하는 노드는 마스터에 의뢰하여 연결해야 하는 노드의 정보(주소)를 얻어오고, 서로 접속정보를 교환한다.</p><p><img data-src="/assets\img\dev\week3\day1\servernetwork.png" data-proofer-ignore></p><p>통신환경 구축이 완료되고 나면 노드간 통신은 마스터를 거치지 않고 직접 이루어진다. 두 노드에는 이름과 번호, 역할이 지정되어 있다.</p><p><br /></p><h1 id="ros노드간-통신의-두-가지-방식">ros노드간 통신의 두 가지 방식</h1><h2 id="1-토픽-방식의-통신">1. 토픽 방식의 통신 <a href="#1-토픽-방식의-통신" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><strong>일방적</strong>이고 지속적인 메시지 전송<li>1:1 뿐만 아니라 1:N , N:N 통신도 가능<li>자율주행시 이 방식을 사용함</ul><p><img data-src="/assets\img\dev\week3\day1/topic.png" data-proofer-ignore></p><h2 id="2-서비스-방식의-통신">2. 서비스 방식의 통신 <a href="#2-서비스-방식의-통신" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>서버가 제공하는 서비스에 클라이언트가 요청을 보내고 응답을 받는 방식<li><strong>양방향 통신</strong>, <strong>일회성 메시지 송수신</strong></ul><p><img data-src="/assets\img\dev\week3\day1\service.png" data-proofer-ignore></p><p><br /></p><p><br /></p><h1 id="ros-시나리오">ROS 시나리오</h1><ol><li>마스터 (roscore) 시동<ul><li>통신이 이루어지려면 우선 roscore가 실행되고 있어야 한다.</ul></ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>roscore
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\node1.png" data-proofer-ignore></p><ol><li>구독자(subscriber) 노드 구동<ul><li>특정 토픽(topic)에 발행되는 메시지를 수신하기를 요청</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node2.png" data-proofer-ignore></p><ol><li>발행자(publisher) 노드 구동<ul><li>특정 토픽(topic) 메시지를 발행하겠다는 의사를 전달<li>토픽 이름의 특정 타입을 원하는 사람이 있으면 발행하라는 것을 마스터에게 전달</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node3.png" data-proofer-ignore></p><ol><li>노드 정보 전달<ul><li>마스터가 발행자 정보를 구독자에게 전달</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node4.png" data-proofer-ignore></p><ol><li>노드간 접속 요청:<ul><li>마스터로부터 받은 정보를 통해 구독자 노드가 발행자 노드에게 TCPROS 접속을 요청</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node5.png" data-proofer-ignore></p><ol><li>노드간 접속 요청<ul><li>발행자 노드가 자신의 TCPROS URI 주소와 포트번호를 전송</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node6.png" data-proofer-ignore></p><ol><li>TCPROS 접속<ul><li>TCPROS를 이용하여 퍼블리셔 노드와 서브스크라이버 노드 사이에 소켓(socket) 연결이 이루어짐</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node7.png" data-proofer-ignore></p><ol><li>메시지 전송<ul><li>발행자 노드가 구독자 노드에게 메시지 전송(토픽)</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node8.png" data-proofer-ignore></p><ol><li>메시지 전송 반복<ul><li>접속이 한번 이루어진 뒤에는 별도 절차없이 지속적으로 메시지 송수신</ul></ol><p><img data-src="/assets\img\dev\week3\day1\node9.png" data-proofer-ignore></p><p><br /></p><p><br /></p><h1 id="ros-명령어">ROS 명령어</h1><ol><li>ros 셀 명령어<ul><li><strong>roscd: 지정한 ros패키지 폴더로 이동</strong><li>rosls: ros 패키지 파일 목록 확인<li>rosed: ros 패키지 파일 편집<li>roscp: ros 패키지 파일 복사</ul><li>ros 실행 명령어<ul><li><strong>roscore:</strong> <strong>master+rosout+parameter server</strong><li><strong>rosrun: 패키지 노드 실행</strong><li><strong>roslaunch: 패키지 노드를 여러 개 실행</strong><li>rosclean: ros 로그 파일 검사 및 삭제</ul><li>ros 정보 명령어<ul><li><strong>rostopic: 토픽 정보 확인</strong><li><strong>rosnode: 노드 정보 확인</strong><li><strong>rosbag: 메시지 기록, 재생</strong></ul><li>ros catkin 명령어<ul><li><strong>catkin_create_pkg: catkin 빌드 시스템으로 패키지 생성</strong><li><strong>catkin_make: catkin 빌드 시스템으로 빌드</strong></ul><li>ros package 명령어<ul><li>rospack: 패키지와 관련된 정보 보기<li>rosinstall: 추가 패키지 설치<li>rosdep: 해당 패키지의 의존성 파일 설치</ul></ol><p><br /></p><ul><li><strong>🎈주요 명령어</strong></ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>ros 기본 시스템이 구동되기 위해 필요한 프로그램들 실행
<span class="nv">$ </span>roscore

rosrun <span class="o">[</span>package name] <span class="o">[</span>node_name]: 패키지에 있는 노드를 선택 실행
<span class="nv">$ </span>rosrun turtlesim turtlesim_node

rosnode <span class="o">[</span>info...]: 노드의 정보를 표시
<span class="nv">$ </span>rosnode info node_name

rostopic <span class="o">[</span>option]: 토픽의 정보를 출력 <span class="o">(</span>메시지 타입, 노드 이름 등<span class="o">)</span>
<span class="nv">$ </span>rostopic info /imu 

roslaunch <span class="o">[</span>package_name] <span class="o">[</span>file.launch]: 파라미터 값과 함께 노드를 실행
<span class="nv">$ </span>roslaunch usb_cam usb_cam-test.launch
</pre></table></code></div></div><p><br /></p><p><br /></p><h1 id="ros-설치">ROS 설치</h1><blockquote><p>ubuntu 버전 : ubuntu 18.04</p></blockquote><p>1.ros를 제공하는 software repository 등록</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/ros-latest.list'</span>
<span class="nv">$ </span><span class="nb">cat</span> /etc/apt/sources.list.d/ros-latest.list
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\repo.png" data-proofer-ignore></p><p><br /></p><p>2.apt key 셋업</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt-key adv <span class="nt">--keyserver</span> <span class="s1">'hkp://keyserver.ubuntu.com:80'</span> <span class="nt">--recv-key</span> C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\aptkey.png" data-proofer-ignore></p><p><br /></p><p>3.패키지 설치</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt update

필요한 추가적인 것들 다 설치
<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>ros-melodic-desktop-full 
</pre></table></code></div></div><p><br /></p><p>4.쉘 환경 설정</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"source /opt/ros/melodic/setup.bash"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</pre></table></code></div></div><p><br /></p><p>5.추가로 필요한 도구 설치</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>python-rosdep python-rosinstall python-rosinstall-generator python-wstool build-essential
</pre></table></code></div></div><p>6.rosdep 초기화</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>rosdep init
<span class="nv">$ </span><span class="nb">sudo </span>rosdep update
</pre></table></code></div></div><p><br /></p><p><a href="http://wiki.ros.org/melodic/Installation/Ubuntu">참고 자료 - ROS 공식 사이트</a></p><p><br /></p><h1 id="roscore-실습">roscore 실습</h1><p>1.roscore (나중에 &lt;ctrl+c&gt;를 누르면 종료</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>roscore
</pre></table></code></div></div><p><br /></p><p>2.(다른 터미널에서) resnode list</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rosnode list
</pre></table></code></div></div><p><br /></p><p>오류가 난다면</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nv">$ </span>apt update

업그레이드할 것이 있다면 업그레이드 진행
<span class="nv">$ </span>apt upgrade

<span class="nv">$ </span>rosnode list
</pre></table></code></div></div><p><br /></p><h1 id="ros-작업-공간-생성">ROS 작업 공간 생성</h1><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/xycar_ws/src
<span class="nv">$ </span><span class="nb">cd </span>xycar_ws
<span class="nv">$ </span>catkin_make
</pre></table></code></div></div><p>이 작업 공간을 ros 프로그래밍 공간으로 사용할 것이다.</p><p><code class="language-plaintext highlighter-rouge">/src</code>: 소스코드는 여기에 넣음</p><p><br /></p><h2 id="catkin_make">catkin_make <a href="#catkin_make" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>ros의 workspace에서 새로운 소스코드 파일이나 패키지가 만들어지면 catkin_make를 명령한다.<ul><li>이 명령을 통해 빌드(build)작업을 진행한다.<li>ROS 프로그래밍 작업과 관련 있는 모든 것들을 깔끔하게 정리해서 최신 상태로 만드는 작업<li>환경 정리와 같음</ul></ul><p><br /></p><h1 id="ros-작업환경-설정">ros 작업환경 설정</h1><p>ros 작업에 필요한 환경변수 설정을 위해 .bashrc 파일 수정</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>gedit ~/.bashrc
</pre></table></code></div></div><p>아래 내용 작성</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre># 자주 쓰는 명령어를 정의해놓는 것
alias cm='cd ~/xycar_ws &amp;&amp; catkin_make' 
alias cs=’cd ~/xycar_ws/src’

source /opt/ros/melodic/setup.bash
source ~/xycar_ws/devel/setup.bash

# 환경 변수 설정
export ROS_MASTER_URI=http://localhost:11311
export ROS_HOSTNAME=localhost
</pre></table></code></div></div><p>그다음 수정한 내용을 시스템에 반영하기 위해 다음 코드를 실행한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">source</span> ~/.bashrc

환경 변수가 잘 적용되었는지 확인
<span class="nv">$ </span><span class="nb">printenv</span> | <span class="nb">grep </span>ROS
<span class="nv">ROS_ETC_DIR</span><span class="o">=</span>/opt/ros/melodic/etc/ros
<span class="nv">ROS_ROOT</span><span class="o">=</span>/opt/ros/melodic/share/ros
...
</pre></table></code></div></div><p><br /></p><h1 id="ros예제-프로그램-구동-실습">ROS예제 프로그램 구동 실습</h1><p>publisher</p><ul><li>이름: teleop_turtle<li>보내는 토픽: turtle1/cmd_vel<li>담고 있는 메시지: geometry_msgs/Twist</ul><p><br /></p><p>subscriber</p><ul><li>이름: turtlesim<li>받고자하는 토픽: turtle1/cmd_vel<li>토픽이 담고 있어야 하는 메시지: geometry_msgs/Twist</ul><h2 id="실행">실행 <a href="#실행" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>총 4개의 터미널을 열어야 한다.</p><p>1.마스터</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>roscore
</pre></table></code></div></div><p><br /></p><p>2.ros node의 확인</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rosnode list
/rosout
</pre></table></code></div></div><p>아무것도 구동하지 않았기에 나오지 않는다.</p><p><br /></p><ol><li>rosrun<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rosrun turtlesim turtlesim_node
</pre></table></code></div></div></ol><p><br /></p><ol><li>roscore와 turtlesim_node가 실행중인 상태일 때<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rosrun turtlesim turtle_teleop_key
</pre></table></code></div></div></ol><p>4번 터미널에서 키보드 방향키를 누르면 거북이가 움직인다.</p><p><br /></p><p>rosnode list를 확인하면 3개의 노드가 보인다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rosnode list
/rosout
/teleop_turtle
/turtlesim
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\rosnodelist.png" data-proofer-ignore></p><p>또는 rqt_graph를 통해 시각화 할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rqt_graph
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\turtlerqt.png" data-proofer-ignore></p><p>어떤 토픽이 이동되는지 보려면 , 또는 그 토픽의 메시지를 보려면</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rostopic list
/rosout
/rosout_agg
/turtle1/cmd_vel
/turtle1/color_sensor
/turtle1/pose

<span class="nv">$ </span>rostopic <span class="nb">echo</span> /turtle1/cmd_vel
linear: 
  x: 0.0
  y: 0.0
  z: 0.0
angular: 
  x: 0.0
  y: 0.0
  z: 2.0
<span class="nt">---</span>
linear: 
  x: 0.0
  y: 0.0
  z: 0.0
angular: 
  x: 0.0
  y: 0.0
  z: <span class="nt">-2</span>.0
<span class="nt">---</span>
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\topiclist.png" data-proofer-ignore></p><p>날아다니는 topic list에 대해 알아보기 위해 rostopic을 실행한다.</p><ul><li>토픽 - 메시지 내용 - 보내거나 받는 노드개수 - pub/sub</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rostopic list <span class="nt">-v</span>

Published topics:
 <span class="k">*</span> /turtle1/color_sensor <span class="o">[</span>turtlesim/Color] 1 publisher
 <span class="k">*</span> <span class="k">**</span>/turtle1/cmd_vel <span class="o">[</span>geometry_msgs/Twist] 1 publisher<span class="k">**</span>
 <span class="k">*</span> /rosout <span class="o">[</span>rosgraph_msgs/Log] 2 publishers
 <span class="k">*</span> /rosout_agg <span class="o">[</span>rosgraph_msgs/Log] 1 publisher
 <span class="k">*</span> /turtle1/pose <span class="o">[</span>turtlesim/Pose] 1 publisher

Subscribed topics:
 <span class="k">*</span> <span class="k">**</span>/turtle1/cmd_vel <span class="o">[</span>geometry_msgs/Twist] 1 subscriber<span class="k">**</span>
 <span class="k">*</span> /rosout <span class="o">[</span>rosgraph_msgs/Log] 1 subscriber
</pre></table></code></div></div><p>rostopic type을 통해 메시지의 타입과 구성을 볼 수 있다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rostopic <span class="nb">type</span> /turtle1/cmd_vel
geometry_msgs/Twist

<span class="nv">$ </span>rosmsg show geometry_msgs/Twist
geometry_msgs/Vector3 linear
  float64 x
  float64 y
  float64 z
geometry_msgs/Vector3 angular
  float64 x
  float64 y
  float64 z
</pre></table></code></div></div><p><br /></p><h1 id="토픽-직접-발행하기">토픽 직접 발행하기</h1><p>토픽 1번만 보내기</p><ul><li>rostopic pub [-발행 횟수] [토픽 이름] [메시지 타입] – ‘메시지 내용’</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>1번만 보내기
<span class="nv">$ </span>rostopic pub <span class="nt">-1</span> /turtle1/cmd_vel geometry_msgs/Twist <span class="nt">--</span> <span class="s1">'[2.0,0.0,0.0]'</span> <span class="s1">'[0.0,0.0,1.8]'</span>
publishing and latching message <span class="k">for </span>3.0 seconds
</pre></table></code></div></div><p>실행 전</p><p><img data-src="/assets\img\dev\week3\day1\turtle1.png" data-proofer-ignore></p><p>실행 후</p><p><img data-src="/assets\img\dev\week3\day1\turtle2.png" data-proofer-ignore></p><p><br /></p><p>토픽 계속 보내기</p><ul><li>rostopic pub [토픽 이름] [메시지 타입] [-r #Hz] — ‘메시지 내용’</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>one <span class="nb">time </span>per 1 second
<span class="nv">$ </span>rostopic pub /turtle1/cmd_vel geometry_msgs/Twist <span class="nt">-r</span> 1 <span class="nt">--</span> <span class="s1">'[2.0,0.0,0.0]'</span> <span class="s1">'[0.0,0.0,1.8]'</span>
</pre></table></code></div></div><p>&lt;ctrl+C&gt; 누르면 종료된다.</p><p><br /></p><p><br /></p><h1 id="ros-package">ROS package</h1><p>패키지 : ROS에서 개발되는 소프트웨어를 논리적 묶음으로 만든 것</p><ul><li>e.g. 보행자 추적 패키지, 차선인식 패키지 등..</ul><h2 id="ros-패키지-만들기">ROS 패키지 만들기 <a href="#ros-패키지-만들기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>코드를 작성하는 명령어로는 gedit(메모장)을 사용하면 된다. 이를 실행하면 해당 디렉토리의 파일이 존재하면 그 파일을 열고, 없으면 새로 생성하여 열어준다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>gedit pub.py
<span class="nv">$ </span>gedit sub.py
</pre></table></code></div></div><p>1.패키지 담을 디렉토리로 이동</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/xycar_ws/src
</pre></table></code></div></div><p><br /></p><p>2.패키지 새로 만들기</p><ul><li>catkin_create_pkg [패키지 이름] [이 패키지가 의존하고 있는 다른 패키지들 나열]</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>catkin_create_pkg my_pkg1 std_msgs rospy
</pre></table></code></div></div><p><br /></p><p>3.빌드(갱신)</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>catkin_make
</pre></table></code></div></div><p><br /></p><p>4.만들어진 패키지 확인</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rospack find my_pkg1
/home/jaehoyoon/xycar_ws/src/my_pkg1
    
의존하고 있는 패키지 출력
<span class="nv">$ </span>rospack depends1 my_pkg1
rospy
std_msgs

패키지로 이동
<span class="nv">$ </span>roscd my_pkg1
~/xycar_ws/src/my_pkg1<span class="err">$</span>
</pre></table></code></div></div><p><br /></p><p>5.소스코드를 추가한 후 그것을 실행하려고 할 때, 파일 타입이 실행 권한이 없으면 실행이 불가능하다. 따라서 타입을 바꿔줘야 한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
합계 8
<span class="nt">-rw-rw-r--</span> 1 jaehoyoon jaehoyoon 397  2월 28 20:52 pub.py
<span class="nt">-rw-rw-r--</span> 1 jaehoyoon jaehoyoon 285  2월 28 20:54 sub.py
    
<span class="nv">$ </span><span class="nb">chmod</span> +x pub.py sub.py

<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
합계 8
<span class="nt">-rwxrwxr-x</span> 1 jaehoyoon jaehoyoon 397  2월 28 20:52 pub.py
<span class="nt">-rwxrwxr-x</span> 1 jaehoyoon jaehoyoon 285  2월 28 20:54 sub.py
</pre></table></code></div></div><p><br /></p><h2 id="ros-패키지-실행">ROS 패키지 실행 <a href="#ros-패키지-실행" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="publisher">publisher <a href="#publisher" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>터미널 4개로 해서</p><ol><li>roscore<li>pub.py 실행 : rosrun my_pkg1 pub.py (my_pkg1안에 있는 pub.py를 실행)<li>turtlesim 노드 실행 : rosrun turtlesim turtlesim_node<li>rqt_graph 실행</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">$ </span>roscore

<span class="nv">$ </span>rosrun turtlesim turtlesim_node

<span class="nv">$ </span>rosrun my_pkg1 pub.py
</pre></table></code></div></div><ul><li>노드 상태 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rqt_graph
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\turtlerqt.png" data-proofer-ignore></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rosnode list
/my_node_59758_1646054585073
/rosout
/turtlesim
</pre></table></code></div></div><h3 id="subscriber">subscriber <a href="#subscriber" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>우선, turtle이 어떤 토픽에 어떤 메시지를 발행하고 있는지 알아봐야 한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre><td class="rouge-code"><pre>이동되고 있는 전체 토픽
<span class="nv">$ </span>rostopic list
/rosout
/rosout_agg
/turtle1/cmd_vel
/turtle1/color_sensor
/turtle1/pose


어떤 타입이고 어떤 값을 가지는지 보기
<span class="nv">$ </span>rostopic <span class="nb">type</span> /turtle1/pose
turtlesim/Pose


어떤 메시지를 가지는가
<span class="nv">$ </span>rosmsg show turtlesim/Pose
float32 x
float32 y
float32 theta
float32 linear_velocity
float32 angular_velocity


토픽에 어떤 메시지가 발행되고 있는지 실제 값 보기
<span class="nv">$ </span>rostopic <span class="nb">echo</span> /turtle1/pose
x: 4.42990398407
y: 6.82239103317
theta: <span class="nt">-1</span>.73598301411
linear_velocity: 2.0
angular_velocity: 1.79999995232
<span class="nt">---</span>
x: 4.425552845
y: 6.79068851471
theta: <span class="nt">-1</span>.70718300343
linear_velocity: 2.0
angular_velocity: 1.79999995232
<span class="nt">---</span>
x: 4.42211675644
y: 6.75887346268
theta: <span class="nt">-1</span>.67838299274
linear_velocity: 2.0
angular_velocity: 1.79999995232
<span class="nt">---</span>
...
</pre></table></code></div></div><p>터미널 4개 실행</p><ol><li>roscore<li>turtlesim 노드 실행<li>pub.py<li>sub.py</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="nv">$ </span>roscore

<span class="nv">$ </span>rosrun turtlesim turtlesim_node

<span class="nv">$ </span>rosrun my_pkg1 pub.py

<span class="nv">$ </span>rosrun my_pkg1 sub.py
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.320049]: /my_listener_59983_1646055411189Location: 4.47,6.996734
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.336577]: /my_listener_59983_1646055411189Location: 4.46,6.966142
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.351566]: /my_listener_59983_1646055411189Location: 4.45,6.935292
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.370935]: /my_listener_59983_1646055411189Location: 4.45,6.904211
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.383501]: /my_listener_59983_1646055411189Location: 4.44,6.872923
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.400245]: /my_listener_59983_1646055411189Location: 4.43,6.841455
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.415747]: /my_listener_59983_1646055411189Location: 4.43,6.809832
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.431543]: /my_listener_59983_1646055411189Location: 4.42,6.778082
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.448686]: /my_listener_59983_1646055411189Location: 4.42,6.746230
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.463205]: /my_listener_59983_1646055411189Location: 4.42,6.714302
<span class="o">[</span>INFO] <span class="o">[</span>1646055414.480053]: /my_listener_59983_1646055411189Location: 4.42,6.682326
...
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rqt_graph
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\turtlerqt2.png" data-proofer-ignore></p><p><br /></p><p>rostopic echo를 실행하면 노드가 1개 더 생성된다.</p><p><img data-src="/assets\img\dev\week3\day1\turtlerqt3.png" data-proofer-ignore></p><p><br /></p><h1 id="roslaunch">roslaunch</h1><p>*.launch 파일 내용에 따라 여러 노드들을 한꺼번에 실행시킬 수 있다. 파라미터 값을 노드에 전달할 수도 있다.</p><p><img data-src="/assets\img\dev\week3\day1\roslaunch.png" data-proofer-ignore></p><p>roslaunch [패키지이름] [실행시킬 launch 파일 이름]</p><ul><li>roslaunch my_pkg1 aaa.launch</ul><p><br /></p><h2 id="launch-파일">*.launch 파일 <a href="#launch-파일" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>실행시킬 노드들의 정보가 XML 형식으로 기록되어 있다. launch 파일은 my_pkg1/launch/*.launch 경로로 생성해야 한다.</p><ul><li>node 태그: 실행할 노드 정보를 입력할 때 사용되는 태그<ul><li>&lt;node pkg=”패키지 명” type=”노드가 포함된 소스파일 명” name=”노드 이름” /&gt;<li>속성<ul><li>pkg: 실행시킬 노드의 패키지 이름을 입력하는 속성 → 반드시 빌드된 패키지의 이름을 입력해야 함<li>type: 노드의 소스코드가 담긴 파이썬 파일의 이름을 입력하는 속성 → 이때 파이썬 py파일은 반드시 실행권한이 있어야 함</ul><blockquote><p>실행권한이 없으면 ERROR: cannot launch node of type ~ 이라 나옴</p><ul><li>name: 노드의 이름을 입력하는 속성 → 소스코드에서 지정된 노드의 이름을 무시하고 launch파일에 기록된 노드의 이름으로 노드가 실행된다.</ul></blockquote></ul><li>include 태그: 다른 launch 파일을 불러오고 싶을 때 사용하는 태그<ul><li>&lt;include file=”같이 실행할 *.launch 파일 경로” /&gt;<li>이 때 &lt;include file=”$(find usb_cam)/src/launch/aaa.launch” /&gt; 라고 작성할 수 있는데, $()는 함수를 실행하는 것으로 find usb_cam을 실행한 결과를 가져오는 것<li>속성<ul><li>file: 함께 실행시킬 *.launch 파일의 경로를 입력하는 속성</ul></ul></ul><h3 id="launch-파일-실행">launch 파일 실행 <a href="#launch-파일-실행" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>launch 파일 생성
my_pkg1<span class="nv">$ </span><span class="nb">mkdir </span>launch

launch 파일 작성
<span class="nv">$ </span><span class="nb">cd </span>launch
<span class="nv">$ </span>gedit pub-sub.launch
</pre></table></code></div></div><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c">&lt;!-- pub-sub.launch --&gt;</span>
<span class="nt">&lt;launch&gt;</span>
    <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"turtlesim"</span> <span class="na">type=</span><span class="s">"turtlesim_node"</span> <span class="na">name=</span><span class="s">"turtlesim_node"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"my_pkg1"</span> <span class="na">type=</span><span class="s">"pub.py"</span> <span class="na">name=</span><span class="s">"pub_node"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"my_pkg1"</span> <span class="na">type=</span><span class="s">"sub.py"</span> <span class="na">name=</span><span class="s">"sub_node"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></table></code></div></div><p><br /></p><blockquote><p>💡 <strong>roslaunch를 할 때는 roscore를 할 필요가 없다. 스스로 roscore가 작동되기 때문이다.</strong></p></blockquote><p><br /></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="nv">$ </span>roslaunch my_pkg1 pub-sub.launch 
... logging to /home/jaehoyoon/.ros/log/2089d226-989f-11ec-8c28-000c2983f177/roslaunch-jaeho-vm-60582.log
Checking log directory <span class="k">for </span>disk usage. This may take a <span class="k">while</span><span class="nb">.</span>
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is &lt;1GB.

started roslaunch server http://localhost:44745/

SUMMARY
<span class="o">========</span>

PARAMETERS
 <span class="k">*</span> /rosdistro: melodic
 <span class="k">*</span> /rosversion: 1.14.12

NODES
  /
    pub_node <span class="o">(</span>my_pkg1/pub.py<span class="o">)</span>
    sub_node <span class="o">(</span>my_pkg1/sub.py<span class="o">)</span>
    turtlesim_node <span class="o">(</span>turtlesim/turtlesim_node<span class="o">)</span>

auto-starting new master
process[master]: started with pid <span class="o">[</span>60592]
<span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://localhost:11311

setting /run_id to 2089d226-989f-11ec-8c28-000c2983f177
process[rosout-1]: started with pid <span class="o">[</span>60603]
started core service <span class="o">[</span>/rosout]
process[turtlesim_node-2]: started with pid <span class="o">[</span>60606]
process[pub_node-3]: started with pid <span class="o">[</span>60611]
process[sub_node-4]: started with pid <span class="o">[</span>60612]
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.076219]: /sub_nodeLocation: 5.54,5.544445
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.092649]: /sub_nodeLocation: 5.54,5.544445
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.107839]: /sub_nodeLocation: 5.54,5.544445
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.123153]: /sub_nodeLocation: 5.54,5.544445
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.140403]: /sub_nodeLocation: 5.54,5.544445
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.156125]: /sub_nodeLocation: 5.54,5.544445
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.172139]: /sub_nodeLocation: 5.54,5.544445
<span class="o">[</span>INFO] <span class="o">[</span>1646056978.187652]: /sub_nodeLocation: 5.54,5.544445
...
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>rqt_graph
</pre></table></code></div></div><p><img data-src="/assets\img\dev\week3\day1\turtlerqt4.png" data-proofer-ignore></p><p><br /></p><h2 id="launch-파일의-유용한-tag">launch 파일의 유용한 tag <a href="#launch-파일의-유용한-tag" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>USB 카메라 구동과 파라미터 세팅을 위한 launch 파일</ol><p>launch를 통해 파라미터의 값을 셋팅할 수 있다.</p><ul><li>패키지 이름: usb_cam</ul><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nt">&lt;launch&gt;</span>
	<span class="nt">&lt;node</span> <span class="na">name=</span><span class="s">"usb_cam"</span> <span class="na">pkg=</span><span class="s">"turtlesim"</span> <span class="na">type=</span><span class="s">"cam_node"</span> <span class="na">output=</span><span class="s">"screen"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"autoexposure"</span> <span class="na">value=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"exposure"</span> <span class="na">value=</span><span class="s">"180"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"image_width"</span> <span class="na">value=</span><span class="s">"640"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"image_height"</span> <span class="na">value=</span><span class="s">"480"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"camera_frame_id"</span> <span class="na">value=</span><span class="s">"usb_cam"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></table></code></div></div><p>type=”cam_node” py가 없는 걸로 보아 c나 c++로 되어 있음을 알 수 있다.</p><p>autoexposure이라는 파라미터의 값을 false, exposure 파라미터를 180, 이미지 크기를 [640,480]으로 정하는 것이다.</p><h3 id="param">param <a href="#param" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>ROS 파라미터 서버에 변수를 등록하고 그 변수에 값을 설정하기 위한 태그다.</p><p>&lt;param name=”변수 이름” type=”변수 타입” value=”변수 값” /&gt;</p><ul><li>name: 등록할 변수의 이름<li>type(선택): 등록할 변수의 타입, 사용할 수 있는 타입의 종류는 str, int, double, bool, yaml<li>value: 등록할 변수의 값</ul><p>param을 통해 ROS파라미터 서버에 등록된 변수는 노드 코드(소스코드)에서 불러와 사용할 수 있다.</p><ul><li>*.launch ⇒ &lt;param name=”age” type=”int” value=”11” /&gt;<li>*.py ⇒ import rospy; rospy.init_node(’노드’); print(rospy.<strong>get_param</strong>(’~age’))</ul><p>private parameter은 앞에 ~를 붙여야 한다.</p><h2 id="실습">실습 <a href="#실습" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>1.launch 파일을 새로 만든다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cp </span>pub-sub.launch pub-sub-param.launch
</pre></table></code></div></div><ul><li>패키지 이름 = my_pkg1<li>타입 (소스코드 파일) = pub_param.py<li>노드 이름 = node_param<li>파라미터 이름 = circle_size<li>파라미터 값 = 2</ul><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c">&lt;!-- pub-sub-param.launch --&gt;</span>
<span class="nt">&lt;launch&gt;</span>
	<span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"turtlesim"</span> <span class="na">type=</span><span class="s">"turtlesim_node"</span> <span class="na">name=</span><span class="s">"turtlesim_node"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"my_pkg1"</span> <span class="na">type=</span><span class="s">"pub_param.py"</span> <span class="na">name=</span><span class="s">'node_param'</span><span class="nt">&gt;</span>
		<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"circle_size"</span> <span class="na">value=</span><span class="s">"2"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/node&gt;</span>
	<span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"my_pkg1"</span> <span class="na">type=</span><span class="s">"sub.py"</span> <span class="na">name=</span><span class="s">"sub_node"</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></table></code></div></div><p><br /></p><p>2.pub_param.py 만들기</p><p>원래 만들었던 pub.py를 복사해서 수정한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cp </span>pub.py pub_param.py
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="c1">#!/usr/bin/env python
</span>
<span class="kn">import</span> <span class="n">rospy</span>
<span class="kn">from</span> <span class="n">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>

<span class="n">rospy</span><span class="p">.</span><span class="nf">init_node</span><span class="p">(</span><span class="s">'my_node'</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="p">.</span><span class="nc">Publisher</span><span class="p">(</span><span class="s">'/turtle1/cmd_vel'</span><span class="p">,</span><span class="n">Twist</span><span class="p">,</span><span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">msg</span> <span class="o">=</span> <span class="nc">Twist</span><span class="p">()</span>

<span class="c1"># msg.linear.x = 2.0
# --- 추가 사항 --- #
</span><span class="n">linear_X</span> <span class="o">=</span> <span class="n">rospy</span><span class="p">.</span><span class="nf">get_param</span><span class="p">(</span><span class="s">'~circle_size'</span><span class="p">)</span>
<span class="n">msg</span><span class="p">.</span><span class="n">linear</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">linear_X</span>
<span class="c1"># ----------------- #
</span>
<span class="n">msg</span><span class="p">.</span><span class="n">linear</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">msg</span><span class="p">.</span><span class="n">linear</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">msg</span><span class="p">.</span><span class="n">angular</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">msg</span><span class="p">.</span><span class="n">angular</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">msg</span><span class="p">.</span><span class="n">angular</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">1.8</span>

<span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="p">.</span><span class="nc">Rate</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="p">.</span><span class="nf">is_shutdown</span><span class="p">():</span>
	<span class="n">pub</span><span class="p">.</span><span class="nf">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
	<span class="n">rate</span><span class="p">.</span><span class="nf">sleep</span><span class="p">()</span>
</pre></table></code></div></div><p>msg.linear.x 대신 linear_X를 통해 즉, circle_size를 통해 linear.x를 받는다.</p><ul><li>value = 3</ul><p><img data-src="/assets\img\dev\week3\day1\turtlecircle3.png" data-proofer-ignore></p><ul><li>value = 1</ul><p><img data-src="/assets\img\dev\week3\day1\turtlecircle1.png" data-proofer-ignore></p><p><br /></p><p>rqt_graph</p><p><img data-src="/assets\img\dev\week3\day1\turtlerqt5.png" data-proofer-ignore></p><h3 id="참고-자료">참고 자료 <a href="#참고-자료" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><a href="https://goldenboylife.com/elementor-2890/">https://goldenboylife.com/elementor-2890/</a><li><a href="http://wiki.ros.org/melodic/Installation/Ubuntu">ROS 공식 사이트</a></ul></div><div class="post-tail-wrapper text-muted"><div style="text-align: left;"> <a href="http://hits.dwyl.com/dkssud8150.github.io/posts/rostutorial/" target="_blank"> <img data-src="http://hits.dwyl.com/dkssud8150.github.io/posts/rostutorial.svg" data-proofer-ignore> </a></div><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/classlog/'>Classlog</a>, <a href='/categories/devcourse/'>devcourse</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ros/" class="post-tag no-text-decoration" >ros</a> <a href="/tags/devcourse/" class="post-tag no-text-decoration" >devcourse</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[데브코스] 3주차 - ROS Abstract and Turtlesim - JaeHo Yoon&amp;url=https://dkssud8150.github.io/posts/rostutorial/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[데브코스] 3주차 - ROS Abstract and Turtlesim - JaeHo Yoon&amp;u=https://dkssud8150.github.io/posts/rostutorial/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://dkssud8150.github.io/posts/rostutorial/&amp;text=[데브코스] 3주차 - ROS Abstract and Turtlesim - JaeHo Yoon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://dkssud8150.github.io/posts/rostutorial/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script></div><script src="https://utteranc.es/client.js" repo="dkssud8150/dkssud8150.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gitpage/">[깃허브 프로필 꾸미기] github 프로필 만들기</a><li><a href="/posts/product/">[깃허브 프로필 꾸미기] productive box 만들기</a><li><a href="/posts/regex/">[데브코스] 2주차 - linux 기초(REGEX)</a><li><a href="/posts/Kfold/">KFold Cross Validation 과 StratifiedKFold</a><li><a href="/posts/cmake/">[데브코스] 17주차 - CMake OpenCV, Eigen, Pangolin install </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/rosturtlesim8/"><div class="card-body"> <em class="timeago small" date="2022-03-01 13:00:00 +0900" >Mar 1, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 3주차 - ROS Turtlesim 8 RACE and MSG Package</h3><div class="text-muted small"><p> ROS turtlesim 8자 주행 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # pub8.py #!/usr/bin/env python import rospy from geometry_msgs.msg import Twist turn = 0 rosp...</p></div></div></a></div><div class="card"> <a href="/posts/ros_node/"><div class="card-body"> <em class="timeago small" date="2022-03-02 13:00:00 +0900" >Mar 2, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 3주차 - ROS Node Communication programming</h3><div class="text-muted small"><p> 다양한 상황에서의 노드 통신 누락 없이 모두 잘 도착하는지 데이터 크기에 따른 전송속도 도착하는 데이터를 미처 처리하지 못하면? 주기적 발송에서 타임슬롯을 오버하면 어떻게 되나 협업해야 하는 노드를 순서대로 가동시킬 수 있나? 과제 1. 노드간 동기화문제 설명 퍼블리셔와 서브스크라이버간의 데이터를 빠짐없이 잘 보내고 ...</p></div></div></a></div><div class="card"> <a href="/posts/selfdrivingprocess/"><div class="card-body"> <em class="timeago small" date="2022-03-04 13:00:00 +0900" >Mar 4, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 3주차 - Self driving Process</h3><div class="text-muted small"><p> 자율주행 자동차 기술 개요 자율주행 자동차는 어떤 기능을 제공해야 하는가 4차 산업혁명이랑 인공지능, 빅데이터, 초연결 등으로 촉발되는 지능화 혁명 또는 그 이상 자율주행 = 인공지능 + 빅데이터 + 초연결 자율주행 기술을 구분하는 6단계 구분법 미국 자동차기술학회(SAE)에서 구분한 자율주행 기술 6단계 자율주행 프로세스 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/mkfs/" class="btn btn-outline-primary" prompt="Older"><p>[데브코스] 2주차 - linux 기초(File System)</p></a> <a href="/posts/rosturtlesim8/" class="btn btn-outline-primary" prompt="Newer"><p>[데브코스] 3주차 - ROS Turtlesim 8 RACE and MSG Package</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">JaeHo YooN</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NC7MWHVXJE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NC7MWHVXJE'); }); </script>