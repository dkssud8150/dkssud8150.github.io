<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[ROS2 이론] 목차 및 개요" /><meta name="author" content="JaeHo YooN" /><meta property="og:locale" content="en" /><meta name="description" content="표윤석 박사님의 네이버 카페 글을 참고로 하여 ROS2를 공부하고, 기록하고자 합니다." /><meta property="og:description" content="표윤석 박사님의 네이버 카페 글을 참고로 하여 ROS2를 공부하고, 기록하고자 합니다." /><link rel="canonical" href="https://dkssud8150.github.io/posts/introduction/" /><meta property="og:url" content="https://dkssud8150.github.io/posts/introduction/" /><meta property="og:site_name" content="JaeHo Yoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-25T18:35:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[ROS2 이론] 목차 및 개요" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@JaeHo YooN" /><meta name="google-site-verification" content="znvuGsQGYxMZPBslC4XG6doCYao6Y-fWibfGlcaMHH8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JaeHo YooN"},"dateModified":"2022-07-27T04:43:20+09:00","datePublished":"2022-07-25T18:35:00+09:00","description":"표윤석 박사님의 네이버 카페 글을 참고로 하여 ROS2를 공부하고, 기록하고자 합니다.","headline":"[ROS2 이론] 목차 및 개요","mainEntityOfPage":{"@type":"WebPage","@id":"https://dkssud8150.github.io/posts/introduction/"},"url":"https://dkssud8150.github.io/posts/introduction/"}</script><title>[ROS2 이론] 목차 및 개요 | JaeHo Yoon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHo Yoon"><meta name="application-name" content="JaeHo Yoon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/shin_chan.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaeHo Yoon</a></div><div class="site-subtitle font-italic">Mamba Mentality</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fab fa-angellist ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dkssud8150" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hoya58150','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.notion.so/18490713817d403696812c57d0abe730" aria-label="notion" target="_blank" rel="noopener"> <i class="fab fa-battle-net"></i> </a> <a href="https://www.linkedin.com/in/jaeho-yoon-90b62b230" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/jai_ho8150/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[ROS2 이론] 목차 및 개요</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[ROS2 이론] 목차 및 개요</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/dkssud8150">JaeHo YooN</a> </em></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-07-25 18:35:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Mon, Jul 25, 2022, 6:35 PM +0900" >Jul 25, 2022</em> </span> <span> Updated <em class="timeago" date="2022-07-27 04:43:20 +0900 " data-toggle="tooltip" data-placement="bottom" title="Wed, Jul 27, 2022, 4:43 AM +0900" >Jul 27, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5219 words"> <em>28 min</em> read</span></div></div></div><div class="post-content"><p>표윤석 박사님의 네이버 카페 글을 참고로 하여 ROS2를 공부하고, 기록하고자 합니다.</p><ul><li>기본 URL : https://cafe.naver.com/openrt/24070<li>github : https://github.com/robotpilot/ros2-seminar-examples</ul><p> </p><p>목차는 기본적으로 이론/프로그래밍으로 나뉘어져 있고, 심화 프로그래밍과 기타 등이 존재합니다. 저는 이론/프로그래밍을 위주로 공부할 예정입니다.</p><p>책으로도 존재하니 책으로 보고 싶으신 분들은 책으로 공부하시면 될 것 같습니다. 위의 참고 자료는 온라인 강의로 사용된 PDF파일 600페이지 분량이라고 합니다.</p><ul><li><a href="http://book.naver.com/bookdb/book_detail.nhn?bid=12443870">참고 교재 - ROS 로봇 프로그래밍</a></ul><p> </p><p>또한, 저는 일단 wsl2로 진행할 예정이니 오리지널과 다소 차이가 있을 수 있습니다. ROS2는 윈도우에서도 사용이 가능하긴 하나 본래의 ROS가 ubuntu에서 주로 사용하기에 저도 ubuntu 환경에서 사용하기 위해 wsl2를 사용하는 것입니다.</p><ul><li>wsl2에 ROS2 설치 참고 자료 : https://keep-steady.tistory.com/45</ul><p> </p><p> </p><h1 id="why-ros2">why ROS2?</h1><ul><li><a href="https://cafe.naver.com/openrt/23868">003 왜? ROS 2로 가야하는가?</a><li><a href="https://cafe.naver.com/openrt/23889">004 ROS 2의 중요 컨셉과 특징</a><li><a href="https://cafe.naver.com/openrt/23965">005 ROS1과 2의 차이점을 통해 알아보는 ROS2의 특징</a></ul><p>ROS1을 배우지 않았다면, 그냥 ROS2를 배워도 된다. 그러나 ROS1을 사용하던 사람이 ROS2를 사용할 이유는 잘 모를 수 있다.</p><p>ROS2는 2014년 3월에 개발을 시작하여 2015년도에 알파 버전이 릴리즈되었으며, 1년 동안 8번의 릴리즈가 발표되었고, 2017년에 베타 버전이 작업되어 2017년 12월에 첫 공식 버전이 나왔다. 지금은 총 6개의 공식 배포판이 나와있다.</p><p>ROS1에서 ROS2를 갈아타야하는 가장 큰 이유는 ROS1의 최후의 버전이 발표되었기 때문이다. ROS1의 마지막 버전인 Noetic Ninjemys는 2020년 05월 23일에 릴리즈되었다. 이 릴리즈가 마지막 버전이라는 선언을 했다.</p><p>ROS1은 Linux만을 주로 지원하고 있었는데, ROS2는 Linux, windows, macOS 등 다양하게 지원하고 있다.</p><p> </p><ul><li>ROS1과 ROS2의 차이점</ul><p><img data-src="/assets/img/ros2/ros1ros2.png" data-proofer-ignore></p><p> </p><p> </p><h1 id="1-개발-환경-설정">1. 개발 환경 설정</h1><ul><li><a href="https://cafe.naver.com/openrt/25288">001 ROS 2 개발 환경 구축</a></ul><p>위에서 말했다시피 먼저 WSL2에서 ROS2를 설치하는 과정을 먼저 설명하고자 한다. wsl2가 설치되어 있다는 가정하에 시작한다.</p><h2 id="ubuntu-환경-설정">ubuntu 환경 설정 <a href="#ubuntu-환경-설정" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade
</pre></table></code></div></div><p> </p><ul><li>지역 변수 설정</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>locale-gen en_US en_US.UTF-8
<span class="nv">$ </span><span class="nb">sudo </span>update-locale <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nv">$ </span><span class="nb">export </span><span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
</pre></table></code></div></div><p> </p><ul><li>지역 변수 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nv">$ </span>locale
<span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nv">LANGUAGE</span><span class="o">=</span>
<span class="nv">LC_CTYPE</span><span class="o">=</span><span class="s2">"en_US.UTF-8"</span>
<span class="nv">LC_NUMERIC</span><span class="o">=</span><span class="s2">"en_US.UTF-8"</span>
...
</pre></table></code></div></div><p> </p><ul><li>ROS2 환경 변수 설정</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>vim ~/.bashrc
</pre></table></code></div></div><p>vim이나 nano, gedit 등 자신이 원하는 편집기를 사용하면 된다. 기존에 존재했던 것들은 그대로 두고, 아래 부분을 추가한다. source, export는 모두 추가해주어야 하며, alias는 자신이 원하는 대로 추가하면 된다.</p><details open=""> <summary> 내용 </summary> ```markdown source /opt/ros/foxy/setup.bash source ~/robot_ws/install/local_setup.bash source /usr/share/colcon_argcomplete/hook/colcon-argcomplete.bash source /usr/share/vcstool-completion/vcs.bash source /usr/share/colcon_cd/function/colcon_cd.sh export _colcon_cd_root=~/robot_ws export ROS_DOMAIN_ID=7 export ROS_NAMESPACE=robot1 export RMW_IMPLEMENTATION=rmw_fastrtps_cpp # export RMW_IMPLEMENTATION=rmw_connext_cpp # export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp # export RMW_IMPLEMENTATION=rmw_gurumdds_cpp # export RCUTILS_CONSOLE_OUTPUT_FORMAT='[{severity} {time}] [{name}]: {message} ({function_name}() at {file_name}:{line_number})' export RCUTILS_CONSOLE_OUTPUT_FORMAT='[{severity}]: {message}' export RCUTILS_COLORIZED_OUTPUT=1 export RCUTILS_LOGGING_USE_STDOUT=0 export RCUTILS_LOGGING_BUFFERED_STREAM=1 alias cw='cd ~/robot_ws' alias cs='cd ~/robot_ws/src' alias ccd='colcon_cd' alias cb='cd ~/robot_ws &amp;&amp; colcon build --symlink-install' alias cbs='colcon build --symlink-install' alias cbp='colcon build --symlink-install --packages-select' alias cbu='colcon build --symlink-install --packages-up-to' alias ct='colcon test' alias ctp='colcon test --packages-select' alias ctr='colcon test-result' alias rt='ros2 topic list' alias re='ros2 topic echo' alias rn='ros2 node list' alias killgazebo='killall -9 gazebo &amp; killall -9 gzserver &amp; killall -9 gzclient' alias af='ament_flake8' alias ac='ament_cpplint' alias testpub='ros2 run demo_nodes_cpp talker' alias testsub='ros2 run demo_nodes_cpp listener' alias testpubimg='ros2 run image_tools cam2image' alias testsubimg='ros2 run image_tools showimage' ``` </details><p> </p><ul><li>IDE 설치</ul><p>표윤석 박사님의 블로그에 보면, IDE로 vscode를 사용하는 것을 권장한다. vscode가 linux, window, macOS 모두 사용 가능한 크로스 플랫폼 에디터인 동시에 다양한 프로그래밍 언어를 지원하고 있고, <code class="language-plaintext highlighter-rouge">.pcd</code>와 같은 특수한 파일을 볼 수 있는 뷰어도 지원하고 있다.</p><p>추천해주시는 vscode에 extensions은 정말 많다. 필요한 것은 알아서 설치하길 바란다.</p><div class="table-wrapper"><table><thead><tr><th>이름<th>설명<tbody><tr><td>C/C++<td>C/C++ intellisense, 디버깅 및 코드 검색<tr><td>CMake<td>CMake 언어 지원<tr><td>CMake Tools<td>CMake 언어 지원 및 다양한 툴<tr><td>Python<td>디버깅, intellisense, 코드 서식 지정, 리팩토딩 등 지원<tr><td>ROS<td>ROS 개발 지원<tr><td>URDF<td>URDF/xacro 지원<tr><td>Colcon Tasks<td>Colcon 명령어를 위한 VScode Task</table></div><p>이 외에도 많으니 <a href="https://cafe.naver.com/openrt/25288">https://cafe.naver.com/openrt/25288</a>를 참고하길 바란다.</p><p> </p><ul><li>패키지 설치 및 gpg 설정 및 소스 설정</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>curl gnupg2 lsb-release <span class="nt">-y</span>
<span class="nv">$ </span><span class="nb">sudo </span>curl <span class="nt">-sSL</span> https://raw.githubusercontent.com/ros/rosdistro/master/ros.key  <span class="nt">-o</span> /usr/share/keyrings/ros-archive-keyring.gpg
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/ros2.list <span class="o">&gt;</span> /dev/null
<span class="nv">$ </span><span class="nb">sudo </span>apt update
</pre></table></code></div></div><p> </p><p>이 때, PUBKEY 에러가 나면 아래 코드를 실행한다.</p><p>참고 URL : https://answers.ros.org/question/325039/apt-update-fails-cannot-install-pkgs-key-not-working/?answer=325040#post-id-325040</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c">#### remove old key</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt-key del 421C365BD9FF1F717815A3895523BAEEB01FA116
OK

<span class="c">#### install new key</span>
<span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-E</span> apt-key adv <span class="nt">--keyserver</span> <span class="s1">'hkp://keyserver.ubuntu.com:80'</span> <span class="nt">--recv-key</span> C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654

<span class="nv">$ </span><span class="nb">sudo </span>apt update
</pre></table></code></div></div><p> </p><p>그래도 에러가 나면</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>curl <span class="nt">-s</span> https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | <span class="nb">sudo </span>apt-key add -
<span class="nv">$ </span><span class="nb">sudo </span>apt update
</pre></table></code></div></div><p>or</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt-key adv <span class="nt">--keyserver</span> <span class="s1">'hkp://keyserver.ubuntu.com:80'</span> <span class="nt">--recv-key</span> C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
<span class="nv">$ </span><span class="nb">sudo </span>apt update
</pre></table></code></div></div><p> </p><h2 id="ros2-패키지-설치">ROS2 패키지 설치 <a href="#ros2-패키지-설치" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt update
<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>ros-foxy-desktop ros-foxy-rmw-fastrtps<span class="k">*</span> ros-foxy-rmw-cyclonedds<span class="k">*</span> <span class="nt">-y</span>
</pre></table></code></div></div><p> </p><ul><li>패키지 설치 확인</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"source /opt/ros/foxy/setup.bash"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nv">$ </span><span class="nb">source</span> ~/.bahsrc

<span class="nv">$ </span>ros2 run demo_nodes_cpp talker
<span class="o">[</span>INFO] <span class="o">[</span>1658742890.693325028] <span class="o">[</span>talker]: Publishing: <span class="s1">'Hello World: 1'</span>
<span class="o">[</span>INFO] <span class="o">[</span>1658742891.693441287] <span class="o">[</span>talker]: Publishing: <span class="s1">'Hello World: 2'</span>
<span class="o">[</span>INFO] <span class="o">[</span>1658742892.693642848] <span class="o">[</span>talker]: Publishing: <span class="s1">'Hello World: 3'</span>
...

<span class="nv">$ </span>ros2 run demo_nodes_py listener
<span class="o">[</span>INFO] <span class="o">[</span>1612912265.593335793] <span class="o">[</span>listener]: I heard: <span class="o">[</span>Hello World: 3]
<span class="o">[</span>INFO] <span class="o">[</span>1612912266.576514520] <span class="o">[</span>listener]: I heard: <span class="o">[</span>Hello World: 4]
<span class="o">[</span>INFO] <span class="o">[</span>1612912267.576780341] <span class="o">[</span>listener]: I heard: <span class="o">[</span>Hello World: 5]
<span class="o">[</span>INFO] <span class="o">[</span>1612912268.576769156] <span class="o">[</span>listener]: I heard: <span class="o">[</span>Hello World: 6]
<span class="o">[</span>INFO] <span class="o">[</span>1612912269.577142775] <span class="o">[</span>listener]: I heard: <span class="o">[</span>Hello World: 7]
...
</pre></table></code></div></div><p>이 두가지를 동시에 실행했을 때 문제가 없다면 ros2가 잘 설치된 것이다.</p><p> </p><p> </p><h2 id="ros2-개발-툴-설치">ROS2 개발 툴 설치 <a href="#ros2-개발-툴-설치" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>로봇 프로그래밍에 필수로 사용되는 패키지들이다. 개발 환경 설치시 설치해두는 것이 좋다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> build-essential cmake git libbullet-dev python3-colcon-common-extensions python3-flake8 python3-pip python3-pytest-cov python3-rosdep python3-setuptools python3-vcstool wget

<span class="nv">$ </span>python3 <span class="nt">-m</span> pip <span class="nb">install</span> <span class="nt">-U</span> argcomplete flake8-blind-except flake8-builtins flake8-class-newline flake8-comprehensions flake8-deprecated flake8-docstrings flake8-import-order flake8-quotes pytest-repeat pytest-rerunfailures pytest

<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">--no-install-recommends</span> <span class="nt">-y</span> libasio-dev libtinyxml2-dev libcunit1-dev
</pre></table></code></div></div><p> </p><p> </p><h2 id="ros2-빌드-테스트">ROS2 빌드 테스트 <a href="#ros2-빌드-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/robot_ws/src
<span class="nv">$ </span><span class="nb">cd</span> ~/robot_ws
<span class="nv">$ </span>colcon build <span class="nt">--symlink-install</span>
</pre></table></code></div></div><p> </p><ul><li>확인</ul><p><img data-src="/assets/img/ros2/colcon.png" data-proofer-ignore></p><p>위 과정을 진행하면 워크스페이스 폴더에 src, build, install, log 폴더가 생성된 것을 확인할 수 있다.</p><div class="table-wrapper"><table><tbody><tr><td>colcon이 뭐지?</table></div><p> </p><h2 id="vscode의-개발-환경-설정">VSCode의 개발 환경 설정 <a href="#vscode의-개발-환경-설정" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>User settings 설정</ul><p>settings.json 은 VScode의 사용자별 글로벌 환경 설정을 지정하는 파일이다. 이 파일에 기술된 설정들은 모든 작업 공간에 적용되는 미니맵 사용, 세로 제한 줄 표시, 탭 사이즈 등이다.</p><div class="table-wrapper"><table><tbody><tr><td>추가 예정</table></div><p> </p><ul><li>C/C++ properties 설정</ul><div class="table-wrapper"><table><tbody><tr><td>추가 예정</table></div><p> </p><ul><li>Tasks 설정</ul><div class="table-wrapper"><table><tbody><tr><td>추가 예정</table></div><p> </p><ul><li>Launch 설정</ul><div class="table-wrapper"><table><tbody><tr><td>추가 예정</table></div><p> </p><h2 id="qtcreator-설치">QtCreator 설치 <a href="#qtcreator-설치" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>QtCreator는 ROS2의 rqt UI를 작성할 때 편리한 툴이다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>qtcreator <span class="nt">-y</span>

<span class="nv">$ </span>qtcreator
</pre></table></code></div></div><p><img data-src="/assets/img/ros2/qtcreator.png" data-proofer-ignore></p><p> </p><p> </p><h1 id="2-ros2와-data-distribution-service">2. ROS2와 Data Distribution Service</h1><ul><li><a href="https://cafe.naver.com/openrt/24031">006 ROS2와 DDS</a></ul><p>ROS에 중요한 용어 정의 및 메시지, 메시지 통신에 대해 먼저 알아보고자 한다. 메시지 통신은 ROS 프로그래밍에 있어서 ROS1과 2의 공통된 중요한 핵심 개념이다.</p><p>ROS에는 프로그램의 재사용성을 극대화하기 위해 최소 단위의 실행 가능한 프로세서라고 정의하는 노드 단위로 프로그램을 작성하게 된다.</p><ul><li><strong>패키지</strong>(package) : 하나 이상의 노드 또는 노드 실행을 위한 정보 등을 묶어 놓은 것<li><strong>메타패키지</strong>(metapackage) : 패키지의 묶음<li><strong>메시지</strong>(message) : 노드와 노드 간 주고 받는 입력과 출력 데이터<ul><li>주고받는 방식을 메시지 통신이라 한다.<li>메시지는 <em>int</em>, <em>float</em>, <em>point</em>, <em>bool</em>, <em>string</em> 등 다양한 변수 형태로 존재<li>데이터 구조 및 메시지의 배열을 정할 수 있다.<li>메시지를 주고받는 통신 방법에 따라 <strong>토픽</strong>(topic), <strong>서비스</strong>(service), <strong>액션</strong>(action), <strong>파라미터</strong>(parameter)로 구분된다.</ul><li><strong>퍼블리셔</strong> : 메시지를 보내는 노드<li><strong>서브스크라이버</strong> : 메시지를 받는 노드</ul><p> </p><p>ROS1은 자체적으로 개발한 TCPROS와 같은 통신 라이브러리를 사용하고 있는 방면, ROS2에서는 OMG(Object Management Group)에 의해 표준화된 DDS(Data Distribution Service)의 퍼블리셔와 서브스크라이브 프로토콜인 <strong>DDSI-RTPS</strong>(Real Time Publish Subscribe)를 사용한다. DDSI-RTPS는 DDS의 중요 컨셉인 DCPS(Data-Centric Publish-Subscribe), DLRL(Data Local Reconstruction Layer)의 내용을 담아 재정한 통신프로토콜이다. DDS통신을 사용하는 이유는 ROS1과 같이 자체적으로 제작하기보다 산업용 표준인 DDS를 통신 미들웨어로 사용하기 위해서이다.</p><p><img data-src="/assets/img/ros2/ros2node.png" data-proofer-ignore></p><p><img data-src="/assets/img/ros2/ros2structure.png" data-proofer-ignore></p><p>DDS의 사용으로 노드 간 실시간 데이터 전송이 보장되고, 노드 간 동적 검색 기능을 지원하여 ROS1에서 노드를 관리하던 마스터 노드가 없이도 통신이 가능해졌다. 또한, TCP에서의 데이터 손실을 방지하고, 신뢰도를 높였다.</p><p> </p><h2 id="dds란">DDS란? <a href="#dds란" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>그렇다면 과연 DDS가 무엇일까? DDS는 한국말로 데이터 분산 시스템인데, OMG 에서 표준을 정하고자 만든 트레이드마크이다. 간단하게는 데이터 통신을 위한 미들웨어이다.</p><p>OMG DDS Foundation에서 정의한 DDS는 다음과 같다.</p><blockquote><p>The Data Distribution Service (DDS™) is a middleware protocol and API standard for data-centric connectivity from the Object Management Group® (OMG®). It integrates the components of a system together, providing low-latency data connectivity, extreme reliability, and a scalable architecture that business and mission-critical Internet of Things (IoT) applications need.</p><p>In a distributed system, middleware is the software layer that lies between the operating system and applications. It enables the various components of a system to more easily communicate and share data. It simplifies the development of distributed systems by letting software developers focus on the specific purpose of their applications rather than the mechanics of passing information between applications and systems.</p></blockquote><p><em>출처 : https://www.dds-foundation.org/what-is-dds-3/</em></p><p> </p><p>즉, DDS는 데이터를 중심으로 연결성을 같는 미들웨어이다. 이 미들웨어는 ISO 7계층에서 호스트 계층에 해당되는 4~7계층에 해당된다.</p><p> </p><h2 id="dds의-특징">DDS의 특징 <a href="#dds의-특징" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>ROS2의 미들웨어로 사용할 때의 장점을 살펴보자.</p><ul><li>산업 표준</ul><p>DDS는 1989년 설립된 비영리 단체인 OMG(Object Management Group)가 관리하는 <strong>산업 표준</strong>이다. ROS1은 자체적인 TCPROS였기에, ROS2의 DDS 사용은 다양한 산업으로 넓혀갈 수 있는 발판이 될 수 있다.</p><p> </p><ul><li>OS 독립</ul><p>DDS는 Linux, windows, macOS, Android 등 다양한 운영체제를 지원하고 있다.</p><p> </p><ul><li>언어 독립</ul><p>DDS는 미들웨어이므로 그 상위 레벨인 <strong>사용자 코드 레벨에서는 DDS 사용을 위해 프로그래밍 언어를 바꿀 필요가 없다</strong>. ROS2에서도 DDS를 RMW(ROS Middleware)로 디자인되어, 다양한 언어를 지원하는 ROS 클라이언트 라이브러리(ROS client Library)를 제작하여 멀티 프로그래밍 언어를 지원하고 있다. 각 언어에 맞게 rclpy, rclcpp, rclc, rcljava 와 같은 이름으로 지원한다.</p><p><img data-src="/assets/img/ros2/rmw.png" data-proofer-ignore></p><p> </p><ul><li>UDP 기반의 전송 방식</ul><p>일반적으로 UDP 기반의 신뢰성 있는 멀티캐스트를 구현하여 시스템이 최신 네트워킹 인프라의 이점을 활용할 수 있다. TCP 대신 <strong>UDP 기반의 통신은 여러 목적지로 동시에 데이터를 보낼 수 있다.</strong></p><p>ROS2에서는 <code class="language-plaintext highlighter-rouge">ROS_DOMAIN_ID</code>라는 환경 변수로 도메인을 설정하게 된다. ROS2에서는 전역 공간이라 불리는 DDS Global Space라는 공간에 있는 토픽들에 대해 구독 및 발행을 할 수 있다.</p><p> </p><ul><li>데이터 중심적 기능</ul><p>DDS를 사용하면 제일 많이 보는 말 중 하나는 <code class="language-plaintext highlighter-rouge">Data Centric</code>이다. DDS에서도 DCPS(Data Centric Publish Subscribe)라는 개념이 있는데, 이는 <strong>적절한 수신자에게 적절한 정보를 효율적으로 전달하는 것을 목표로 하는 발간 및 구독 방식이다.</strong> 사용자 입장에서 <strong>어떤 데이터인지, 어떤 형식인지, 어떻게 보낼지, 안전하게 보낼지에 대한 기능이 존재</strong>한다는 것이다.</p><p><img data-src="/assets/img/ros2/dcps.png" data-proofer-ignore></p><p> </p><ul><li>동적 검색</ul><p>DDS는 동적 검색(Dynamic Discovery)를 제공한다. 응용 프로그램은 DDS의 동적 검색을 통하여 어떤 토픽이 지정 도메인 영역에 있으며 어떤 노드가 이를 발신하고 수신하는지 알 수 있게 된다. 이는 ROS 프로그래밍 시 데이터를 주고 받을 노드들의 IP주소 및 포트를 미리 입력하거나 따로 구성하지 않아도 되며, 사용하는 시스템 아키텍처의 차이점을 고려할 필요가 없기 때문에, 모든 운영 체제 또는 하드웨어 플랫폼에서 매우 쉽게 작업할 수 있다.</p><p>ROS1에서는 마스터 노드에 노드의 이름 및 메시지를 찾아서 연결시켜준다. ROS2에서는 마스터 노드가 없기에 노드를 DDS의 Participant 개념으로 취급하게 되었으며, <strong>동적 검색 기능을 이용하여 DDS 미들웨어를 통해 직접 검색하고 노드를 연결할 수 있게 된다.</strong></p><p> </p><ul><li>확장 가능한 아키텍처</ul><p><strong>DDS를 사용함으로써 IoT, 항공 우주 산업과 같은 초대형 시스템에 확장이 가능</strong>해졌다. 단일 표준 통신 계층에서 복잡성을 흡수함으로서 분산 시스템 개발을 더욱 단순화시켰다. 수백 수천개의 노드를 관리하거나 여러 대의 로봇, 주변 인프라를 통제하는 IT 기술 등에 적용시킬 수 있게 되었다.</p><p> </p><ul><li>상호 운용성</ul><p>DDS를 사용하고 있는 제품을 사용하면, A라는 회사의 제품을 사용하다가 B라는 회사 제품으로 변경이 가능하다. ROS2를 지원하는 업체는 ADLink, Eclipse, Eprosima, Gurum Network, RTI로 총 5곳이 있다.</p><p> </p><ul><li>서비스 품질(QoS)</ul><p>노드 간의 DDS 통신 옵션을 설정하는 QoS는 퍼블리셔 및 서브스크라이버 등을 선언하고 사용할 때 매개변수처럼 QoS를 사용한다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">self</span><span class="p">.</span><span class="n">helloworld_publisher</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">create_publisher</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="s">'helloworld'</span><span class="p">,</span> <span class="n">qos_profile</span><span class="p">)</span>
</pre></table></code></div></div><p>DDS 사양상 설정 가능한 QoS 항목은 22가지인데, ROS2에서는 데이터 손실을 방지하여 <strong>신뢰도</strong>를 우선시(<em>reliable</em>) 할 수 있으며, UDP처럼 통신 속도를 최우선시하여 사용(best effort)할 수 있게 하는 <strong>신뢰성</strong>(<em>reliability</em>) 기능이 대표적으로 사용된다.</p><p>그 외에는 다음과 같다.</p><ul><li><em>history</em> : 통신 상태에 따라 정해진 사이즈만큼의 데이터를 <strong>보관</strong><li><em>Durability</em> : 데이터를 수신하는 서브스크라이버가 생성되기 전의 데이터를 <strong>사용할지 폐기할지</strong>에 대한 설정<li><em>Deadline</em> : 정해진 주기 안에 데이터가 발신 및 수신되지 않을 경우 <strong>이벤트 함수를 실행</strong>시키는 기능<li><em>Lifespan</em> : 정해진 주기 안에서 수신되는 데이터만 <strong>유효 판정</strong>하고 그렇지 않은 데이터는 삭제하는 기능<li><em>Liveliness</em> : 정해진 주기 안에서 노드 혹은 <strong>토픽의 생사</strong>를 확인</ul><p>이 외에도 엄청 많다. 이러한 QoS 설정을 통해 DDS는 적시성, 트래픽 우선순위, 안정성 및 리소스 사용과 같은 데이터를 주고 받는 모든 측면을 사용자가 제어할 수 있게 되었다.</p><p> </p><ul><li>보안</ul><p>DDS를 사용함으로서 보안 성능을 향상시켰다. DDS-Security라는 DDS 보안 사양을 ROS에 적용하여 보안에 대한 이슈를 통신단부터 해결했다. 또한, SROS2(Secure Robot Operating System 2)라는 툴을 개발하여 보안 관련 RCL 서포트 및 보안 관련 프로그래밍을 위한 툴킷을 만들어 배포했다.</p><p> </p><p> </p><h2 id="rmw-변경-방법">RMW 변경 방법 <a href="#rmw-변경-방법" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>기본적으로 실행하게 되면 기본 RMW인 <code class="language-plaintext highlighter-rouge">rmw_fastrtps_cpp</code>가 사용된다. 만약 RMW를 변경하여 사용하려면 위에 개발 환경에서 hash(#)처리했던 설정들로 변경하여 사용하면 된다.</p><div class="language-markdown highlighter-rouge"><div class="code-header"> <span data-label-text="Markdown"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>export RMW_IMPLEMENTATION=rmw_fastrtps_cpp
<span class="gh"># export RMW_IMPLEMENTATION=rmw_connext_cpp</span>
<span class="gh"># export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp</span>
<span class="gh"># export RMW_IMPLEMENTATION=rmw_gurumdds_cpp</span>
<span class="gh"># export RMW_IMPLEMENTATION=rmw_opensplice_cpp</span>
</pre></table></code></div></div><p>이를 변경하고 나서 노드를 실행하면 된다.</p><div class="table-wrapper"><table><tbody><tr><td>rclcpp_tutorial은 <a href="https://cafe.naver.com/openrt/24451">0025번 목차</a>를 확인하길 바란다. 단지 아래 내용을 확인하려면 별다른 설정없이 <code class="language-plaintext highlighter-rouge">ros2 run demo_nodes_cpp talker</code>으로 실행하면 된다.</table></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_cyclonedds_cpp
<span class="nv">$ </span>ros2 run rclcpp_tutorial helloworld_publisher
<span class="o">[</span>INFO]: Published message: Hello World: 0
<span class="o">[</span>INFO]: Published message: Hello World: 1
<span class="o">[</span>INFO]: Published message: Hello World: 2
<span class="o">[</span>INFO]: Published message: Hello World: 3
<span class="o">[</span>INFO]: Published message: Hello World: 4
...
</pre></table></code></div></div><p>만약 RMW_IMPLEMENTATION 설정을 각각 테스트하고자 한다면, 각 노드 별로 서로 다르게 RMW_IMPLEMENTATION 환경 변수로 선언할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_cyclonedds_cpp
<span class="nv">$ </span>ros2 run rclcpp_tutorial helloworld_publisher
<span class="o">[</span>INFO]: Published message: Hello World: 0
<span class="o">[</span>INFO]: Published message: Hello World: 1
<span class="o">[</span>INFO]: Published message: Hello World: 2
<span class="o">[</span>INFO]: Published message: Hello World: 3
<span class="o">[</span>INFO]: Published message: Hello World: 4
...
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_fastrtps_cpp
<span class="nv">$ </span>ros2 run rclcpp_tutorial helloworld_subscriber
<span class="o">[</span>INFO]: Received message: Hello World: 0
<span class="o">[</span>INFO]: Received message: Hello World: 1
<span class="o">[</span>INFO]: Received message: Hello World: 2
<span class="o">[</span>INFO]: Received message: Hello World: 3
<span class="o">[</span>INFO]: Received message: Hello World: 4
...
</pre></table></code></div></div><p>이렇게 실행해서 통신이 되면, 문제 없이 실행된 것이다.</p><p> </p><h2 id="domain-변경-방법">Domain 변경 방법 <a href="#domain-변경-방법" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>UDP 멀티캐스트로 통신이 이루어지기 때문에, 별도의 설정을 하지 않으면 같은 네트워크의 모든 노드가 연결된다. 예를 들어 같은 연구실에서 동일 네트워크를 사용한다면 다른 연구원들의 노드의 데이터에 접근 가능하게 된다.</p><p>그래서 다른 네트워크를 이용하도록 설정하거나 name space를 변경하여 사용하면 된다. 가장 간단한 방법으로는 DDS의 domain을 변경하는 것이다. 이는 <code class="language-plaintext highlighter-rouge">ROS_DOMAIN_ID</code> 라는 환경변수를 변경한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>11
<span class="nv">$ </span>ros2 run rclcpp_tutorial helloworld_publisher
<span class="o">[</span>INFO]: Published message: Hello World: 0
<span class="o">[</span>INFO]: Published message: Hello World: 1
<span class="o">[</span>INFO]: Published message: Hello World: 2
<span class="o">[</span>INFO]: Published message: Hello World: 3
<span class="o">[</span>INFO]: Published message: Hello World: 4
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>12
<span class="nv">$ </span>ros2 run rclcpp_tutorial helloworld_subscriber


<span class="nv">$ </span><span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>11
<span class="nv">$ </span>ros2 run rclcpp_tutorial helloworld_subscriber
<span class="o">[</span>INFO]: Received message: Hello World: 89
<span class="o">[</span>INFO]: Received message: Hello World: 90
...
</pre></table></code></div></div><p>도메인을 다르게 설정했기 때문에, 메시지를 받지 못하다가 같은 ID로 설정하니 구독이 진행되는 것을 확인할 수 있다. DOMAIN_ID는 대체로 0~232까지의 정수를 사용한다.</p><p> </p><p> </p><h2 id="qos-테스트">QoS 테스트 <a href="#qos-테스트" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>위에서 QoS의 특정 중 reliable, reliability 기능을 설명했다. 이에 대해 간단한 테스트를 진행해보고자 한다.</p><p>이 테스트에서는 tc(traffic control)라는 리눅스 네트워크 트래픽 제어 유틸리티를 사용하여 임의의 데이터 손실(10%)를 만들어 reliability성을 테스트했다.</p><p> </p><p>기본적으로 Reliablility의 기본 설정은 RLIABLE 로 되어 있다. 그렇기에 데이터 손실이 있어도 TCP와 같이 ack로 매번 확인하여 손실된 데이터를 재전송하므로 잃어버리는 데이터가 없다. 그러나 손실이 존재할 때, 터미널 창을 잠시 멈추는 것을 확인할 수 있는데, 이 때 손실된 데이터를 순차적으로 재전송하고 다시 ack 작업을 하기 때문이다.</p><ul><li>Reliability가 BEST_EFFORT로 되어 있을 때</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>tc qdisc add dev lo root netem loss 10%
</pre></table></code></div></div><p>tc의 데이터 손실을 10%로 설정한 후 동일하게 실행해보면, 1부터 순차적으로 데이터를 전송했지만, 서브스크라이버 노드에 데이터를 손실한 채 표시된다.</p><p> </p><p>데이터 손실이 있어도 문제없는 데이터라면 Reliability를 <strong>BEST_EFFORT</strong>로 설정하면 속도가 더 빨라질 것이다.</p><p> </p><p>마지막으로 tc를 다시 되돌려놓는다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>tc qdisc delete dev lo root netem loss 10%
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div style="text-align: left;"> <a href="http://hits.dwyl.com/dkssud8150.github.io/posts/introduction/" target="_blank"> <img data-src="http://hits.dwyl.com/dkssud8150.github.io/posts/introduction.svg" data-proofer-ignore> </a></div><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/classlog/'>Classlog</a>, <a href='/categories/ros2/'>ROS2</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ros2/" class="post-tag no-text-decoration" >ROS2</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[ROS2 이론] 목차 및 개요 - JaeHo Yoon&amp;url=https://dkssud8150.github.io/posts/introduction/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[ROS2 이론] 목차 및 개요 - JaeHo Yoon&amp;u=https://dkssud8150.github.io/posts/introduction/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://dkssud8150.github.io/posts/introduction/&amp;text=[ROS2 이론] 목차 및 개요 - JaeHo Yoon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://dkssud8150.github.io/posts/introduction/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script></div><script src="https://utteranc.es/client.js" repo="dkssud8150/dkssud8150.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gitpage/">[깃허브 프로필 꾸미기] github 프로필 만들기</a><li><a href="/posts/product/">[깃허브 프로필 꾸미기] productive box 만들기</a><li><a href="/posts/regex/">[데브코스] 2주차 - linux 기초(REGEX)</a><li><a href="/posts/Kfold/">KFold Cross Validation 과 StratifiedKFold</a><li><a href="/posts/cmake/">[데브코스] 17주차 - CMake OpenCV, Eigen, Pangolin install </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/turtlesim/"><div class="card-body"> <em class="timeago small" date="2022-07-26 04:23:00 +0900" >Jul 26, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ROS2 이론] turtlesim 실행</h3><div class="text-muted small"><p> 개발 환경을 설정하는 것은 해당 블로그를 확인해보길 바란다.   007 패키지 설치와 노드 실행 Turtlesim 이란? 추가 예정.     Turtlesim 패키지 설치 turtlesim은 ROS의 기본 기능을 가지고 있어 튜토리얼로 많이 사용...</p></div></div></a></div><div class="card"> <a href="/posts/package/"><div class="card-body"> <em class="timeago small" date="2022-07-27 01:23:00 +0900" >Jul 27, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip> [ROS2 프로그래밍] ROS 패키지 설계 및 토픽 뜯어보기</h3><div class="text-muted small"><p> ROS 패키지 제작 ROS 패키지 설계 목적별로 나누어 노드 단위의 프로그램을 작성하고, 노드와 노드간의 데이터 통신을 설계해야 한다. 이번 예제 패키지는 토픽, 서비스, 액션으로 구성하고자 한다. 총 4개의 노드로 구성되며, 각 노드에서는 1개 이상의 토픽 퍼블리셔, 토픽 서브스크라이브, 서비스 서버, 서비스 클라이언트, 액션 서버, 액션 ...</p></div></div></a></div><div class="card"> <a href="/posts/helloworld/"><div class="card-body"> <em class="timeago small" date="2022-07-26 01:35:00 +0900" >Jul 26, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[ROS2 프로그래밍] ROS 프로그래밍 코드 스타일 및 프로그래밍 기초</h3><div class="text-muted small"><p> 023 ROS 프로그래밍 규칙 (코드 스타일) ROS2 프로그래밍 규칙 (코드 스타일) 협업 프로그래밍 작업 시 일관된 규칙을 만들고, 이를 준수하여야 코드가 꼬이거나 문제가 생기지 않는다. ROS가 지원하느 프로그래밍 언어는 다양하지만, 가장 많이 사용되는 C++과 python만 살펴보자.   C++ style ROS2 Develo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/calibration/" class="btn btn-outline-primary" prompt="Older"><p>[데브코스] 18주차 - Camera-LiDAR Calibration</p></a> <a href="/posts/helloworld/" class="btn btn-outline-primary" prompt="Newer"><p>[ROS2 프로그래밍] ROS 프로그래밍 코드 스타일 및 프로그래밍 기초</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">JaeHo YooN</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NC7MWHVXJE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NC7MWHVXJE'); }); </script>