<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[데브코스] 5주차 - OpenCV video processing" /><meta name="author" content="JaeHo YooN" /><meta property="og:locale" content="en" /><meta name="description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><meta property="og:description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><link rel="canonical" href="https://dkssud8150.github.io/posts/imgproc/" /><meta property="og:url" content="https://dkssud8150.github.io/posts/imgproc/" /><meta property="og:site_name" content="JaeHo Yoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-15T18:38:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[데브코스] 5주차 - OpenCV video processing" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@JaeHo YooN" /><meta name="google-site-verification" content="znvuGsQGYxMZPBslC4XG6doCYao6Y-fWibfGlcaMHH8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JaeHo YooN"},"dateModified":"2022-03-16T02:03:16+09:00","datePublished":"2022-03-15T18:38:00+09:00","description":"Do focus on developing ‘your ability’ rather than waste time on making you famous.","headline":"[데브코스] 5주차 - OpenCV video processing","mainEntityOfPage":{"@type":"WebPage","@id":"https://dkssud8150.github.io/posts/imgproc/"},"url":"https://dkssud8150.github.io/posts/imgproc/"}</script><title>[데브코스] 5주차 - OpenCV video processing | JaeHo Yoon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHo Yoon"><meta name="application-name" content="JaeHo Yoon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/shin_chan.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaeHo Yoon</a></div><div class="site-subtitle font-italic">Mamba Mentality</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fab fa-angellist ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dkssud8150" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hoya58150','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.notion.so/18490713817d403696812c57d0abe730" aria-label="notion" target="_blank" rel="noopener"> <i class="fab fa-battle-net"></i> </a> <a href="https://www.linkedin.com/in/jaeho-yoon-90b62b230" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/jai_ho8150/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[데브코스] 5주차 - OpenCV video processing </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="/assets/img/dev/week5/day3/main.jpeg" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore><h1 data-toc-skip>[데브코스] 5주차 - OpenCV video processing</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/dkssud8150">JaeHo YooN</a> </em></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-03-15 18:38:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Tue, Mar 15, 2022, 6:38 PM +0900" >Mar 15, 2022</em> </span> <span> Updated <em class="timeago" date="2022-03-16 02:03:16 +0900 " data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 16, 2022, 2:03 AM +0900" >Mar 16, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3589 words"> <em>19 min</em> read</span></div></div></div><div class="post-content"><p><br /></p><h1 id="카메라와-동영상-처리">카메라와 동영상 처리</h1><h2 id="videocapture-클래스">VideoCapture 클래스 <a href="#videocapture-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>OpenCV에서는 카메라와 동영상으로부터 프레임(frame)을 받아오는 작업을 VideoCapture 클래스 하나로 처리한다. 일단 카메라와 동영상을 여는 작업이 수행되면, 이후에는 매 프레임을 받아오는 공통의 작업을 수행한다.</p><p><img data-src="/assets/img/dev/week5/day3/videocapture.png" data-proofer-ignore></p><p>캠과 파일을 open()으로 열게 되면 read()를 통해 영상파일로부터 프레임을 받아온다.</p><p>추가적으로</p><ul><li>isOpened() : 현재 장치나 비디오 파일이 정상적으로 오픈되어 있는지 확인<li>grab()/retrieve() : read()가 이 두개의 조합으로 구성되는데, grab()은 카메라에게 캡쳐를 시작하라는 명령, retrieve()는 캡쳐된 영상을 프로그램으로 전송받는 명령<li>get()/set() : get()은 속성을 받아옴, set()은 속성 정보를 설정<li>release() : 사용이 끝나면 끝났음을 알려주는 것</ul><p>VideoCapture 클래스의 정의는 다음과 같다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">VideoCapture</span>
<span class="p">{</span>
    <span class="nl">public:</span>
        <span class="cm">/* 생성자 */</span>
        <span class="n">VideoCapture</span><span class="p">();</span>
        <span class="n">VideoCapture</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span>
        <span class="n">VideoCapture</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span>
        <span class="k">virtual</span> <span class="o">~</span><span class="n">VideoCapture</span><span class="p">();</span>    <span class="c1">// 소멸자</span>

        <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">open</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span> <span class="c1">// 문자를 받을 때, 동영상 파일을 오픈할 때 사용</span>
        <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">open</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span> <span class="c1">// 정수를 입력으로 받을 때, 카메라 장치를 오픈할 때 사용</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="n">release</span><span class="p">();</span> <span class="c1">// 현재 사용이 끝날 때 호출</span>

        <span class="k">virtual</span> <span class="n">VideoCapture</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">Mat</span><span class="o">&amp;</span> <span class="n">image</span><span class="p">);</span> <span class="c1">// 프레임 받아오기</span>
        <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">VideoCapture</span><span class="o">::</span><span class="n">read</span><span class="p">(</span><span class="n">OutputArray</span> <span class="n">image</span><span class="p">);</span> <span class="c1">// 프레임 받아오기</span>

        <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">set</span><span class="p">(</span><span class="kt">int</span> <span class="n">propId</span><span class="p">,</span> <span class="kt">double</span> <span class="n">value</span><span class="p">);</span> <span class="c1">// 속성 설정</span>
        <span class="k">virtual</span> <span class="kt">double</span> <span class="n">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">propId</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>   <span class="c1">// 속성 참조</span>
        <span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><p>생성자와 open이 동일하게 인자를 받을 수 있기 때문에 생성과 동시에 오픈을 할 수가 있다.</p><p><br /></p><h3 id="카메라-열기">카메라 열기 <a href="#카메라-열기" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">VideoCapture</span><span class="o">::</span><span class="n">VideoCapture</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">VideoCapture</span><span class="o">::</span><span class="n">open</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>index : 사용할 캡쳐 장치의 ID, 기본적으로 시스템은 0번부터 시작하기 때문에, 0으로 지정하면 첫번째, 여러 대의 카메라가 연결되어 있으면 0, 1, 순서로 지정하면 된다.<li>apiPreference : 선호하는 카메라 처리 방법을 지정, 대부분 Opencv에서 알아서 지정해준다.<ul><li>e.g. cv::CAP_DSHOW, cv::CAP_MSMF, cv::CAP_V4L, etc</ul><li>반환값 : VideoCapture 생성자는 VideoCapture 객체를 반환한다. VideoCapture::open() 함수는 작업이 성공하면 true, 실패하면 false</ul><p><br /></p><h3 id="동영상-파일-열기">동영상 파일 열기 <a href="#동영상-파일-열기" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">VideoCapture</span><span class="o">::</span><span class="n">VideoCapture</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">VideoCapture</span><span class="o">::</span><span class="n">open</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">apiPreference</span> <span class="o">=</span> <span class="n">CAP_ANY</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>filename : 동영상 파일 이름, 정지 영상 시퀀스(여러 장의 연속 이미지), 비디오 스트림 URL 등<ul><li>비디오 파일 - ‘video.avi’, ‘./data/video.avi’<li>정지 영상 시퀀스 - ‘img_%02d.jpg’<li>비디오 스트림 URL - “https://… mp4”</ul><li>apiPreference : 위와 동일<li>반환값 : 위와 동일</ul><p><br /></p><h3 id="현재-프레임-받아오기">현재 프레임 받아오기 <a href="#현재-프레임-받아오기" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kt">bool</span> <span class="n">VideoCapture</span><span class="o">::</span><span class="n">read</span><span class="p">(</span><span class="n">OutputArray</span> <span class="n">image</span><span class="p">);</span>
<span class="n">VideoCapture</span><span class="o">&amp;</span> <span class="n">VideoCapture</span><span class="o">::</span><span class="k">operator</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">Mat</span><span class="o">&amp;</span> <span class="n">image</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>image : 현재 프레임, 만약 현재 프레임을 받아오지 못하면 비어 있는 영상으로 설정<li>반환값 : VideoCapture::read()함수는 작업이 성공하면 true, 실패하면 false</ul><p>OutputArray 형태이므로 Mat frame 변수에 데이터를 받아 read()안에 넣어도 된다.</p><blockquote><p>참고사항 - ‘»’ 연산자 오버로딩은 내부에서 read()함수를 재호출하는 래퍼(wrapper)함수다. 그래서 ‘»’ 대신 read()함수를 사용해도 된다.</p></blockquote><p><br /></p><ul><li>카메라 열어 프레임 출력</ul><p>그렇다면 시스템에 내장되어 있는 카메라를 불러오는 코드를 작성해보았다. 카메라가 오픈되지 않았다면 failed를 출력할 것이다. 카메라를 오픈했다면 아무 메시지도 뜨지 않는다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">"opencv2/opencv.hpp"</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">VideoCapture</span> <span class="n">cap</span><span class="p">;</span>
	<span class="n">cap</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cap</span><span class="p">.</span><span class="n">isOpened</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Camera open failed"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>정상적으로 작동한다면 다음 진행을 작성한다. 먼저 프레임마다 불러올 것이기 때문에 while문을 사용하고, 프레임을 frame 변수에 저장할 것이기에 frame 변수를 선언해서 cap.read(frame)를 사용해서 읽어온다. 그리고 안전성을 위해 불러오지 못한 경우에는 빠져나가도록 하고, imshow를 하여 윈도우를 생성해주면서 창에 이미지를 표현한다. 이 때, waitKey()를 하지 않는다면 이미지가 나오지 않을 것이다. 그래서 waitKey를 설정해준다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">"opencv2/opencv.hpp"</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">VideoCapture</span> <span class="n">cap</span><span class="p">;</span>
	<span class="n">cap</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="cm">/* 이 두개를 합쳐서 
    VideoCapture cap(0); 
    으로 해도 된다. */</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cap</span><span class="p">.</span><span class="n">isOpened</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Camera open failed"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">Mat</span> <span class="n">frame</span><span class="p">,</span> <span class="n">edge</span><span class="p">;</span>      <span class="c1">// frame이란 한장의 정지 영상</span>
	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cap</span> <span class="o">&gt;&gt;</span> <span class="n">frame</span><span class="p">;</span> <span class="c1">// == cap.read(frame);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
			<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Frame empty!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

        <span class="n">Canny</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span> <span class="c1">// frame에서 외각을 따서 만드는 것</span>

		<span class="n">imshow</span><span class="p">(</span><span class="s">"frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">);</span>
		<span class="n">imshow</span><span class="p">(</span><span class="s">"edge"</span><span class="p">,</span> <span class="n">edge</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">27</span><span class="p">)</span> <span class="c1">//ESC</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">cap</span><span class="p">.</span><span class="n">release</span><span class="p">();</span> <span class="c1">// 카메라 종료</span>
	<span class="n">destroyAllWindows</span><span class="p">();</span> <span class="c1">// 생성했던 창을 닫아줌</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day3/camera.png" data-proofer-ignore></p><p>여기서 주의할 점은 waitKey()로 아무 인자없이 실행하면 움직이지 않다가 키를 입력해야 움직이는 것을 볼 수 있다. 그래서 무제한으로 기다리는 것이 아니라 1ms만 기다리고 다음 프레임을 받도록 설정해야 계속 움직인다.</p><p>여기서 1ms만 기다리라 해서 1ms만 기다리고 다음 프레임을 받아오는 것이 아니라 카메라마다의 FPS를 통해서 만약 30fps라면 33msec 마다 1장씩 날아오므로 loop문 처음으로 가서 프레임이 올 때까지, 즉 32ms를 더 기다리고 받아서 시작할 것이다.</p><p><br /></p><ul><li>동영상 파일 프레임 출력</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">"opencv2/opencv.hpp"</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>   
    <span class="cm">/* 카메라
    VideoCapture cap(0); */</span>
    <span class="n">VideoCapture</span> <span class="n">cap</span><span class="p">(</span><span class="s">"test_video.mp4"</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cap</span><span class="p">.</span><span class="n">isOpened</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Camera open failed"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">Mat</span> <span class="n">frame</span><span class="p">,</span> <span class="n">edge</span><span class="p">;</span>      <span class="c1">// frame이란 한장의 정지 영상</span>
	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cap</span> <span class="o">&gt;&gt;</span> <span class="n">frame</span><span class="p">;</span>     <span class="c1">// == cap.read(frame);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
			<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Frame empty!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 동영상 맨 마지막으로 가도 이것이 실행되고 종료 될 것이다.</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

        <span class="n">Canny</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span> <span class="c1">// frame에서 외각을 따서 만드는 것</span>

		<span class="n">imshow</span><span class="p">(</span><span class="s">"frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">);</span>
		<span class="n">imshow</span><span class="p">(</span><span class="s">"edge"</span><span class="p">,</span> <span class="n">edge</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">27</span><span class="p">)</span> <span class="c1">// ESC</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">cap</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>       <span class="c1">// 비디오 종료</span>
	<span class="n">destroyAllWindows</span><span class="p">();</span> <span class="c1">// 생성했던 창을 닫아줌</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day3/video.png" data-proofer-ignore></p><p><br /></p><h3 id="카메라와-동영상-속성-값-참조-및-설정">카메라와 동영상 속성 값 참조 및 설정 <a href="#카메라와-동영상-속성-값-참조-및-설정" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kt">double</span> <span class="n">VideoCapture</span><span class="o">::</span><span class="n">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">propId</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">VideoCapture</span><span class="o">::</span><span class="n">set</span><span class="p">(</span><span class="kt">int</span> <span class="n">propId</span><span class="p">,</span> <span class="kt">double</span> <span class="n">value</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>probId : 속성 플래스<ul><li>CAP_PROP_POS_MSEC : 비디오 파일에서 현재 위치를 msec단위로 표기<li>CAP_PROP_FRAME_WIDTH : 프레임 가로 크기<li>CAP_PROP_FRAME_HEIGHT : 프레임 세로 크기<li>CAP_PROP_FPS : 초당 프레임 수<li>CAP_PROP_FRAME_COUNT : 비디오 파일의 총 프레임 수<li>CAP_PROP_POS_FRAMES : 현재 프레임 번호<li>CAP_PROP_BRIGHTNESS : 밝기<li>CAP_PROP_EXPOSURE : 노출</ul><li>value : 속성값, 필요한 경우 정수형으로 형변환하여 사용<li>반환값 :<ul><li>get : 세로나 가로는 정수지만, 통일화하기 위해 double로 추출<li>set : 성공하면 true, 실패하면 false</ul></ul><p><br /></p><ul><li>현재 카메라 크기 출력</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">w</span> <span class="o">=</span> <span class="n">cvRound</span><span class="p">(</span><span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_WIDTH</span><span class="p">));</span> <span class="c1">// == (int)(cap.get(...)</span>
<span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="n">cvRound</span><span class="p">(</span><span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_HEIGHT</span><span class="p">));</span> <span class="c1">// == (int)(cap.get(...)</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"width: "</span> <span class="o">&lt;&lt;</span> <span class="n">w</span> <span class="o">&lt;&lt;</span> <span class="s">", Height: "</span> <span class="o">&lt;&lt;</span> <span class="n">h</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></table></code></div></div><p>이를 실행하면 다음과 같이 출력된다.</p><p><img data-src="/assets/img/dev/week5/day3/widthheight.png" data-proofer-ignore></p><ul><li>크기 조정</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">cap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_WIDTH</span><span class="p">,</span> <span class="mi">640</span><span class="p">);</span>
<span class="n">cap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_HEIGHT</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">w</span> <span class="o">=</span> <span class="n">cvRound</span><span class="p">(</span><span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_WIDTH</span><span class="p">));</span> 
<span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="n">cvRound</span><span class="p">(</span><span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_HEIGHT</span><span class="p">));</span> 

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"width: "</span> <span class="o">&lt;&lt;</span> <span class="n">w</span> <span class="o">&lt;&lt;</span> <span class="s">", Height: "</span> <span class="o">&lt;&lt;</span> <span class="n">h</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></table></code></div></div><p>이렇게 하면 다음과 같이 변화한 것을 볼 수 있다.</p><p><img data-src="/assets/img/dev/week5/day3/widthheightc.png" data-proofer-ignore></p><p>이는 카메라만 가능하고, 동영상의 경우 이미 정해져있기 때문에 동작하지 않을 것이다.</p><p><br /></p><ul><li>fps 출력하기</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kt">double</span> <span class="n">fps</span> <span class="o">=</span> <span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_FPS</span><span class="p">);</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"fps: "</span> <span class="o">&lt;&lt;</span> <span class="n">fps</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></table></code></div></div><p><img data-src="/assets/img/dev/week5/day3/fps.png" data-proofer-ignore></p><p>현재 가지고 있는 동영상의 fps는 50이라는 것을 알 수 있다. 이것을 카메라로 돌리면 0으로 나올 것이다.</p><p><br /></p><p><br /></p><h2 id="videowriter-클래스">VideoWriter 클래스 <a href="#videowriter-클래스" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>OpenCV에서는 일련의 정지 영상을 동영상 파일로 저장할 수 있는 VideoWriter 클래스를 제공한다.</p><p>VideoWriter의 정의는 다음과 같다</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">VideoWriter</span>
<span class="p">{</span>
	<span class="nl">public:</span>
		<span class="cm">/* 저장할 동영상 파일 열기 */</span>
		<span class="n">VideoWriter</span><span class="p">();</span>
		<span class="n">VideoWriter</span> <span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fourcc</span><span class="p">,</span> <span class="kt">double</span> <span class="n">fps</span><span class="p">,</span> <span class="n">Size</span> <span class="n">frameSize</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isColor</span> <span class="o">=</span> <span class="nb">true</span><span class="p">);</span>
		<span class="k">virtual</span> <span class="o">~</span><span class="n">VideoCapture</span><span class="p">();</span>

		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">open</span> <span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fourcc</span><span class="p">,</span> <span class="kt">double</span> <span class="n">fps</span><span class="p">,</span> <span class="n">Size</span> <span class="n">frameSize</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isColor</span> <span class="o">=</span> <span class="nb">true</span><span class="p">);</span>
		<span class="k">virtual</span> <span class="kt">void</span> <span class="n">release</span><span class="p">();</span>

		<span class="k">virtual</span> <span class="n">VideoCapture</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="k">const</span> <span class="n">Mat</span><span class="o">&amp;</span> <span class="n">image</span><span class="p">);</span> <span class="c1">// 프레임 저장</span>

		<span class="cm">/* 정보 설정하기(set) &amp; 가져오기(get) */</span>
		<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">set</span><span class="p">(</span><span class="kt">int</span> <span class="n">propId</span><span class="p">,</span> <span class="kt">double</span> <span class="n">value</span><span class="p">);</span>
		<span class="k">virtual</span> <span class="kt">double</span> <span class="n">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">porpId</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
		<span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><p><br /></p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">VideoWriter</span><span class="o">::</span><span class="n">VideoWriter</span> <span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fourcc</span><span class="p">,</span> <span class="kt">double</span> <span class="n">fps</span><span class="p">,</span> <span class="n">Size</span> <span class="n">frameSize</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isColor</span> <span class="o">=</span> <span class="nb">true</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">VideoWriter</span><span class="o">::</span><span class="n">open</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fourcc</span><span class="p">,</span> <span class="kt">double</span> <span class="n">fps</span><span class="p">,</span> <span class="n">Size</span> <span class="n">frameSize</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isColor</span> <span class="o">=</span> <span class="nb">true</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>filename : 저장할 동영상 파일 이름<li>fourcc : 압축 방식을 나타내는 4개의 문자, VideoWriter::fourcc() 함수로 생성하여 인자로 넣으면 된다.<ul><li>VideoWriter::fourcc(‘D’,’I’,’V’,’X’) : DIVX MPEG-4 코덱<li>VideoWriter::fourcc(‘X’,’V’,’I’,’D’) : XVID MPEG-4 코덱<li>VideoWriter::fourcc(‘X’,’2’,’6’,’4’) : H.264/AVC 코덱<li>VideoWriter::fourcc(‘M’,’J’,’P’,’G’) : Motion-JPEG 코덱</ul><li>fps : 초당 프레임 수<li>frameSize : 비디오 크기<li>isColor : 컬러 동영상 플래그, false로 지정하면 그레이스케일 동영상</ul><p><br /></p><p><br /></p><h3 id="카메라-동영상으로-저장하기">카메라 동영상으로 저장하기 <a href="#카메라-동영상으로-저장하기" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">"opencv2/opencv.hpp"</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">VideoCapture</span> <span class="n">cap</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cap</span><span class="p">.</span><span class="n">isOpened</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Camera open failed!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="kt">int</span>  <span class="n">fourcc</span> <span class="o">=</span> <span class="n">VideoWriter</span><span class="o">::</span><span class="n">fourcc</span><span class="p">(</span><span class="sc">'X'</span><span class="p">,</span> <span class="sc">'V'</span><span class="p">,</span> <span class="sc">'I'</span><span class="p">,</span> <span class="sc">'D'</span><span class="p">);</span>
	<span class="kt">double</span> <span class="n">fps</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span> <span class="c1">// 자신의 카메라에 맞게 설정</span>
	<span class="n">Size</span> <span class="nf">sz</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_WIDTH</span><span class="p">),</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_FRAME_HEIGHT</span><span class="p">));</span> <span class="c1">// Size sz = Size((int)cap.get(CAP_PROP_FRAME_WIDTH), (int)cap.get(CAP_PROP_FRAME_HEIGHT));</span>

	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"FPS = "</span> <span class="o">&lt;&lt;</span> <span class="n">fps</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Size = "</span> <span class="o">&lt;&lt;</span> <span class="n">sz</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

	<span class="n">VideoWriter</span> <span class="nf">output</span><span class="p">(</span><span class="s">"output.avi"</span><span class="p">,</span> <span class="n">fourcc</span><span class="p">,</span> <span class="n">fps</span><span class="p">,</span> <span class="n">sz</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">output</span><span class="p">.</span><span class="n">isOpened</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"output.avi open failed!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="kt">int</span> <span class="n">delay</span> <span class="o">=</span> <span class="n">cvRound</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">fps</span><span class="p">);</span> <span class="c1">// 프레임의 시간 간격을 구한 것, ms로 넣어야 하는데, fps란 frame per second이므로 이를 단위 변환</span>
	<span class="n">Mat</span> <span class="n">frame</span><span class="p">,</span> <span class="n">edge</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cap</span> <span class="o">&gt;&gt;</span> <span class="n">frame</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
			<span class="k">break</span><span class="p">;</span>

		<span class="n">Canny</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span>
		<span class="n">cvtColor</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">COLOR_GRAY2BGR</span><span class="p">);</span> <span class="c1">// edge는 grayscale이므로 변환해줘야 한다. </span>

		<span class="n">output</span> <span class="o">&lt;&lt;</span> <span class="n">edge</span><span class="p">;</span>	<span class="c1">// 기록을 시작하겠다는 redirection, 즉 edge를 output으로 저장하겠다.</span>

		<span class="n">imshow</span><span class="p">(</span><span class="s">"frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">);</span>
		<span class="n">imshow</span><span class="p">(</span><span class="s">"edge"</span><span class="p">,</span> <span class="n">edge</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">waitKey</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span> <span class="o">==</span> <span class="mi">27</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"output.avi file is created!!!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
	
	<span class="n">output</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>
	<span class="n">cap</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>
	<span class="n">destroyAllWindows</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><p><br /></p><h1 id="opencv-그리기-함수">OpenCV 그리기 함수</h1><div class="table-wrapper"><table><thead><tr><th>그리기 방식<th>세부 그리기 방식<th>함수 이름<tbody><tr><td>선 그리기<td>직선 그리기<td><strong>line()</strong><tr><td> <td>화삺표 그리기<td>arrowedline()<tr><td> <td>마커 그리기<td>drawMarker()<tr><td>도형 그리기<td><strong>사각형 그리기</strong><td><strong>rectangle()</strong><tr><td> <td>원 그리기<td><strong>circle()</strong><tr><td> <td>타원 그리기<td>ellipse()<tr><td> <td>다각형 그리기<td><strong>polylines()</strong>, fillPoly()<tr><td>문자열 출력하기<td>문자열 출력하기<td><strong>putText()</strong><tr><td> <td>출력 문자열 크기 계산<td>getTextSize()</table></div><p>fillPoly()는 다각형을 채워서 그린다.</p><p><br /></p><h2 id="직선-그리기">직선 그리기 <a href="#직선-그리기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">line</span><span class="p">(</span><span class="n">InputArray</span> <span class="n">img</span><span class="p">,</span> <span class="n">Point</span> <span class="n">pt1</span><span class="p">,</span> <span class="n">Point</span> <span class="n">pt2</span><span class="p">,</span> <span class="k">const</span> <span class="n">Scalar</span><span class="o">&amp;</span> <span class="n">color</span><span class="p">,</span> <span class="kt">int</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineType</span> <span class="o">=</span> <span class="n">LINE_8</span><span class="p">,</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>img : 입출력 영상<li>pt1, pt2 : 시작점, 끝점 좌표<li>color : 선 색상 또는 밝기, Scalar(0,0,255)<li>thickness : 선 두께<li>lineType : 선 타입, LINE_4, LINE_8, LINE_AA 중 하나를 지정, 이는 직선 그리기 방식이 따로 있다.<li>shift : 그리기 좌표 값의 축소 비율</ul><p><img data-src="/assets/img/dev/week5/day3/linetype.png" data-proofer-ignore></p><p>이것을 진행하면 픽셀값이 달라지기 때문에, img를 나중에 다시 사용해야 한다면 복사해놔야 한다.</p><p><br /></p><h2 id="사각형-그리기">사각형 그리기 <a href="#사각형-그리기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">rectangle</span><span class="p">(</span><span class="n">InputArray</span> <span class="n">img</span><span class="p">,</span> <span class="n">Rect</span> <span class="n">rec</span><span class="p">,</span> <span class="k">const</span> <span class="n">Scalar</span><span class="o">&amp;</span> <span class="n">color</span><span class="p">,</span> <span class="kt">int</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineType</span> <span class="o">=</span> <span class="n">LINE_8</span><span class="p">,</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>img : 입출력 영상<li>rec : 사각형 위치 정보<li>color : 선 색상 또는 밝기, Scalar(0,0,255)<li>thickness : 선 두께, <strong>음수 (-1)를 지정하면 내부를 채움</strong><li>lineType : 선 타입, LINE_4, LINE_8, LINE_AA 중 하나를 지정<li>shift : 그리기 좌표 값의 축소 비율</ul><p><br /></p><h2 id="원-그리기">원 그리기 <a href="#원-그리기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">circle</span><span class="p">(</span><span class="n">InputArray</span> <span class="n">img</span><span class="p">,</span> <span class="n">Point</span> <span class="n">center</span><span class="p">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="p">,</span> <span class="k">const</span> <span class="n">Scalar</span><span class="o">&amp;</span> <span class="n">color</span><span class="p">,</span> <span class="kt">int</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineType</span> <span class="o">=</span> <span class="n">LINE_8</span><span class="p">,</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>img : 입출력 영상<li>center : 원 중심 좌표<li>radius : 원 반지름<li>color : 선 색상 또는 밝기, Scalar(0,0,255)<li>thickness : 선 두께, <strong>음수 (-1)를 지정하면 내부를 채움</strong><li>lineType : 선 타입, LINE_4, LINE_8, LINE_AA 중 하나를 지정<li>shift : 그리기 좌표 값의 축소 비율</ul><p><br /></p><h2 id="다각형-그리기">다각형 그리기 <a href="#다각형-그리기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">polylines</span><span class="p">(</span><span class="n">InputArray</span> <span class="n">img</span><span class="p">,</span> <span class="n">InputArrayOfArrays</span> <span class="n">pts</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isClosed</span><span class="p">,</span> <span class="k">const</span> <span class="n">Scalar</span><span class="o">&amp;</span> <span class="n">color</span><span class="p">,</span> <span class="kt">int</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineType</span> <span class="o">=</span> <span class="n">LINE_8</span><span class="p">,</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>img : 입출력 영상<li>pts : 다각형 꼭짓점(외각선) 점들의 집합 , vector&lt;Point&gt;<li>isClosed : true이면 시작점과 끝점을 서로 이음 (폐곡선)<li>color : 선 색상 또는 밝기, Scalar(0,0,255)<li>thickness : 선 두께, <strong>음수 (-1)를 지정하면 내부를 채움</strong><li>lineType : 선 타입, LINE_4, LINE_8, LINE_AA 중 하나를 지정<li>shift : 그리기 좌표 값의 축소 비율</ul><p><br /></p><h2 id="문자열-출력하기">문자열 출력하기 <a href="#문자열-출력하기" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">putText</span><span class="p">(</span><span class="n">InputArray</span> <span class="n">img</span><span class="p">,</span> <span class="k">const</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">text</span><span class="p">,</span> <span class="n">Point</span> <span class="n">org</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fontFace</span><span class="p">,</span> <span class="kt">double</span> <span class="n">fontScale</span><span class="p">,</span> <span class="n">Scalar</span> <span class="n">color</span><span class="p">,</span> <span class="kt">int</span> <span class="n">thickness</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineType</span> <span class="o">=</span> <span class="n">LINE_8</span><span class="p">,</span> <span class="n">bottomLeftOrigin</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>img : 입출력 영상<li>text : 출력할 문자열<li>org : 문자열이 출력될 좌측 하단 시작 좌표<li>fontFace : 폰트 종류, cv::HersheyFonts 로 시작하는 폰트로 지정해야 함<li>fontScale : 폰트 크기 지정, 기본 폰트 크기의 배수를 지정<li>color : 문자열 색상<li>thickness : 폰트 두께<li>lineType : 선 타입, LINE_4, LINE_8, LINE_AA 중 하나를 지정</ul><p><br /></p><p><br /></p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">"opencv2/opencv.hpp"</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">VideoCapture</span> <span class="n">cap</span><span class="p">(</span><span class="s">"test_video.mp4"</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cap</span><span class="p">.</span><span class="n">isOpened</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Video open failed!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">Mat</span> <span class="n">frame</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cap</span> <span class="o">&gt;&gt;</span> <span class="n">frame</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
			<span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Empty frame!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="n">line</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="mi">570</span><span class="p">,</span> <span class="mi">280</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">560</span><span class="p">),</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>	 <span class="c1">// 임의의 점을 잡아 차선 인식 해놓음</span>
		<span class="n">line</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="mi">570</span><span class="p">,</span> <span class="mi">280</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">720</span><span class="p">),</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>

		<span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">cvRound</span><span class="p">(</span><span class="n">cap</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">CAP_PROP_POS_FRAMES</span><span class="p">));</span>
		<span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">format</span><span class="p">(</span><span class="s">"frame number: %d"</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
		<span class="n">putText</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">FONT_HERSHEY_SIMPLEX</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">LINE_AA</span><span class="p">);</span> <span class="c1">// frame number 화면에 출력</span>

		<span class="n">imshow</span><span class="p">(</span><span class="s">"frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="mi">27</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">cap</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>
	<span class="n">destroyAllWindows</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div style="text-align: left;"> <a href="http://hits.dwyl.com/dkssud8150.github.io/posts/imgproc/" target="_blank"> <img data-src="http://hits.dwyl.com/dkssud8150.github.io/posts/imgproc.svg" data-proofer-ignore> </a></div><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/classlog/'>Classlog</a>, <a href='/categories/devcourse/'>devcourse</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/opencv/" class="post-tag no-text-decoration" >opencv</a> <a href="/tags/devcourse/" class="post-tag no-text-decoration" >devcourse</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[데브코스] 5주차 - OpenCV video processing - JaeHo Yoon&amp;url=https://dkssud8150.github.io/posts/imgproc/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[데브코스] 5주차 - OpenCV video processing - JaeHo Yoon&amp;u=https://dkssud8150.github.io/posts/imgproc/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://dkssud8150.github.io/posts/imgproc/&amp;text=[데브코스] 5주차 - OpenCV video processing - JaeHo Yoon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://dkssud8150.github.io/posts/imgproc/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script></div><script src="https://utteranc.es/client.js" repo="dkssud8150/dkssud8150.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gitpage/">[깃허브 프로필 꾸미기] github 프로필 만들기</a><li><a href="/posts/product/">[깃허브 프로필 꾸미기] productive box 만들기</a><li><a href="/posts/regex/">[데브코스] 2주차 - linux 기초(REGEX)</a><li><a href="/posts/Kfold/">KFold Cross Validation 과 StratifiedKFold</a><li><a href="/posts/cmake/">[데브코스] 17주차 - CMake OpenCV, Eigen, Pangolin install </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/opencvinstall/"><div class="card-body"> <em class="timeago small" date="2022-03-14 18:27:00 +0900" >Mar 14, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 5주차 - OpenCV abstract and install</h3><div class="text-muted small"><p> OpenCV 개요 openCV란 Open Source로 개발되고 있는 컴퓨터 비전과 머신러닝에 대한 소프트웨어 라이브러리다. 공식 사이트 OpenCV를 사용하는 이유 무료 사용 : BSD/Apache 2 라이선스를 따르기 때문에 학교/회사 등으로 상업적 사용도 가능 multiple interface: c, c++, python, ja...</p></div></div></a></div><div class="card"> <a href="/posts/opencvimread/"><div class="card-body"> <em class="timeago small" date="2022-03-14 21:15:00 +0900" >Mar 14, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 5주차 - OpenCV Print image file and Setting for OpenCV</h3><div class="text-muted small"><p> 영상 파일 불러오기 가지고 있던 lenna.bmp 파일을 불러와서 화면에 출력하는 OpenCV 예제 프로그램 편의상 이전 강의에서 작성한 HelloCV 프로젝트에 필요한 소스 코드를 추가 아래는 lenna.bmp 파일이다. 현재 폴더에 있는 lenna.bmp 파일을 불러와서 화면에 출력하는 OpenCV 예제 코드다. #in...</p></div></div></a></div><div class="card"> <a href="/posts/opencvclass/"><div class="card-body"> <em class="timeago small" date="2022-03-15 02:45:00 +0900" >Mar 15, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 5주차 - OpenCV primary Class</h3><div class="text-muted small"><p> OpenCV 주요 클래스 Point_ 클래스 point_ 클래스 : 2차원 점의 좌표 표현을 위한 템플릿 클래스 멤버 변수 : x,y ( 점 좌표 ) 멤버 함수 : dot() : 내적 계산 ddot() : 더블 타입으로 내적 계산 cross() : 외적 계산 inside() : 한 점...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/opencvclass/" class="btn btn-outline-primary" prompt="Older"><p>[데브코스] 5주차 - OpenCV primary Class</p></a> <a href="/posts/event/" class="btn btn-outline-primary" prompt="Newer"><p>[데브코스] 5주차 - OpenCV Keyboard and Mouse Event Processing</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">JaeHo YooN</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NC7MWHVXJE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NC7MWHVXJE'); }); </script>