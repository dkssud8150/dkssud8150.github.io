<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format" /><meta name="author" content="JaeHo YooN" /><meta property="og:locale" content="en" /><meta name="description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><meta property="og:description" content="Do focus on developing ‘your ability’ rather than waste time on making you famous." /><link rel="canonical" href="https://dkssud8150.github.io/posts/dataset/" /><meta property="og:url" content="https://dkssud8150.github.io/posts/dataset/" /><meta property="og:site_name" content="JaeHo Yoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-05-03T17:20:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@JaeHo YooN" /><meta name="google-site-verification" content="znvuGsQGYxMZPBslC4XG6doCYao6Y-fWibfGlcaMHH8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JaeHo YooN"},"dateModified":"2022-05-17T02:56:35+09:00","datePublished":"2022-05-03T17:20:00+09:00","description":"Do focus on developing ‘your ability’ rather than waste time on making you famous.","headline":"[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format","mainEntityOfPage":{"@type":"WebPage","@id":"https://dkssud8150.github.io/posts/dataset/"},"url":"https://dkssud8150.github.io/posts/dataset/"}</script><title>[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format | JaeHo Yoon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHo Yoon"><meta name="application-name" content="JaeHo Yoon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/shin_chan.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaeHo Yoon</a></div><div class="site-subtitle font-italic">Mamba Mentality</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fab fa-angellist ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/dkssud8150" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hoya58150','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.notion.so/18490713817d403696812c57d0abe730" aria-label="notion" target="_blank" rel="noopener"> <i class="fab fa-battle-net"></i> </a> <a href="https://www.linkedin.com/in/jaeho-yoon-90b62b230" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/jai_ho8150/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/dkssud8150">JaeHo YooN</a> </em></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-05-03 17:20:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Tue, May 3, 2022, 5:20 PM +0900" >May 3, 2022</em> </span> <span> Updated <em class="timeago" date="2022-05-17 02:56:35 +0900 " data-toggle="tooltip" data-placement="bottom" title="Tue, May 17, 2022, 2:56 AM +0900" >May 17, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2183 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p><br /></p><p>딥러닝을 하기 위해서는 데이터셋에 대한 이해가 필요하다. 자신이 진행하고자 하는 문제에 대해 정의하고, 데이터를 가져오는데, 데이터의 클래스가 어떤지, 그에 대한 비율이 어떤지, 어떤 환경을 가지고 있는지 살펴봐야 한다.</p><p>데이터를 가져오는 과정은 다음과 같다.</p><ol><li>데이터 탐색(EDA)<ul><li>데이터의 클래스 종류와 비율, 어떤 환경을 가지는지 확인</ul><li>데이터 가공(전처리)<ul><li>데이터를 가져온 후에는 데이터 전처리를 진행해야 한다. (data augmentation, removing noise)</ul><li>데이터 나누기<ul><li>train/valid/test 로 나누는데, 비율을 잘 나눠야 한다. 예를 들어 특정 dataset에서 환경/클래스 비율 등이 완벽하게 나눠지지 않는다. 그러므로 k-cross validation을 사용하되 StratifiedKFold와 같이 클래스 비율에 맞게 분류하는 것도 중요하다.</ul><li>모델 생성<li>모델 검증<li>대규모 학습<ul><li>대규모를 학습하는데 모델 생성과 검증에 비해 더 많은 시간이 걸리기 때문이다.</ul></ol><p><br /></p><p><br /></p><p>자율주행과 관련된 다양한 데이터를 전체적으로 확인할 수 있는 사이트가 있다.</p><p>https://scale.com/open-datasets</p><p><img data-src="/assets/img/dev/week12/day2/scale.png" data-proofer-ignore></p><p><br /></p><p><br /></p><h1 id="datasets">DataSets</h1><h2 id="kitti-dataset">KITTI dataset <a href="#kitti-dataset" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>KITTI데이터셋은 2012년에 공개된 데이터로 다소 오래된 데이터셋이다. 자율주행을 위한 데이터는 아니지만, 좋은 gps와 lidar 데이터를 가지고 있다.</p><h3 id="kitti---setup">Kitti - Setup <a href="#kitti---setup" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="/assets/img/dev/week12/day2/kitti.png" data-proofer-ignore></p><p>카메라와 라이다의 위치들이 각각 다르므로, 이 위치를 일치시켜서 코드를 구현해야 한다. 좌표계는 각자의 디바이스를 기준으로 짜여져 있기 때문이다.</p><h3 id="kitti---object-detection">KITTI - Object Detection <a href="#kitti---object-detection" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>2d, 3d object detection에 사용되는 데이터셋을 지원한다. 2D OD의 경우 7481장의 training 데이터를 지원하고, 3D OD의 경우 point cloud 를 함께 지원한다.</p><p>또한, bird’s eye view에 대한 데이터도 구성되어 있다.</p><p><br /></p><h4 id="2d-object-detection">2D object detection <a href="#2d-object-detection" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p><img data-src="/assets/img/dev/week12/day2/kitti2dod.png" data-proofer-ignore></p><p>여기 left,right는 KITTI가 카메라 2대를 사용했으므로 왼쪽 카메라, 오른쪽 카메라를 나누어 제공한다. 또한, lidar데이터, 카메라 calibration에 대한 정보도 제공한다.</p><p><br /></p><p>데이터를 다운 받은 후 label 데이터를 확인한다. kitti의 label format은 다음과 같다.</p><pre><code class="language-txt">Truck 0.00 0 -1.57 599.41 156.40 629.75 189.25 2.85 2.63 12.34 0.47 1.49 69.44 -1.56
</code></pre><p><br /></p><p><img data-src="/assets/img/dev/week10/day5/kitti.png" data-proofer-ignore></p><ul><li>type: 총 9개의 클래스에 대한 정보이다. tram은 길거리에 있는 기차를 말하고, misc는 구별하기 어려운 애매한 차량들을 지칭하는 것이고, doncares는 너무 멀리 있어서 점으로 보이거나, 잘려서 보이는 차량들에 대한 클래스로 지정해놓은 것이다.<li>truncated : 차량이 이미지에서 벗어난 정도를 나타낸다. 0~1사이의 값으로 표현된다.<li>occluded : 다른 오브젝트에 의해 가려진 정도를 나타낸다. 0은 전체가 다 보이는 것, 1은 일부만, 2는 많이 가려진 정도, 3은 아예 안보이는 것으로 나타낸다.<li>alpha : 객체의 각도를 나타낸다.<li>bbox : left, top, right, bottom에 대한 bounding box 좌표를 나타낸다.</ul><p><br /></p><p><br /></p><h4 id="kitti-to-yolo-label">KITTI to Yolo label <a href="#kitti-to-yolo-label" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>kitti데이터를 yolo로 변환하기 위해서는 min_x,min_y,max_x,max_y를 center_x, center_y, width, height 로 변환해야 한다.</p><ul><li>center_x : (max_x + min_x) / 2<li>center_y : (max_y + min_y) / 2<li>width : max_x - min_x<li>height : max_y - min_y</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">torch</span>
<span class="kn">from</span> <span class="n">torch.utils.data.dataset</span> <span class="kn">import</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="n">torch.utils.data.dataloader</span> <span class="kn">import</span> <span class="n">DataLoader</span>
<span class="kn">from</span> <span class="n">torchvision</span> <span class="kn">import</span> <span class="n">transforms</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="n">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="kn">import</span> <span class="n">os</span><span class="p">,</span> <span class="n">json</span><span class="p">,</span> <span class="n">sys</span>

<span class="kn">from</span> <span class="n">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">cv2</span>

<span class="c1"># Visualization 1 image
</span><span class="k">def</span> <span class="nf">eda</span><span class="p">(</span><span class="n">img</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">labels</span> <span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="nf">imread</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">IMREAD_ANYCOLOR</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">:</span>
            <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">label</span><span class="p">[</span><span class="s">'bbox'</span><span class="p">]</span>
            <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> \
                        <span class="nf">int</span><span class="p">(</span><span class="n">cx</span><span class="o">-</span><span class="n">w</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">cy</span><span class="o">-</span><span class="n">h</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">cx</span><span class="o">+</span><span class="n">w</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">cy</span><span class="o">+</span><span class="n">h</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">cv2</span><span class="p">.</span><span class="nf">rectangle</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">),</span> <span class="p">(</span><span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">),</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">cv2</span><span class="p">.</span><span class="nf">putText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">label</span><span class="p">[</span><span class="s">'name'</span><span class="p">],</span> <span class="n">org</span><span class="o">=</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span><span class="n">min_y</span><span class="p">),</span> 
                            <span class="n">fontFace</span><span class="o">=</span><span class="n">cv2</span><span class="p">.</span><span class="n">FONT_ITALIC</span><span class="p">,</span> <span class="n">fontScale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cv2</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="s">"img"</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
    <span class="n">cv2</span><span class="p">.</span><span class="nf">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Visualization 20 image
</span><span class="k">def</span> <span class="nf">eda_subplot</span><span class="p">(</span><span class="n">label_list</span> <span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span> <span class="c1"># width, height
</span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="nb">file</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">label_list</span><span class="p">):</span>
        <span class="n">plt</span><span class="p">.</span><span class="nf">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">img_path</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s">'</span><span class="se">\\</span><span class="s">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">img</span> <span class="o">=</span> <span class="s">"./kitti/images/train/"</span> <span class="o">+</span> <span class="n">img_path</span> <span class="o">+</span> <span class="s">".png"</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">uint8</span><span class="p">)</span>
        <span class="n">plt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># yes/no visualization
</span><span class="n">visualization</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c1"># convert min_x, min_y, max_x, max_y =&gt; center_x, center_y, width, height
</span><span class="k">def</span> <span class="nf">xyxy2xywh_np</span><span class="p">(</span><span class="n">bbox</span><span class="p">):</span>
    <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="p">.</span><span class="n">float32</span><span class="p">)</span>

    <span class="n">center_x</span> <span class="o">=</span> <span class="nf">round</span><span class="p">((</span><span class="n">max_x</span> <span class="o">+</span> <span class="n">min_x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">center_y</span> <span class="o">=</span> <span class="nf">round</span><span class="p">((</span><span class="n">max_y</span> <span class="o">+</span> <span class="n">min_y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">bbox_width</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">max_x</span> <span class="o">-</span> <span class="n">min_x</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">bbox_height</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">max_y</span> <span class="o">-</span> <span class="n">min_y</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">bbox</span> <span class="o">=</span> <span class="p">(</span><span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span><span class="p">,</span> <span class="n">bbox_width</span><span class="p">,</span> <span class="n">bbox_height</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">bbox</span>

<span class="c1"># initial channels about grayscale
</span><span class="n">channels</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># convert kitti label to yolo label format
</span><span class="k">class</span> <span class="nc">convert2yolo</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">label_dir</span> <span class="o">=</span> <span class="s">"./kitti/labels/"</span>
        <span class="n">self</span><span class="p">.</span><span class="n">img_dir</span> <span class="o">=</span> <span class="s">"./kitti/images/"</span>
        <span class="n">self</span><span class="p">.</span><span class="n">img_train_dir</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">img_dir</span> <span class="o">+</span> <span class="s">"train/"</span>
        <span class="n">self</span><span class="p">.</span><span class="n">img_valid_dir</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">img_dir</span> <span class="o">+</span> <span class="s">"valid/"</span>
        <span class="n">self</span><span class="p">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="s">"./yolo/labels/"</span>

        <span class="n">self</span><span class="p">.</span><span class="n">class_names</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s">'Car'</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> 
                        <span class="s">'Van'</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> 
                        <span class="s">'Truck'</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                        <span class="s">'Pedestrian'</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> 
                        <span class="s">'Person_sitting'</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> 
                        <span class="s">'Cyclist'</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> 
                        <span class="s">'Tram'</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                        <span class="s">'Misc'</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
                        <span class="s">'DontCare'</span> <span class="p">:</span> <span class="mi">8</span>
                    <span class="p">}</span>

        <span class="n">self</span><span class="p">.</span><span class="n">label_dir_list</span> <span class="o">=</span> <span class="nf">glob</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">label_dir</span> <span class="o">+</span> <span class="s">"/*"</span><span class="p">)</span>
        <span class="n">os</span><span class="p">.</span><span class="nf">makedirs</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># save the txt file for yolo label format to convert from kitti label format
</span>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">label_dir_list</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="s">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'UTF-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">readlines</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s">' '</span><span class="p">)</span>
                    <span class="n">class_id</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">class_names</span><span class="p">[</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="n">cx</span><span class="p">,</span><span class="n">cy</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span> <span class="o">=</span> <span class="nf">xyxy2xywh_np</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">f</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
            
            <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">output_dir</span> <span class="o">+</span> <span class="nb">file</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s">"</span><span class="se">\\</span><span class="s">"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="s">"w+"</span><span class="p">)</span> <span class="k">as</span> <span class="n">yolo_file</span><span class="p">:</span>
                <span class="n">yolo_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">class_id</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">cx</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">cy</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">w</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>

            <span class="c1"># visualization
</span>            <span class="n">img_path</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s">'</span><span class="se">\\</span><span class="s">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">img_train_dir</span> <span class="o">+</span> <span class="n">img_path</span> <span class="o">+</span> <span class="s">".png"</span>
            <span class="k">if</span> <span class="n">visualization</span><span class="p">:</span> 
                <span class="nf">eda</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>

        <span class="n">yolo_file</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">label_dir_list</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">convert</span> <span class="o">=</span> <span class="nf">convert2yolo</span><span class="p">()</span>
    <span class="n">convert</span><span class="p">.</span><span class="nf">save</span><span class="p">()</span>
</pre></table></code></div></div><p><br /></p><p><br /></p><h2 id="bdd100k">BDD100K <a href="#bdd100k" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>버클리 인공지능 실험 연구실에서 제공한 데이터셋으로 다양한 종류의 데이터들이 구축되어 있다. BDD 데이터셋은 다양한 도시, 다양한 환경에서 생성된 데이터들이다. yolov3에 적용할 때는 <code class="language-plaintext highlighter-rouge">100K images</code>와 <code class="language-plaintext highlighter-rouge">Detection 2020 labels</code>을 다운받는다.</p><p><img data-src="/assets/img/dev/week12/day2/bdd100kimage.png" data-proofer-ignore> <img data-src="/assets/img/dev/week12/day2/bddlabel.png" data-proofer-ignore></p><p>image는 위와 같이 train/val/test로 되어 있고, label에서는 train/val에 대한 json파일만이 존재한다.</p><p>json파일은 JavaScript 언어의 자료형을 텍스트로 표현한 포맷으로 데이터의 이름을 지정해줄 수 있어서 다른 언어에서도 많이 사용되는 포맷이다.</p><p><img data-src="/assets/img/dev/week12/day2/json.png" data-proofer-ignore></p><p>형태는 <code class="language-plaintext highlighter-rouge">{}</code>를 통해 블록을 분할하고, <code class="language-plaintext highlighter-rouge">이름 : 값, 이름 : 값 ...</code> 의 형태를 가진다. <code class="language-plaintext highlighter-rouge">[]</code>는 배열을 의미한다.</p><p>위의 형태는 BDD100K label에 대한 포맷으로 파일명이 있어서 label의 name을 읽어오면 그에 대한 image를 불러와 읽는다. labels안에는 Bounding box에 대한 정보들이다.</p><p><br /></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>

</pre></table></code></div></div><p><br /></p><p><br /></p><h2 id="cityscape">Cityscape <a href="#cityscape" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/assets/img/dev/week12/day2/cityscape.png" data-proofer-ignore></p><p>Cityscape는 segmentation을 위한 데이터셋이다.</p><p><a href="https://www.cityscapes-dataset.com/">홈페이지</a></p><p><br /></p><p><img data-src="/assets/img/dev/week12/day2/cityscapelabel.png" data-proofer-ignore></p><p>cityscape의 데이터 포맷은 gtFine이 labels를 의미하고, train안에는 도시 이름으로 파일들을 구분하고 있다. leftImg8bit가 이미지 파일 경로를 의미한다.</p><p>그리고 1개의 이미지 파일에 대해 4개의 label 데이터가 존재한다. polygons.json은 segmentation을 수행하기 위한 polygone 데이터들을 담고 있다. 나머지 label파일이 png인 이유는 segmentation을 할 때는 label이 image파일로 구성되어야 하기 때문이다. 이 label파일이 맞는지 확인하기 위해서는 이미지 파일에 덮어서 맞는지 확인해봐야 한다.</p><p><br /></p><ul><li>color.png</ul><p><img data-src="/assets/img/dev/week12/day2/cityscapecolor.png" data-proofer-ignore></p><p>color.png파일은 객체를 고유한 색상으로 표현한 참고용 이미지이다. 이미지마다 본넷이 존재하고 이를 마스킹하고 있는 것을 확인할 수 있다.</p><p><br /></p><ul><li>instancelds.png</ul><p><img data-src="/assets/img/dev/week12/day2/cityscapeinstance.png" data-proofer-ignore></p><p>instance를 수행할 때 사용하는 파일로 동일한 클래스에 대해 다른 아이디를 가지는 것을 표현하고 있다. 확인해보면 색이 거의 비슷하지만, 자세히보면 다른 값들을 가지고 있다.</p><p><br /></p><ul><li>labellds.png</ul><p><img data-src="/assets/img/dev/week12/day2/cityscapesemantic.png" data-proofer-ignore></p><p>semantic segmentation을 수행할 때 사용하는 파일로, 클래스 id에 따라 동일한 색상을 가진다.</p><p><br /></p><p>segmentation을 조금 쉽게 수행할 수 있게 만들어놓은 모델이 있다. 이는 pytorch를 사용하고 있는 간단한 모델이어서 segmentation에 대해 확인해보기 위해서 https://github.com/chenjun2hao/DDRNet.pytorch 의 깃허브를 사용하면 좋다.</p><p><img data-src="/assets/img/dev/week12/day2/ddrnetlabel.png" data-proofer-ignore></p><p>이는 json파일을 사용하고 있는데, 이미지의 height,width를 가지고있고, object에 대한 polygon 값을 가지고 있다. 이 polygon은 객체의 shape에 따라 개수가 다르므로 주의해서 사용해야 한다.</p><p><br /></p></div><div class="post-tail-wrapper text-muted"><div style="text-align: left;"> <a href="http://hits.dwyl.com/dkssud8150.github.io/posts/dataset/" target="_blank"> <img data-src="http://hits.dwyl.com/dkssud8150.github.io/posts/dataset.svg" data-proofer-ignore> </a></div><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/classlog/'>Classlog</a>, <a href='/categories/devcourse/'>devcourse</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/devcourse/" class="post-tag no-text-decoration" >devcourse</a> <a href="/tags/deeplearning/" class="post-tag no-text-decoration" >deeplearning</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format - JaeHo Yoon&amp;url=https://dkssud8150.github.io/posts/dataset/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format - JaeHo Yoon&amp;u=https://dkssud8150.github.io/posts/dataset/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://dkssud8150.github.io/posts/dataset/&amp;text=[데브코스] 12주차 - DeepLearning Open Dataset and Dataset label format Convert to Yolo format - JaeHo Yoon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://dkssud8150.github.io/posts/dataset/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6611243953442169" crossorigin="anonymous"></script></div><script src="https://utteranc.es/client.js" repo="dkssud8150/dkssud8150.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/gitpage/">[깃허브 프로필 꾸미기] github 프로필 만들기</a><li><a href="/posts/product/">[깃허브 프로필 꾸미기] productive box 만들기</a><li><a href="/posts/regex/">[데브코스] 2주차 - linux 기초(REGEX)</a><li><a href="/posts/Kfold/">KFold Cross Validation 과 StratifiedKFold</a><li><a href="/posts/cmake/">[데브코스] 17주차 - CMake OpenCV, Eigen, Pangolin install </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/numpy/"><div class="card-body"> <em class="timeago small" date="2022-04-11 14:40:00 +0900" >Apr 11, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 9주차 - DeepLearning Numpy & Matplotlib</h3><div class="text-muted small"><p> Numpy Numpy 설치 및 불러오기 pip install numpy import numpy as np 파이썬의 리스트는 머신러닝에서 가장 많이 사용되는 구조 중 하나일 것이다. 그러나 이 리스트는 연산 속도가 느리다. 그래서 연산을 효과적으로 할 수 있도록 하기 위해 만든 것이 Numpy이다. Numpy 연산 속도 nump...</p></div></div></a></div><div class="card"> <a href="/posts/dplearn/"><div class="card-body"> <em class="timeago small" date="2022-04-12 15:40:00 +0900" >Apr 12, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 9주차 - DeepLearning AI & machine learning</h3><div class="text-muted small"><p> 기계 학습 어떤 컴퓨터 프로그램이 T라는 작업을 수행할 때, 이 프로그램의 성능이 P라는 척도로 평가했을 때 경험 E를 통해 성능이 개선된다면 이 프로그램은 학습한다고 말할 수 있다. 따라서 최적의 알고리즘을 찾는 행위를 기계 학습이라 할 수 있다. 기계 학습의 중심은 경험, 과업, 성능에 있다. 예전에는 지식 기반의 학습을 했다. 즉, 인간이...</p></div></div></a></div><div class="card"> <a href="/posts/mlmath/"><div class="card-body"> <em class="timeago small" date="2022-04-13 15:40:00 +0900" >Apr 13, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[데브코스] 9주차 - DeepLearning Mathematics for Machine Learning</h3><div class="text-muted small"><p> 기계 학습에서 수학은 손실함수를 정의하고 손실함수의 최저점을 찾아주는 최적화 이론에 사용된다. 제어를 함에 있어서도 수학이 필요하다. 선형대수 데이터는 벡터나 행렬, 텐서 형태로 되어 있는데, 이에 대한 공간을 이해하고, 연산을 하기 위해서는 선형대수가 필요하다. 벡터와 행렬 벡터는 요소의 종료와 크기를 표현한다. [x \in R^n] ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/tusimple/" class="btn btn-outline-primary" prompt="Older"><p>[논문 리뷰] Ultra Fast Structure-aware Deep Lane Detection</p></a> <a href="/posts/labeling/" class="btn btn-outline-primary" prompt="Newer"><p>[데브코스] 12주차 - DeepLearning Data Labeling and Data Augmentation</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">JaeHo YooN</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devcourse/">devcourse</a> <a class="post-tag" href="/tags/deeplearning/">deeplearning</a> <a class="post-tag" href="/tags/cs231n/">CS231N</a> <a class="post-tag" href="/tags/ros/">ros</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kooc/">kooc</a> <a class="post-tag" href="/tags/opencv/">OpenCV</a> <a class="post-tag" href="/tags/pytorch-tutorial/">pytorch tutorial</a> <a class="post-tag" href="/tags/autonomous-driving/">Autonomous Driving</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NC7MWHVXJE"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NC7MWHVXJE'); }); </script>