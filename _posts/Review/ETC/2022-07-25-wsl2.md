---
title:    "[ETC] wsl2 필수 명령어 모음 "
author:
  name: JaeHo YooN
  link: https://github.com/dkssud8150
date: 2022-05-15 03:00:00 +0800
categories: [Review, ETC]
tags: [ETC, wsl]
toc: True
comments: True
---

# 사용자 추가 명령어

wsl 설치시 root계정으로 시작할 경우가 존재한다. 이 때 사용자를 추가하는 방법은 다음과 같다. 만약 추가되어 있더라도, 처음 접속하는 곳이 root로 되어 있으면 변경해줄 수 있다.

사용자를 추가하는 방법은 두 가지가 있다. 첫번째는 cmd나 powershell에서 사용자를 추가하는 방법이고, 두번째는 ubuntu내에서 사용자를 추가하는 방법이 있다. 먼저 cmd나 powershell에서 사용하는 방법을 설명하겠다. 

1. powershell이나 cmd 아무 커맨드를 접속한다.
2. 

&nbsp;

두번째로 ubuntu에서 사용자를 추가하는 방법이다.

1. ubuntu 터미널을 연다.
2. `sudo adduser <username>` 을 친다.

```bash
sudo adduser jhyoon
```

마지막으로 `Y`를 눌러 유저를 생성한다.

&nbsp;

3.윈도우에서 cmd나 powershell을 연다.

4.`ubuntu config --default-user <username>` 을 친다.

```bash
ubuntu config --default-user jhyoon
```

5.user계정을 sudo 그룹에 추가한다.

```bash
sudo usermod -aG sudo jhyoon
```

&nbsp;

# wsl bash가 실행되지 않을 때

이 때는 다양한 문제가 있을 수 있다.

먼저 윈도우에서 wsl이 사용 가능하도록 되어 있는지 확인해야 한다. powershell에서 아래 명령어를 쳐본다.

```bash
Get-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
```

사용이 가능하다고 하면, 다음 단계로 넘어간다.

- 가상 메모리가 할당되어 있는지 확인

참고 : https://qkrm.tistory.com/3

사용 가능하다고 되어 있어도 오류가 난다면, 가상 메모리가 할당되어 있는지 확인해본다. 먼저 `windows + R` 을 눌러 실행창을 띄우고, `SystemPropertiesAdvanced`를 친다.

<img src="/assets/img/etc/implement.png">

&nbsp;

그리고, 성능 부분에 설정을 클릭한다.

<img src="/assets/img/etc/systemsetting.png">

&nbsp;

그 후 고급에 들어가 가상 메모리 편집을 클릭한다. 그러면 본인이 사용하고자 했던 디스크에 가상메모리가 할당되어 있는지 확인할 수 있다.

<img src="/assets/img/etc/memory.png">

&nbsp;

나의 경우 D:에 wsl을 설치했는데, 페이징 파일이 없었다. 그래서 `시스템이 관리하는 크기` 를 선택해주어 시스템에서 자동으로 메모리를 할당하도록 했다.

이를 다 하고 나면, 재부팅하라고 뜨는데, 재부팅하고, wsl을 실행하면 된다.

&nbsp;

&nbsp;

# 다른 디렉토리에 wsl 경로 설정

다른 드라이브에 wsl 경로를 설정하고자 한다면, 먼저 기본으로 설정되어 있는 것을 해제해야 한다.

powershell을 연다.

```bash
> wsl -l -v
  NAME                   STATE           VERSION
* Ubuntu-18.04           Running         2
  Ubuntu-20.04           Stopped         2
  docker-desktop-data    Stopped         2
  docker-desktop         Stopped         2
```

&nbsp;

다른 배포판을 기본으로 설정하고자 하면 `-s` 또는 `--set-default`를 사용한다.

```bash
wsl -s Ubuntu-20.04
```

&nbsp;

하나의 배포판을 다른 디렉토리로 옮기기 위해서는 배포판을 압축파일로 만든 후 옮겨야 한다.

```bash
wsl --export Ubuntu-18.04 Ubuntu-18.04.tar
```

이렇게 하면 현재 디렉토리에 Ubuntu-18.04.tar 파일이 생성된다.

이를 다른 폴더로 import 시켜준다.

```bash
wsl --import Ubuntu-18.04 D:\wsl\ Ubuntu-18.04.tar
```

그 후, 배포한다.

```bash
wsl -d Ubuntu-18.04
```

