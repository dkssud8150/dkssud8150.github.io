ㅏㅏㅏ---
title:    H-모빌리티 클래스 (H-Mobility Class) 2주차. 자율주행 자동차 인지 기술 (1)
author:
name: JaeHo-YooN
link: https://github.com/dkssud8150
date: 2023-07-27 23:49:00 +0800
categories: [Classlog, h-mob]
tags: [h-mobility, autonomous]
toc: True
comments: True
math: true
mermaid: true
---

&nbsp;

# 자율주행 자동차 인지 기술 (1) - 1

2주차 자율주행 자동차 인지 기술에 대해 배워본다.

&nbsp;

## 1. 자율주행 자동차의 센서 구성

목차

1. 자율주행차 센서의 종류
2. 자율주행차 센서의 장단점

&nbsp;

### 1-1. 자율주행차 센서의 종류 및 장단점

자율주행차량에 탑재되는 센서는 대표적으로 카메라, 라이다, 레이더, 초음파가 있다. 각 장치에는 제한된 FOV(Field of View) 가 존재하므로 360도 및 전방 200m의 주변 정보를 얻기 위해선느 여러 개의 센서를 사용해야 한다.

1. 카메라
   - 빛을 렌즈를 통해 모은 후 CCD/CMOS와 같은 전기장치를 통해 전기적 신호로 변환한다.
   - 장점
     - CCD/CMOS 를 사용함으로서 해상도가 높다.
     - 주변 환경에 대한 색상, 형태 정보 수집 가능
     - 상대적 저렴한 가격
   - 단점
     - 날씨, 밝기 변화에 민감
     - 정확한 거리, 속도 정보를 제공받지 못함
     - 높은 해상도로 인한 계산량 증가

2. 레이더(RADAR)
   - 전자기파를 송출한 후 목표물에 반사되는 수신파를 분석하여 전자기파 신호를 송출한다.
   - 장점
     - 환경 변화에 강인함
     - 거리 측정 정확도 높음
     - 물체와의 거리와 각도, 물체의 이동속도 측정 가능
     - 상대적 저렴한 가격
   - 단점
     - 횡방향 물체 위치 측정 정보가 정확하지 않음
     - 장애물 방해 효과 큼

3. 라이다(LIDAR)
   - 고출력 펄스 레이저를 송출하여 물체에 반사되는 신호로 시간차를 분석하고 이를 통핸 3차원 공간(point cloud)을 스캔한다.
   - 기계적 회전 스캐닝 방식이 전통적이었으나 내구성 문제로 인해 솔리드 스테이트 방식이나 Mems 등 새로운 구조의 라이다 개발 중
   - 장점
     - 거리, 각도 측정 정확도가 높음
     - 날씨, 습도, 밝기 등의 환경 변화에 강인함
   - 단점
     - 습기있을 경우 수신 신호 세기 약해짐
     - 상대적 비싼 가격

&nbsp;

&nbsp;

## 2. 자율주행 인지 기술

목차

1. 자율주행차 인지 기술 개요
2. 인지 기술의 발전 방향
3. 인지를 위한 AI(딥러닝) 기술
4. 딥러닝 기반 인지시스템 사례

&nbsp;

### 2-1. 자율주행 인지 기술 개요

자율주행을 위해 센서로부터 얻은 신호를 분석하여 차량 주변의 환경에 대한 정보를 분석하는 기술이다. 자율주행의 가장 앞 단에 수행되며, 높은 정확도를 요구한다.

자율주행에서의 주변 환경 요소는 동적 환경 객체, 정적 환경 객체로 나눌 수 있다. 먼저 동적 환경 객체란 시간에 따라서 그 위치와 상태가 계속 변화할 수 있는 객체를 말하고, 이에는 타 차량, 보행자, 사이클리스트, 바이크가 있다.

인지 기술을 통해 동적 객체의 위치와 종류, 움직임을 파악한다. 움직임을 파악한다는 것은 객체를 추적한다는 말과 같은데, 이는 매 시점마다 얻은 검출 결과를 시간적으로 연결하여 추적하는 기술이다. 시점마다의 프레임(이미지)가 존재하고, 같은 객체가 검출되었을 때, 같은 물체 ID를 부여하여 객체의 주변 환경에의 등장, 이동, 퇴장을 파악할 수 있다. 움직임을 파악하고 나면, 미래에 어떤 행동을 보일지에 대한 예측도 가능해진다. 예를 들어 주변 타 차량이 차선을 유지해서 갈지 아니면 차선을 변경할지, 보행자가 횡단보도를 건널지 말지, 건너편 차량이 비보호 좌회전을 하는지 아닌지 등을 예측한다. 이는 뒷 단의 판단과 계획에 중요한 정보를 제공한다.

&nbsp;

반대로 정적 환경 객체는 위치가 잘 변하지 않는 객체로 차로, 건널목, 횡단보도, 신호등, 교통표지판, 과속방지턱, 중앙분리대가 있다. 이러한 정적 객체를 통해 제한 속도 파악, 신호등 상태, 횡단보도 유무 등을 파악하여 도로 및 교통 상황에 맞게 주행한다. 또한, 측위 시 나의 위치를 파악하는데 중요한 정보를 제공한다.

&nbsp;

### 2-2. 인지 기술의 발전 방향

- 자율주행차 인지 기술의 어려움
  1. 높은 정확도
     - 자율주행에서 인지 기술은 가장 앞단에 존재하고, 높은 정확도를 요구한다. 근거리 환경 인지에 대해서는 100%에 가까운 정확도를 요구한다. 왜냐하면 인지 기술에 오류가 생기게 된다면 전체 자율주행 기능이 무력화되고, 이것이 사고 발생으로 이어지게 된다.
  2. 예측하기 힘든 다양한 주행 환경과 상황
     - 교통 상황이라는 것은 예측하기 힘든 매우 다양한 주행 환경과 상황이 존재하고, 악천후, 조도 변화, 낮/밤 등에 대한 환경 변화도 존재한다. 
  3. 문맥적 의미 파악
     - 또한 자동차와 간격 유지, 타 차량의 행동 예측 등과 같은 다양한 문맥적 의미를 파악하는 것에도 어려움이 있다. 그리고 자전거, 킥보드, 오토바이 등 새로운 객체들도 계속 생겨나고 있다.
  4. 고성능의 하드웨어
     - 가장 문제는 여러 인지 기능을 동시에 수행할 수 있는 고성능의 하드웨어가 필요하다는 것이다. 하드웨어 성능이 떨어지게 되면 빠른 판단이 불가능해지게 되므로 위험해진다.

&nbsp;

- 인지 기술의 도전적 과제
  1. 다양한 환경 변화 및 주행 환경에서 강인함과 신뢰성 필요
  2. 문맥적 의미 파악 및 활용을 통한 인지기능 정확도 향상
  3. 다양한 동적 객체 행동 패턴 파악
  4. 새롭게 변화하는 환경 적응
  5. 통합적인 인지 기술 처리를 위한 시스템 최적화 및 알고리즘 개발

&nbsp;

## 2-3. 인지를 위한 AI(딥러닝) 기술

- AI 기술 개요
  - 인공지능에는 머신러닝과 딥러닝이 있는데, 가장 큰 범위가 AI, 그 다음이 머신러닝, 제일 작은 범위가 딥러닝이다. 딥러닝이란 사람의 뉴런을 모사하는 신경망 구조를 본따 만든 것으로 요구하는 기능에 따라 다양한 역할을 할 수 있다.
- AI 기술의 적용 과정
  - 대부분의 AI를 사용하기 위해서는 간단하게 5단계로 정리할 수 있다. 
  - 데이터 취득 -\> 데이터 라벨링 -\> 딥러닝 모델 학습 -\> 차량 탑재 -\> 인지 기능 수행
- 딥러닝 기술
  - 딥러닝은 2012년 **AlexNet** 이라는 구조를 발견 한 이후 급격하게 발전해왔다. 그 당시 ImageNet challange 에서 AlexNet이 1등을 했고, 지속적으로 구조를 발전해오고 있다.
  - 딥러닝은 최근 모든 산업 분야에서 필수적으로 사용되고 있는 기술로, 디지털 트랜스포매이션(Digital Transformation) 이라는 아날로그에서 디지털로 변환하는 최근 산업 변화에 매우 적합한 기술이라 할 수 있다.
  - 딥러닝 기술 기능
    - 카메라 영상 입력 -\> 딥러닝 모델 -\> 동적 객체 검출
    - 라이다 데이터 -\> 딥러닝 모델 -\> 동적 객체 검출
  - 딥러닝 모델 구조
    - 딥러닝 모델은 Fedd-forward 라는 수많은 노드들의 집합으로 이루어져 있다. 노드란 입력 데이터와 비선형 연산을 수행하여 결과를 출력하는 최소 단위이다.
    - 3~10개의 노드가 한 층으로 이루어져 있고, 이러한 층이 적게는 16개, 많게는 100개 이상이 쌓아 올려 수많은 상황들을 고려할 수 있는 강인한 모델이 만들어진다.
    - 입력은 1층부터 마지막층까지 순차적으로 통과하게 되고, 마지막 층은 라벨 수에 맞게 출력할 수 있도록 연산한다.
  - 딥러닝 모델 학습 과정
    - 모델 학습 방법에는 크게 정답을 보여주면서 학습하는 방법과 정답을 보여주지 않고 학습하는 방법이 있다.
    - 대부분은 정답을 보여주면서 학습하는 방법을 택한다. 이러한 방식이 더 효과적이기도 하고, 쉽게 접근할 수 있는 방법이기 때문이다.
    - 수많은 데이터를 모델에 입력하여 출력 결과를 정답에 맞춰가는 과정을 학습이라 한다.
  - 딥러닝 모델 추론 과정
    - 학습이 끝나면, 학습한 모델을 실제 사용할 플랫폼에 탑재하여 원본 데이터를 입력하여 예측하는 과정을 추론이라 한다.
    - 이러한 추론의 정답률을 가지고, 모델의 성능을 정한다.
  - 딥러닝 모델 예시
    - CNN (Convolutional Neural Network)
      - 카메라 영상을 입력으로 하여 원하는 결과를 얻어내는 데 특화된 구조
      - 동적 객체(타 차량 보행자, 사이클리스트), 정적 객체(신호등) 등을 인식하는데 사용된다.
    - RNN (Recurrent Neural Network)
      - 시간적, 순차적으로 들어오는 데이터를 입력으로 하여 원하는 출력을 얻어내는 구조
      - 음성 인식, 자연어 처리, 시계열 데이터 처리 등에 사용된다.
      - 자율주행에서는 주변 동적 객체의 과거 경로로부터 미래 경로를 예측하는 데 사용된다.
      - LSTM (Long Short Term Memory) 가 가장 유명하다.

&nbsp;

## 2-4. 딥러닝 기반 인지시스템 사례

딥러닝 기반 인지시스템 사례에는 대표적으로 테슬라, 구글 웨이모가 있다.

- 테슬라

테슬라는 오토파일럿과 FSD(Full Self Driving) 이라는 기술을 내세우고 있다. 테슬라의 창업자인 일론 머스크는 라이다 없이 카메라와 레이더만으로도 자율주행을 할 수 있다고 주장하고 있다. 중간에 레이더도 카메라로 대체할 수 있다곤 하였으나, 다시 레이더를 사용하는 것으로 알려져 있다. FSD는 2021년 1월에 베타 버전을 제작했으며, 현재 테슬라 차량에 탑재가 되고 있다.

테슬라 차량에는 카메라 8대, 전방 레이더 1대, 초음파 센서 12대를 장착하고 있다. 무선 통신 (OTA)를 통해 소프트웨어를 업그레이드하고, 메인보드를 자신들의 소프트웨어에 최적화되도록 직접 제작한다.

차량 및 보행자를 검출하고 신호등 및 정지선까지 인식한다. 

&nbsp;

- 구글 웨이모

구글은 2018년 미국 아리조나 피닉스에 무인택시 웨이모 One 서비스를 출범했다. 자율주행차 회사 중 가장 많은 자율주행 테스트 및 시뮬레이션 시간을 가지고 있다. 그리고 테슬라와는 달리 라이다를 주로 사용하고 카메라와 레이더는 보조 수단으로 사용하고 있다. 라이다와 레이더의 광범위한 측정 범위를 통해 최대 500m 거리까지 물체를 검출할 수 있다고 한다.

&nbsp;

- 자율주행 사고 사례

2016년 5월에 테슬라 모델 S 차량이 흰색 트레일러를 오인식하여 충돌해서 운전자가 사망하는 사건이 있었다. 그리고 2018년 3월 우버 차량이 자전거를 인식하지 못해 충돌하게 되면서 사고 여성이 사망하는 사건도 있었다.

&nbsp;

### Summary

1. 자율주행차 인지 기술 개요
   - 인지 기술이란 센서로부터 얻은 데이터를 분석하여 차량 주변 환경 정보 취득
   - 인지를 통해 동적/정적 환경 객체 탐지
   - 동적 객체 검출 및 추적, 예측 : 동적 객체 위치 및 종류 판별, 매 시점마다 얻은 검출 결과를 토대로 객체 움직임 추적, 추적된 움직임을 바탕으로 움직임 예측
   - 정적 객체 검출 : 정적 객체의 위치 및 종류 판별
2. 인지 기술의 발전 방향
   - 자율주행차 인지 기술의 어려움
   - 인지 기술의 도전적 과제
3. 인지를 위한 AI(딥러닝) 기술
   - 인공지능 개요
   - 인공지능 적용 과정
   - 딥러닝 기술
4. 딥러닝 기반 인지시스템 사례
   - 테슬라
   - 구글 웨이모

&nbsp;

&nbsp;

## 3. 카메라 센서

### 3-1. 카메라 센서 개요

- 카메라 센서 원리
  - 카메라 센서는 CCD나 CMOS 이미지 센서에 빛을 입력시키는 것
  - 카메라에는 **초점거리**와 **화각**이라는 용어가 있다. 초점거리는 렌즈와 센서 사이의 거리를 의미하고, 화각은 카메라가 볼 수 있는 시야각으로서 화면을 구성하는 각도다.
  - 카메라의 렌즈에는 망원렌즈, 표준렌즈, 광각렌즈, 어안렌즈가 있다.
    - 망원렌즈 : FOV 40° 이하, 초점거리 70 ~ 200 mm
    - 표준렌즈 : FOV 40° ~ 60°, 초점거리 35 ~ 38 mm
    - 광각렌즈 : FOV 60° ~ 80°, 초점거리 15 ~ 35 mm
    - 어안렌즈 : FOV 180° 이상, 7 ~ 15 mm
- 카메라 구조
  - 핀홀 카메라
    - 기본적인 카메라 구조
    - 일반적으로 사용되지는 않지만, 카메라 구조가 간단하여 이론에 많이 사용됨
  - 렌즈 카메라
    - 렌즈의 빛 굴절 특성을 이용
    - 렌즈에 의한 왜곡 보정 필요
- 영상의 표현 방법
  - 카메라는 2차원 배열로 이미지가 저장되는데, 배열의 크기로 해상도가 결정된다. 배열의 최소 단위를 픽셀(Pixel)이라 한다. 해상도의 종류는 다음과 같다.
    - HD 해상도 : 1280 x 720
    - FHD 해상도 : 1290 x 1080
    - UHD 해상도 : 3840 x 2160 
    - 4K 해상도 : 4096 x 2160
    - 8K 해상도 : 8192 x 4320
  - 영상은 프레임 단위로 저장이 되는데, 프레임의 단위는 fps(frame per second), 즉 1초당 프레임의 수로 나타낸다.
  - 영상의 색상은 Red, Green, Blue 세 가지 컬러를 조합해서 표현한다. 일반적으로 각 색상의 밝기를 8비트(0 ~ 255)로 표현한다. RGB 단위로 하기도 하나, HSV YCbCr 등으로도 표현이 가능하다.

&nbsp;

### 3-2. 카메라 캘리브레이션(보정) 기술




&nbsp;

### 3-3. 카메라 기반 물체 검출/추적 기술



&nbsp;

### 3-4. 카메라 기반 영역 분할 기술



&nbsp;

### Summary

&nbsp;

&nbsp;

## 4. 레이더 센서

&nbsp;

### 4-1. 레이더 센서 종류 및 작동 원리

&nbsp;

### 4-2. 레이더 신호 특성

&nbsp;

### 4-3. 레이더 송수신기 구성

&nbsp;

### 4-4. 레이더 기반 물체 검출 기술

&nbsp;

### Summary

&nbsp;

&nbsp;

## 5. 라이다 센서

&nbsp;

### 5-1. 라이다 센서 종류 및 개요

&nbsp;

### 5-2. 라이다 센서 특성 및 데이터

&nbsp;

### 5-3. 라이다 기반 물체 검출 기술

&nbsp;

### 5-4. 라이다 기반 물체 추적 기술

&nbsp;

## Summary

&nbsp;

&nbsp;

## 6. 센서 퓨전

&nbsp;

### 6-1. 복합센서 적용 기술

&nbsp;

### 6-2. 센서융합 기술 사례

&nbsp;

## 21. 고성능 인지를 위한 하드웨어/소프트웨어/통신 플랫폼

## 22. AI 기반 인지시스템을 위한 지능형 반도체 기술

## 23. 고정밀 지도 기반 자율주행 개요

## 24. 고정밀 지도 및 측위 기술

## 25. MMS 기반 고정밀 지도 구축 기술

## 26. AI 기반 측위 기술