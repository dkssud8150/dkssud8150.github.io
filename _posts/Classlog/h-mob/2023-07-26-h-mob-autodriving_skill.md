---
title:    H-모빌리티 클래스 (H-Mobility Class) 1주차. 자율주행 자동차 기술 이해
author:
  name: JaeHo-YooN
  link: https://github.com/dkssud8150
date: 2023-07-26 23:51:00 +0800
categories: [Classlog, h-mob]
tags: [h-mobility, autonomous]
toc: True
comments: True
math: true
mermaid: true
---
  
&nbsp;

# 자율주행 자동차 기술 이해

1주차 자율주행 자동차 기술 이해에 대해 리뷰한다.

&nbsp;

## 1. 자율주행 기술 5단계 개요

목차

1. 자율주행 기술 단계
2. 자율주행 단계 개요

&nbsp;

### 1-1. 자율주행 기술 단계

자율주행 기술 5단계란 미국자동차공학회(SAE)에서 정한 기술 수준에 따른 자율주행 5단계를 정의한 것으로, 지능화가 될수록 단계가 올라간다. 간략하게 살펴보면 다음과 같다.

0-2단계 자율주행

- 운전의 책임이 운전자에게 있음
- 주행의 조향이나 가.감속을 자동화하는 수준

&nbsp;

3단계 자율주행

- 조건부 자동화
- 자율주행이 가능한 상황에서 스스로 운전, 단 가능하지 않은 상황에서는 운전자에게 운전권 이양

&nbsp;

4단계 자율주행

- 고도의 자동화
- 정해진 지역 또는 영역 안에서는 운전자의 개입이나 모니터링이 필요 없음

&nbsp;

### 1-2. 자율주행 단계 개요

이제 단계별 특징에 대해 자세하게 알아보고자 한다.

- 0단계 - 비자동화
  - 전혀 자동화가 되지 않은 비자동화 단계
  - 위험을 경고하는 전방 충돌 보조 시스템(FCW)나 후측방 충돌 보조 시스템(BCW)과 같이 경고/일시개입을 통해 자동화 없이 운전을 보조하는 시스템
- 1단계 - 운전자 보조
  - 운전자의 **가감속, 조향**을 보조하는 형태
  - 스마트 크루즈 컨트롤, 차로 유지 보조 기능이 이에 해당한다.
- 2단계 - 부분 자동화
  - 특정 주행 모드에서 시스템이 조향 및 가감속의 자동화 주행
  - 고속도로 주행 보조
- 3단계 - 조건부 자동화
  - 자율주행이 가능한 특정 환경에서만 스스로 주행
  - 자동주행이 가능하지 않은 상황에서는 운전자에게 운전권을 이양한다.
  - 운전자가 항시 전방 주시를 해야 하며, 운전권을 이양받을 준비를 해야 한다.
  - 얼마나 자주 운전자에게 제어권을 넘겨주느냐가 **자율주행 성능의 척도**가 된다.
- 4단계 - 고도의 자동화
  - 특정 제한 지역 또는 영역에서 운전자 개입이나 모니터링이 필요 없음
  - 정해진 지역의 밖에서는 운전자가 개입해야 함.
  - 고비용의 자율주행 센서를 활용(라이다 센서)
- 5단계 - 완전자동화
  - 운행 가능한 모든 상황에서의 궁극의 자율주행 기술 상태

&nbsp;

### Summary

1. 자율주행 기술 단계
    - 미국자동차공학회(SEA)에서 정한 기술 수준에 따른 자율주행의 5단계 정의
    - 단계가 올라갈수록 자율주행 기능 고도화
    - 0~2단계
        - 차량통제권 = 운전자
    - 3~5단계
        - 차량통제권 = 자율주행차
2. 자율주행 단계 개요
    - 0단계 : 비자동화
        - **위험을 경고** -> 자동화 과정 X, **운전자 직접 차량 제어**
    - 1단계 : 운전자 지원
        - 시스템이 **운전자** 가감속, 조향 **보조**
    - 2단계 : 부분 자동화
        - 특정 주행 모드에서 **시스템**이 가감속,조향 **자동화 주행**
        - **운전자의 모니터링 필요**
    - 3단계 : 조건부 자동화
        - 자율주행 가능한 **특정환경에서만 스스로 주행**, 가능하지 않은 상황에서는 운전자가 제어
        - 운전자의 모니터링 필요 x
        - **항시 제어권 이양 준비 필요**
        - 고비용의 센서 사용 어려움
        - 얼마나 자주 제어권을 운전자에게 넘겨주느냐가 자율주행 성능의 척도
    - 4단계 : 고도의 자동화
        - 특정 조건에서 **운전자 개입과 모니터링 필요없는 자율주행 가능**, 그 외에는 운전자가 개입
        - 고비용 센서 활용(고해상도 라이다)
    - 5단계 : 완전 자율주행
        - 운전 가능한 모든 도로에서 이동 가능한 **완전 자율주행**

&nbsp;

&nbsp;

## 2. 지율주행 기술의 발전현황

목차

1. 자율주행 기술의 역사
2. 자율주행 기술의 현단계

&nbsp;

### 2-1. 자율주행 기술의 역사

최초의 자율주행 대회는 2004년에 개최된 `DARPA Grand Challenge` 로 모하비 사막에서 150마일을 달리는 장거리 대회였다. 이 대회에서는 완주한 팀이 없었다고 한다. 곧바로 2005년에도 개최하여 Sebastian Thrun 교수가 있는 스탠퍼드 대학팀이 1위를 하였다고 한다. 우승 팀들은 로보틱스에 사용되는 SLAM과 측위기술을 사용했다고 한다.

그 다음으로 동일하게 DARPA에서 2007년에 개최한 `DARPA Urban Challenge`는 캘리포니아 빅토빌을 60마일 도심 코스로 완주하는 대회였다. 이 대회는 도심이었기에 Waypoint가 존재했고, 교통 규칙을 준수하고, 다른 차들과의 상호작용도 필요했다.

그 후 2009년에 `구글`이 자율주행차에 대해 연구를 시작했다.

&nbsp;

### 2-2. 자율주행 기술의 현단계 및 발전현황

현재 차량들에는 반자율주행, 즉 2단계 자율주행 기술이 탑재되어 있다. 예시로는 차선 유지와 스마트 크루즈 컨트롤이 있다.

현재 자율주행 연구는 딥러닝의 발전, 차량용 반도체와 네트워크 기술의 발전 등으로 인해 많은 발전을 이루고 있다.

&nbsp;

## 3. 자율주행 기술의 미래 발전방향

목차

1. 자율주행 기술의 성공 요건
2. 인공지능과 자율주행

&nbsp;

### 3-1. 자율주행 기술의 성공 요건

자율주행의 발전방향을 알기 위해서는 자율주행의 성공 요건에 대해 알아야 한다. 즉 자율주행이 되기 위해서, 갖춰야 할 것들에는 안전성과 신뢰성이 있다. 안전성과 신뢰성은 자율주행에서 필수적으로 다뤄야 하고, 반드시 가지고 가야 할 문제이다. 사람이 운전하다가 교통사고가 나면 실수일 수 있지만, 자율주행 차량이 오작동으로 인해 사람을 다치게 한다면 이는 사회적으로 문제가 된다.

따라서 자율주행은 안전성과 신뢰성을 반드시 갖춰야 한다. 특히 주변 환경의 변화에도 위험을 분석하고 관리하는 강인한 기술이 필요하다. 또한, 센서나 하드웨어 고장 시 차량을 안전하게 이끌어 줄 수 있는 `Fall back` 등의 대응 기술도 필요하다.

&nbsp;

또한, 교통 상황 및 문맥 파악도 중요하다. 전방 사고 차량 발생, 공사 등에 잘 대응해야 하며, 주변 차량과의 간격 유지도 중요하다.

&nbsp;

무엇보다 기술이 지속적으로 발전해 나가야 한다. 자율주행에 자주 사용되는 인공지능은 데이터가 증가할수록 성능도 향상된다. 따라서 지속적으로 데이터를 확장하여 인공지능의 성능을 높일 필요가 있다. 그리고, 지속적으로 확장된 빅데이터를 관리하는 것도 중요하다.

&nbsp;

### 3-2. 인공지능과 자율주행

자율주행 뿐만 아니라 많은 IT분야에서 사용되는 딥러닝 기술은 2014년에 만들어진 이후로 꾸준히 발전해오고 있다. 이러한 딥러닝 기술을 통해 센서 데이터로 타 차량, 도로 인식, 차선 인식, 보행자 검출과 같은 주변의 환경 이해을 할 수 있다. 이해를 넘어 주변 상황의 변화 예측에도 사용된다.

&nbsp;

### Summary

1. 자율주행 기술의 성공 요건
    - 안전성, 신뢰성
    - 다양한 교통 상황 및 주변 환경 파악
    - 발전가능성, 확장성
        - 성능 발전
    - 신뢰성 있는 테스트 및 검증
        - 시뮬레이션 기분의 테스트 기술 도입
2. 인공지능과 자율주행
    - 딥러닝 기술이 발전함에 따라 자율주행에 필수적인 기술이 됨
    - 센서 데이터를 활용한 딥러닝 기술로 인지 기술 성능 향상
    - 타 차량, 보행자 검출, 차선 인식, 도로 인식, 주변 상황 예측 가능

&nbsp;

&nbsp;

## 4. 자율주행 기술 구성

목차

1. 자율주행차 기술
2. 자율주행 플랫폼

&nbsp;

### 4-1. 자율주행차 기술

자율주행에 사용되는 기술에는 크게 `인지`, `측위`, `판단`, `제어`로 나뉜다.

1. 인지
    - 센서 신호를 받아 주변 상황을 인식하고, 객체의 움직임과 의도를 파악
2. 측위
    - 자율주행차의 위치를 파악하는 단계
    - 주변의 정적 주행 환경을 파악하고 이를 바탕으로 고정밀 지도와 비교하여 나의 정확한 위치를 추정
3. 판단
    - 인지 결과와 측위 결과를 기반으로 어떤 경로로 갈지에 대한 경로 계획, 장애물 회피, 차선 변경에 대한 판단
4. 제어
    - 판단의 결과를 바탕으로 차량을 제어한다.

&nbsp;

### 4-2. 자율주행 플랫폼

자율주행 플랫폼을 이루는 요소들에 대해 살펴본다. 플랫폼에는 자율주행차, 클라우드, 인프라, 통신 으로 구성된다고 볼 수 있다.

1. 자율주행차
    1. 센서
        - 자율주행 차량에는 사람의 감각기관 역할을 하는 센서가 장착되어 있다. 센서를 통해 주변 정보를 받아들인다.
        - 라이다 센서, 레이다 센서, 카메라, GPS, IMU 등
    2. 컴퓨팅 하드웨어
        - 사람의 뇌 역할
        - 센서 정보를 받아 인지, 측위, 판단, 제어 기능을 수행
    3. 차량 네트워크
        - 차량 정보, 센서 신호를 컴퓨터로 전달할 때 사용되는 통신 역할
2. 클라우드
    - 데이터를 관리할 수 있는 클라우드는 데이터 수집 및 관리를 하고, AI 학습을 하는 컴퓨터 자원을 제공한다.
    - 측위에 사용되는 정밀 지도도 관리할 수 있다.
3. 인프라
    - 컴퓨팅 자원이 모여있는 클라우드와 그 반대로 차량 가까이에 있는 컴퓨팅 자원인 인프라(엣지)는 차량용 하드웨어가 이에 해당한다.
    - 사고 및 교통 상황 등 도로 상황을 수집하고, 자율주행차에 교통 정보를 전달하는 역할을 한다.
4. 통신
    - V2V 통신 : 도로 위에서 차량끼리 정보를 주고 받기 위한 차량 간 통신(V2V)
    - V2I 통신 : 차량과 인프라 간의 통신인(V2I)을 하여 자율주행차가 주변 상황인 인프라 정보를 주고 받는다.

&nbsp;

### Summary

1. 자율주행차 기술
    - 인지 : 센서 신호 -> 주변 동적객체 검출, 객체 움직임 및 의도 파악
    - 측위 : 주변 정적 주행 환경과 정밀 지도를 비교하여 자율주행차의 위치를 추정
    - 판단 : 인지 결과와 측위 결과를 기반으로 경로 계획 및 장애물 회피
    - 제어 : 판단 결과에 따라 차량 통제
2. 자율주행 플랫폼
    - 자율주행차
        - 센서 : 사람의 감각기관 역할, 주변 정보 수집
        - 컴퓨팅 하드웨어 : 센서 및 차량 정보를 통한 인지,측위,판단,제어 수행
        - 차량 네트워크 : 차량 정보, gps, 센서 신호를 자율주행 컴퓨터로 전달
    - 클라우드
        - 서버 : 데이터를 통한 학습을 위한 컴퓨팅 자원 제공
        - 대규모 데이터 관리를 위한 저장공간 제공
        - 정밀 지도 관리
    - 인프라(엣지)
        - 주변 정보를 수집하여 자율주행차 보조
    - 통신
        - V2V : 차량끼리 정보 주고 받기 위한 통신
        - V2I : 자율주행차가 인프라와 정보 주고받음

&nbsp;

&nbsp;

## 5. 자율주행 기술의 요소

자율주행차 기술의 인지,측위,판단,제어를 자세히 배워보고자 한다. 센서를 통해 외부정보를 수집한다. 자율주행에서 사용되는 대표적인 센서로는 라이다, 카메라, 레이더, 초음파 센서가 있다.

센서는 전방, 측방, 후방에 모두 장착되어 있고, 하나만이 아닌 여러 개의 장치를 사용하여 **다중 센서 융합 기술**을 활용한다.

&nbsp;

자율주행 기술 요소에는 앞서 말했다시피, 인지, 측위, 판단 제어가 있다.

1. 인지
    인지는 센서를 통해 취득한 데이터를 처리하여 주변 환경에 대한 정보를 알아내는 과정이다. 인지를 통해 차량, 사이클리스트, 보행자과 같은 동적 객체를 검출하고 이들의 움직임과 의도를 파악한다.

2. 측위
    측위는 GPS와 다른 센서 정보를 융합하여 정밀지도에서의 자율주행차의 위치를 추정한다. 자율주행을 위해서는 cm 단위의 정확도가 필요하나, GPS는 m단위이므로 정확도가 다소 떨어지고, 신호가 터지지 않는 곳에서는 데이터를 받을 수가 없다.. 따라서 추가적인 다른 센서를 통해서 차량의 Odometry 정확도를 높여야 한다.

    여기서 odometry란 주행기록계라는 뜻으로 차량이 상대적으로 얼마정도를 움직였는지를 측정하는 기법을 말한다. 차량의 바퀴가 굴러간 수를 세거나 조향각을 통해 차량이 어떻게 움직였는지 판단한다.

    이러한 정보를 통해 정밀지도에의 맵 매칭을 통해 GPS 오차 범위를 보정하고 음영지역에서도 센서 정보만으로 측위를 수행한다.

3. 판단
    인지와 측위를 통해 얻어진 결과를 통해 목적지까지 가기 위한 경로를 계획하고 장애물 회피와 같은 의사를 결정한다.

    경로 계획은 목적지까지의 최적 경로를 결정하는 전역 경로를 설정하는 것과 차선을 변경하거나 장애물을 회피할 때의 단거리 경로를 계획하는 지역 경로 설정이 있다. 전역 경로 설정에는 대표적으로 A* 알고리즘이 있고, 지역 경로 설정에는 RRT(Rapidly-exploring random tree) 알고리즘이 있다.

    의사 결정은 차선 유지 또는 변경, 위험 회피와 같은 상황에서 어떻게 대처할지에 대한 의사를 결정하는 것으로, 주변 동적 객체와의 상호작용이 중요하다. 예를 들어 차선 변경 시 타차량의 위치와 움직임, 의도를 파악하여 차선을 변경할지 말지를 결정한다.

    위험을 회피하기 위해서는 위험도 분석이 선행되어야 한다. 즉, 주변 동적 객체 또는 장애물과의 충돌 위험도를 확률적으로 분석한 후 충돌 가능성이 높다고 판단하면 자동으로 속도를 제어하는 `자동 긴급 제동`을 수행하게 된다. 위험을 회피할 때는 피해가 최소화되도록 판단하고 계획한다.

4. 제어
    판단에서 도출된 경로 계획이나 위험 회피와 같은 결과를 바탕으로 차량의 조향 및 감가속을 조절한다.

&nbsp;

### Summary

1. 자율주행 기술 요소
    1. 센서
        - 사람의 감각기관 역할ㄱ
        - 라이다, 카메라, 레이더, 초음파 센서
        - 다중 센서를 활용하여 각 센서의 장점을 융합
    2. 기술 요소
        - 인지
            - 센서를 통해 주변 정보를 수집하고 주변 환경을 파악하여 객체 검출, 움직임 및 의도 파악
        - 측위
            - GPS와 센서 정보를 통해 정밀 지도에서의 차량의 위치를 파악
            - odometry(상대적 움직임) 정확도 향상
            - 맵 매칭 및 추가 센서들을 통해 GPS 위치 오차 보정 및 측위 수행
        - 판단
            - 인지, 측위 정보를 토대로 목적지까지의 경로 계획, 장애물 회피, 차선 변경 등의 의사 결정 수행
        - 제어
            - 판단 결과를 토대로 차량의 조향 및 감가속 조절

&nbsp;

&nbsp;

## 6. 자율주행 기술 인프라

자율주행에 사용되는 인프라를 `차세대 지능형 교통 시스템`(C-ITS, Cooperative-Intelligent Transportation Systems) 이라고 한다.

지율주행 기술 인프라에는 통신, 고정밀 지도, 데이터, 하드웨어가 있다. 각각의 속성에 대해 알아보고자 한다.

&nbsp;

1. 통신
    - V2X(Vehicle to X) : 유.무선망을 통해 다른 차량 및 도로 등 인프라와 정보를 교환하는 방식
        - 통신 표준 : IEEE(I triple E) 802.11p 의 DSRC 방식과 이동통신방식 기반의 C-V2X 기술로 표준화 진행
        - 지능형 교통 시스템을 위한 5.9GHz 주파수 대역 할당
        - V2X(Vehicle to Vehicle) : 실시간으로 차량끼리 정보를 공유하여 안전성을 강화하고 충돌을 방지할 수 있다. 5G에서는 실시간 정보 교환을 지원하기 위해 지연시간(letency)를 10ms 이하를 목표로 한다. 또한, 기지국을 통과해서 통신하는 것이 아닌 차량끼리 직접 통신하는 **사이드 링크**를 이용하여 차량끼리 직접 정보 송수신을 할 수 있다.
        - V2I(Vehicle to Infra) : 차량과 인프라간의 통신을 말하는 것으로, 주로 도로 상황과 교통 상황에 대해 정보를 공유한다. 차량에서는 안전성을 확보하기 위해 비상 상황, 도로 상태에 대한 정보를 제공받는다.
        - **모바일 엣지 컴퓨팅(MEC)** : 중앙 클라우드를 사용하지 않고 기지국 등의 엣지를 통해 차량에서 전송되는 정보를 처리하는 기술로, 차량과 물리적으로 가까워져 지연시간이 단축되는 장점이 있다. 이를 통해 운전 패턴, 도로 상태, 타 차량 움직임을 실시간으로 감지하여 자율주행차에 정보를 제공한다.
2. 고정밀 지도
    - 자율주행에서 필수적인 요소인 고정밀지도를 구축하기 위해서는 MMS(Mobile Mapping System) 방법을 활용한다. 이를 통해 차선 단위의 정보와 속성을 제공하는 고정밀 지도를 구축한다.
    - 이동체(차량)에 GPS, 레이저스캐너(라이다), 카메라, INS(Inertial Navigation System) 센서 등을 장착하고 도시를 주행하며 데이터를 수집한다.
    - 고정밀 지도에는 맵매칭 방법 기반의 측위를 위해 랜드마크 정보 및 지형의 특징도 지도에 포함한다.
    - 도로 상황의 변화가 잦으므로, 지속적으로 업데이트가 이루어져야 한다. 이를 위해 클라우드를 활용하여 시간에 따라 변화하는 지형 및 도로 환경을 반영한다. 또한, 클라우드를 통해 자율주행차에서 수집되는 정보를 관리한다.
3. 데이터
    - 인공지능의 성능을 향상시키기 위해서는 대규모의 학습 데이터를 요구한다. 이 때 데이터는 직접 주행을 나가 받아올 수도 있고, 시뮬레이션을 통해 얻을 수도 있다.
    - 데이터 누적에 따른 대용량의 데이터를 효율적으로 관리해야 한다.
    - 학습을 진행하기 위해서는 데이터에 정답 표기(라벨링) 과정도 필요하다.
    - 클라우드를 통해 빅데이터 수집 및 가공, 학습을 수행한다.
        1. 수집 : 테스트 차량 또는 자율주행차가 수집한 데이터를 클라우드로 전송
        2. 가공 : 클라우드에서 데이터 라벨링 수행
        3. 학습 : 라벨링된 데이터를 통해 인공지능을 학습하고 테스트 및 검증
        4. OTA(Over The Air)를 통해 자율주행 기능을 탑재
            - OTA : 기기에 내장된 소프트웨어를 무선으로 업데이트하는 기술
4. 하드웨어
    - 자율주행 센서
        - 주변 환경 정보를 받기 위한 장치
        - 라이다, 카메라, 레이더, 초음파 등
    - 네트워크
        - 센서로부터 받은 실시간 데이터를 고속 전송을 위한 차량 네트워크
    - 반도체
        - 전체적인 자율주행 기능 수행 및 관리
    - 임베디드 하드웨어
        - 인지, 판단 등의 딥러닝을 수행하기 위한 프로세서
        - NPU(Neural Processing Unit : 딥러닝 특화 반도체), GPU(Graphics Processing Unit : 병렬 연선 특화 범용 프로세서)
        - 저전력 및 실시간성 중요

&nbsp;

### Summary

1. 자율주행 기술 인프라
    1. 자율주행 인프라
        1. C-ITS(차세대 지능형 교통 시스템) : 자율주행을 위한 차량과 인프라간의 정보 공유
    2. 자율주행 기술
        1. 통신
            - V2X : 차량이 유,무선망을 통해 다른 차량 및 도로 등 인프라가 구축된 모든 사물과 정보 교환
            - V2V : 차량끼리 실시간 정보 공유
            - V2I : 차량과 인프라 간 통신을 통해 랜드마크 정보, 도로 상황 정보 제공
            - MEC(모바일 엣지 컴퓨팅) : 차량 센서 정보가 클라우드가 아닌 기지국 등의 엣지로 보내져 처리되는 기술
        2. 고정밀 지도
            - MMS : 차선 단위의 정보와 속성 정보 제공을 위한 고정밀 지도 구축 기법
            - 클라우드를 통한 변화하는 지형 및 도로 환경 최신화
        3. 데이터
            - 인공지능을 위한 빅데이터 필요
            - 클라우드 기반 데이터 수집, 가공, 학습 및 검증, 업데이트
                - 차량 주행 및 시뮬레이션을 통한 데이터 수집
                - 라벨링 과정과 같은 데이터 가공
                - 인공지능 학습 및 검증
                - 검증 후 OTA를 통한 무선 업데이트
        4. 하드웨어
            - 센서 : 주변 환경 정보 수집
            - 네트워크 : 차량 내 고속 데이터 통신
            - 반도체 : 전체적인 자율주행 기능 수행 및 관리
            - 임베디드 하드웨어 : 인지 판단에 활용되는 프로세서
